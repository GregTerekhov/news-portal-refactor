import{j as y,k as N,R as e,S as B,u as k,C as w,r as g,U as L,l as S,d as T,A as C}from"./index-ad5dacaa.js";import{P as D,N as A}from"./PageTemplate-3f589f2d.js";import"./images-faea85c3.js";import"./Toast-e6d695e3.js";const m=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],I=a=>{const t={};return(a==null?void 0:a.length)>0&&a.forEach(n=>{const o=n==null?void 0:n.additionDate;if(o){const s=y(o,"LLLL yyyy",{locale:N});t[s]||(t[s]=[]),t[s].push(n)}}),t},p=a=>y(a,"dd/MM/yyyy"),h=({handlePageChange:a,currentPage:t,label:n,position:o,iconClass:s})=>{const r=o<t,c="group inline-flex items-center gap-x-2 rounded-full p-2.5 transition-colors duration-500 hocus:bg-accentBase disabled:pointer-events-none disabled:opacity-50 dark:hocus:bg-accentBase dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600";return e.createElement("button",{type:"button",onClick:()=>a(r?t-1:t+1),disabled:t===o,className:`${c}`},e.createElement("span",{"aria-hidden":"true"},e.createElement(B,{svgName:"arrow",sizeKey:"xsIcon14",className:`${s} fill-accentBase group-hover:fill-whiteBase group-focus:fill-whiteBase dark:fill-whiteBase`})),e.createElement("span",{className:"sr-only"},n))},_=({handlePageChange:a,currentPage:t,totalPages:n})=>{const o="flex w-10 h-10 items-center justify-center rounded-full py-2.5 text-small text-darkBase transition-colors duration-500 hocus:bg-accentBase hocus:text-whiteBase dark:text-whiteBase dark:hocus:bg-accentBase lg:text-medium";return e.createElement("nav",{className:"flex items-center space-x-1 px-4 py-2"},e.createElement(h,{handlePageChange:a,currentPage:t,label:"Previous",position:1,iconClass:"rotate-90"}),Array.from({length:n},(s,r)=>e.createElement("button",{key:r,type:"button","aria-current":"page",className:`${o} ${t===r+1?"bg-accentBase text-whiteBase":"bg-transparent text-darkBase dark:text-whiteBase"}`,onClick:()=>a(r+1)},r+1)),e.createElement(h,{handlePageChange:a,currentPage:t,label:"Next",position:n,iconClass:"-rotate-90"}))},$=60,R=87,H=({displayedRows:a})=>{const{wideScreens:t}=k(),n=s=>{let r;switch(!0){case t:r=R;break;default:r=$;break}return s.length>r?`${s.slice(0,r)}...`:s},o="whitespace-nowrap px-6 text-small font-medium text-darkBase dark:text-whiteBase lg:text-medium";return e.createElement(w,{isOpen:!0,orientation:"horizontal"},e.createElement("table",{className:"mb-2.5 min-w-full divide-y divide-greyAlt/[.4] transition-colors duration-500 dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] transition-colors duration-500 dark:bg-greyBase/[.4]"},e.createElement("tr",null,m==null?void 0:m.map(({label:s})=>e.createElement("th",{key:s,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase transition-colors duration-500 dark:text-whiteBase md:text-small lg:text-xl"},s)))),e.createElement("tbody",{className:"divide-y divide-whiteBase transition-colors duration-500 dark:divide-gray-700"},Array.isArray(a)&&a.map(({title:s,newsUrl:r,category:c,additionDate:i,deletionDate:d})=>e.createElement("tr",{key:r,className:"group even:bg-greyAlt/[.1]"},e.createElement("td",{className:`${o}`},e.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer nofollow",className:"block py-4 transition-colors duration-500 focus:text-accentBase group-hover:text-accentBase lg:text-medium"},n(s))),e.createElement("td",{className:`${o}`},c),e.createElement("td",{className:`${o}`},p(i)),e.createElement("td",{className:`${o}`},p(d)))))))},u=7,M=({logData:a})=>{const[t,n]=g.useState(""),[o,s]=g.useState(1),r=t?a.filter(l=>l.title.toLowerCase().includes(t.toLowerCase())):a,c=r.length,i=Math.ceil(c/u),d=(o-1)*u,f=d+u,E=r.slice(d,f),x=l=>{const v=l.target.value;n(v),s(1)},b=l=>{l>=1&&l<=i&&s(l)};return e.createElement("div",{className:"mb-6 flex flex-col overflow-hidden rounded-lg shadow-modal"},e.createElement("div",{className:"inline-block min-w-full align-middle"},e.createElement("div",{className:"divide-y divide-greyAlt/[.4] overflow-hidden rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},e.createElement("div",{className:"px-4 py-3 lg:px-6 lg:py-5"},e.createElement("div",{className:"relative w-[254px] md:max-w-xs"},e.createElement(L,{inputData:{name:"Deleted news",type:"text",value:t,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"search",onChange:l=>x(l),variant:S.FilterServiceBlock}))),e.createElement(H,{displayedRows:E}),e.createElement(_,{handlePageChange:b,currentPage:o,totalPages:i}))))},P=()=>{const{allArchive:a,archiveHistoryLog:t,getHistoryLog:n,getArchives:o}=T();g.useEffect(()=>{o(),n()},[o,n]);const s=I(a);return e.createElement(D,null,e.createElement(M,{logData:t}),Object.entries(s).reverse().map(([r,c])=>e.createElement(C,{key:r,dateSeparator:r,position:"archivePage"},e.createElement(A,{currentItems:c}))))};export{P as default};
