import{u as R,R as n,P as D,S as W,a as $,b as q,r as p,c as G,d as J,e as U,f as V,g as X,L as Y}from"./index-a4a562f8.js";import{P as Z,N as _}from"./NewsList-c8643c73.js";const b=({pageNumbers:o,currentPage:e,setCurrentPage:u})=>{const{breakpointsForMarkup:s}=R()??{breakpointsForMarkup:null},E=o.length,P=window.innerHeight;let d=0;s!=null&&s.isNothing||s!=null&&s.isMobile?d=3:d=6;const t=[],g=1,m=E,w=e-1,a=e+1,l=i=>n.createElement("li",{key:i,className:`${i===e?"active":""}`,onClick:()=>{u(i),window.scrollTo({top:0+P,left:0})}},n.createElement(D,{"aria-label":i.toString(),classNameButton:`h-10 border-accentBase font-medium ${i===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:"Small",dataTooltipTarget:`tooltip-pagination-pages-${i.toString()}`,dataTooltipPlacement:"bottom",tooltipText:`Paginate news to page ${i.toString()}`},i)),r=i=>n.createElement("li",{key:i,className:"ellipsis"},n.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"..."));if(E<=d)for(let i=g;i<=m;i+=1)t.push(l(i));else e===g?(t.push(l(e)),t.push(l(a)),t.push(r("next")),t.push(l(m))):e===m?(t.push(l(g)),t.push(r("prev")),t.push(l(w)),t.push(l(e))):e>g&&e<m&&(e===2&&(t.push(r("prev")),t.push(l(e)),t.push(l(a)),t.push(r("next")),t.push(l(m))),e-1>g&&e+1!==m&&(t.push(r("prev")),t.push(l(w)),t.push(l(e)),t.push(r("next")),t.push(l(m))),e+1===m&&(t.push(l(g)),t.push(r("prev")),t.push(l(e)),t.push(l(m))));const L=()=>{e>1&&(u(e-1),window.scrollTo({top:0+P,left:0}))},T=()=>{e<o.length&&(u(e+1),window.scrollTo({top:0+P,left:0}))};return n.createElement("div",{className:"flex justify-center items-center gap-2"},n.createElement(D,{id:"Previous page button",variant:"OtherButton",onHandleClick:L,width:"w-32"},n.createElement(W,{svgName:"icon-arrow-left",size:20,className:"fill-whiteBase"}),s!=null&&s.isTablet||s!=null&&s.isDesktop?n.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Prev"):null),n.createElement("ul",{id:"page-numbers",className:"flex gap-2"},t),n.createElement(D,{id:"Next page button",variant:"OtherButton",onHandleClick:T,width:"w-32"},s!=null&&s.isTablet||s!=null&&s.isDesktop?n.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Next"):null,n.createElement(W,{svgName:"icon-arrow-right",size:20,className:"stroke-whiteBase"})))},F=o=>{const{breakpointsForMarkup:e}=R()||{breakpointsForMarkup:null},{popularNews:u,newsByKeyword:s,newsByCategory:E,newsByDate:P}=$(),{filteredNews:d}=q(),[t,g]=p.useState(1),[m,w]=p.useState([]),a=o&&(o==null?void 0:o.length)||0,l=4,r=7,L=8,T=5,i=8,z=9,S=N(a,l,T),A=N(a,r,i),H=N(a,L,z),x=j(),B=K();p.useEffect(()=>{if(o&&(o==null?void 0:o.length)>0){const c=t*x-1>=a;let h,f;t===1?(h=t*x,f=h-x):t>1&&c&&B?(h=a,e!=null&&e.isNothing||e!=null&&e.isMobile?f=a-B.firstIndexForLastMobilePage:e!=null&&e.isTablet?f=a-B.firstIndexForLastTabletPage:f=a-B.firstIndexForLastDesktopPage):(h=t*x-1,f=h-x);const v=o.slice(f,h);w(v)}},[u,s,E,P,d,t]);function N(c,h,f){const v=[h];let C=c-h;for(;C>0;)v.push(f),C-=f;return v}function j(){return e!=null&&e.isMobile||e!=null&&e.isNothing?S[t-1]||0:e!=null&&e.isTablet?A[t-1]||0:H[t-1]||0}function y(c,h){const f=c&&c.slice(0,-1).reduce((C,Q)=>C+Q,0);return h-f}function K(){try{const c=y(S,a),h=y(A,a),f=y(H,a);return{firstIndexForLastMobilePage:c,firstIndexForLastTabletPage:h,firstIndexForLastDesktopPage:f}}catch(c){return console.error(c.message)}}const O=[];let I;t!==1&&(e!=null&&e.isNothing||e!=null&&e.isMobile)?I=Math.ceil(a/x+1):I=Math.ceil(a/x);for(let c=1;c<=I;c++)O.push(c);return{currentItems:m,pageNumbers:O,currentPage:t,setCurrentPage:g}},ee=()=>{const{isLoadingAPIData:o,fetchPopular:e}=$(),{isLoadingDBData:u,getSavedNews:s}=G(),E=J(),P=U(E),{rebuildedNews:d}=V({activeLinks:P}),{currentItems:t,currentPage:g,pageNumbers:m,setCurrentPage:w}=F(d??[]),{isAuthenticated:a}=X();return p.useEffect(()=>{e("1"),a&&s()},[e,s,a]),n.createElement("div",null,o||u&&d&&(t==null?void 0:t.length)===0?n.createElement(Y,{variant:"page"}):n.createElement(n.Fragment,null,d&&d.length===0?n.createElement(Z,{variant:"page"}):n.createElement(n.Fragment,null,n.createElement("h2",{className:"dark:text-whiteBase text-giant font-bold mb-6"},"Popular News"),n.createElement(_,{currentItems:t,currentPage:g}),n.createElement(b,{pageNumbers:m,currentPage:g,setCurrentPage:w}))))};export{ee as default};
