import{u as S,R as a,P as N,S as L,a as D,b as R,r as w,c as z,d as V,e as j,f as K,g as q,L as G}from"./index-de0e5d4d.js";import{P as J,N as Q}from"./NewsList-a09e178d.js";const U=({pageNumbers:l,currentPage:e,setCurrentPage:u})=>{const{breakpointsForMarkup:s}=S()??{breakpointsForMarkup:null},p=l.length,g=window.innerHeight;let r=0;s!=null&&s.isNothing||s!=null&&s.isMobile?r=3:r=6;const t=[],m=1,i=p,f=e-1,c=e+1,n=o=>a.createElement("li",{key:o,className:`${o===e?"active":""}`,onClick:()=>{u(o),window.scrollTo({top:0+g,left:0})}},a.createElement(N,{"aria-label":o.toString(),classNameButton:`h-10 border-accentBase font-medium ${o===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:"Small",dataTooltipTarget:`tooltip-pagination-pages-${o.toString()}`,dataTooltipPlacement:"bottom",tooltipText:`Paginate news to page ${o.toString()}`},o)),h=o=>a.createElement("li",{key:o,className:"ellipsis"},a.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"..."));if(p<=r)for(let o=m;o<=i;o+=1)t.push(n(o));else e===m?(t.push(n(e)),t.push(n(c)),t.push(h("next")),t.push(n(i))):e===i?(t.push(n(m)),t.push(h("prev")),t.push(n(f)),t.push(n(e))):e>m&&e<i&&(e===2&&(t.push(h("prev")),t.push(n(e)),t.push(n(c)),t.push(h("next")),t.push(n(i))),e-1>m&&e+1!==i&&(t.push(h("prev")),t.push(n(f)),t.push(n(e)),t.push(h("next")),t.push(n(i))),e+1===i&&(t.push(n(m)),t.push(h("prev")),t.push(n(e)),t.push(n(i))));const E=()=>{e>1&&(u(e-1),window.scrollTo({top:0+g,left:0}))},x=()=>{e<l.length&&(u(e+1),window.scrollTo({top:0+g,left:0}))};return a.createElement("div",{className:"flex justify-center items-center gap-2"},a.createElement(N,{id:"Previous page button",variant:"OtherButton",onHandleClick:E,width:"w-32"},a.createElement(L,{svgName:"icon-arrow-left",size:20,className:"fill-whiteBase"}),s!=null&&s.isTablet||s!=null&&s.isDesktop?a.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Prev"):null),a.createElement("ul",{id:"page-numbers",className:"flex gap-2"},t),a.createElement(N,{id:"Next page button",variant:"OtherButton",onHandleClick:x,width:"w-32"},s!=null&&s.isTablet||s!=null&&s.isDesktop?a.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Next"):null,a.createElement(L,{svgName:"icon-arrow-right",size:20,className:"stroke-whiteBase"})))},X=l=>{const{breakpointsForMarkup:e}=S()||{breakpointsForMarkup:null},{popularNews:u,newsByKeyword:s,newsByCategory:p,newsByDate:g}=D(),{filteredNews:r}=R(),[t,m]=w.useState(1),[i,f]=w.useState([]),c=l&&(l==null?void 0:l.length)||0,n=4,h=7,E=8,x=5,o=8,H=9,A=C(c,n,x),W=C(c,h,o),O=C(c,E,H),v=$();w.useEffect(()=>{if(l&&(l==null?void 0:l.length)>0){const d=t===1?t*v:t*v-1,P=d-v,B=l.slice(P,d);f(B)}},[u,s,p,g,r,t]);function C(d,P,B){const I=[P];let y=d-P;for(;y>0;)I.push(B),y-=B;return I}function $(){return e!=null&&e.isMobile||e!=null&&e.isNothing?A[t-1]||0:e!=null&&e.isTablet?W[t-1]||0:O[t-1]||0}const T=[];for(let d=1;d<=Math.ceil(c/v);d++)T.push(d);return{currentItems:i,pageNumbers:T,currentPage:t,setCurrentPage:m}},_=()=>{const{isLoadingAPIData:l,fetchPopular:e}=D(),{savedNews:u,isLoadingDBData:s,getSavedNews:p,addVotedNews:g}=z(),[r,t]=w.useState(!1),m=V(),i=j(m),{rebuildedNews:f}=K({activeLinks:i}),{currentItems:c,currentPage:n,pageNumbers:h,setCurrentPage:E}=X(f??[]),{isAuthenticated:x}=q();w.useEffect(()=>{e("1"),x&&p()},[e,p,x]),w.useLayoutEffect(()=>{r&&(g(u),t(!1))},[r,g]);const o=()=>{t(!0)};return a.createElement("div",null,l||s&&f&&(c==null?void 0:c.length)===0?a.createElement(G,{variant:"page"}):a.createElement(a.Fragment,null,f&&f.length===0?a.createElement(J,{variant:"page"}):a.createElement(a.Fragment,null,a.createElement("h2",{className:"dark:text-whiteBase text-giant font-bold mb-6"},"Popular News"),a.createElement(Q,{currentItems:c,currentPage:n,onChange:o}),a.createElement(U,{pageNumbers:h,currentPage:n,setCurrentPage:E}))))};export{_ as default};
