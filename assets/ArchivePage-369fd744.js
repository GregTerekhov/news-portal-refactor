import{k as y,l as x,R as e,S as b,I as B,r as p,C as k,U as w,m as L,c as D,d as S,h as C,L as I,A,T}from"./index-1d3f652f.js";import{N as M,P as R}from"./NewsList-dd545196.js";import"./images-2289e748.js";const h=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],_=a=>{const t={};return a&&(a==null?void 0:a.length)>0&&a.forEach(s=>{const n=s==null?void 0:s.additionDate;if(n){const r=y(n,"LLLL yyyy",{locale:x});t[r]||(t[r]=[]),t[r].push(s)}}),t},f=({handlePageChange:a,currentPage:t,label:s,position:n,iconClass:r})=>{const l=n<t;return e.createElement("button",{type:"button",onClick:()=>a(l?t-1:t+1),disabled:t===n,className:"group inline-flex items-center gap-x-2 rounded-full p-2.5 transition-colors duration-500 hover:bg-accentBase disabled:pointer-events-none disabled:opacity-50 dark:hover:bg-accentBase dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{"aria-hidden":"true"},e.createElement(b,{svgName:"icon-arrow",size:B.xsIcon14,className:`${r} fill-accentBase group-hover:fill-whiteBase dark:fill-whiteBase`})),e.createElement("span",{className:"sr-only"},s))},$=({handlePageChange:a,currentPage:t,totalPages:s})=>e.createElement("nav",{className:"flex items-center space-x-1"},e.createElement(f,{handlePageChange:a,currentPage:t,label:"Previous",position:1,iconClass:"rotate-90"}),Array.from({length:s},(n,r)=>e.createElement("button",{key:r,type:"button","aria-current":"page",className:"flex min-w-10 items-center justify-center rounded-full py-2.5 text-sm text-darkBase transition-colors duration-500 hover:bg-accentBase hover:text-whiteBase dark:text-whiteBase dark:hover:bg-accentBase",onClick:()=>a(r+1)},r+1)),e.createElement(f,{handlePageChange:a,currentPage:t,label:"Next",position:s,iconClass:"-rotate-90"})),O=60,P=({displayedRows:a})=>{const t="whitespace-nowrap px-6 py-4 text-sm font-medium text-darkBase dark:text-whiteBase";return e.createElement("table",{className:"min-w-full divide-y divide-greyAlt/[.4] transition-colors duration-500 dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] transition-colors duration-500 dark:bg-greyBase/[.4]"},e.createElement("tr",null,h&&(h==null?void 0:h.map(({label:s})=>e.createElement("th",{key:s,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase transition-colors duration-500 dark:text-whiteBase md:text-small"},s))))),e.createElement("tbody",{className:"divide-y divide-whiteBase transition-colors duration-500 dark:divide-gray-700"},Array.isArray(a)&&a.map(s=>{const{title:n,newsUrl:r,category:l,additionDate:c,deletionDate:i}=s,d=y(c,"dd/MM/yyyy"),m=y(i,"dd/MM/yyyy");return e.createElement("tr",{key:r,className:"group even:bg-greyAlt/[.1]"},e.createElement("td",{className:`${t}`},e.createElement("a",{href:r,target:"_blank",className:"transition-colors duration-500 group-hover:text-accentBase"},n.length>O?`${n.slice(0,65)}...`:n)),e.createElement("td",{className:`${t}`},l),e.createElement("td",{className:`${t}`},d),e.createElement("td",{className:`${t}`},m))})))},E=7,U=({logData:a})=>{const[t,s]=p.useState(""),[n,r]=p.useState(1),l=t?a.filter(o=>o.title.toLowerCase().includes(t.toLowerCase())):a,c=l.length,i=Math.ceil(c/E),d=(n-1)*E,m=d+E,u=l.slice(d,m),g=o=>{const N=o.target.value;s(N),r(1)},v=o=>{o>=1&&o<=i&&r(o)};return e.createElement("div",{className:"mb-6 flex flex-col overflow-hidden rounded-lg shadow-modal"},e.createElement(k,{isOpen:!0,orientation:"horizontal"},e.createElement("div",{className:"-m-1.5"},e.createElement("div",{className:"inline-block min-w-full p-1.5 align-middle"},e.createElement("div",{className:"divide-y divide-greyAlt/[.4] rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},e.createElement("div",{className:"px-4 py-3"},e.createElement("div",{className:"relative w-[254px] md:max-w-xs"},e.createElement(w,{inputData:{name:"Deleted news",type:"text",value:t,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"icon-search",onChange:o=>g(o),variant:L.FilterServiceBlock}))),e.createElement(P,{displayedRows:u}),e.createElement("div",{className:"mb-3 px-4 py-1"},e.createElement($,{handlePageChange:v,currentPage:n,totalPages:i})))))))},j=()=>{const{dbSuccessMessage:a,isLoadingDBData:t,allArchive:s,archiveHistoryLog:n,errorDB:r,getHistoryLog:l,getArchives:c}=D(),{isAuthenticated:i}=S(),d=C();p.useEffect(()=>{r&&r>=500&&d("/serverError")},[r]),p.useEffect(()=>{c(),l()},[c,l]);const m=_(s),u=t,g=!t&&s.length!==0;return i&&e.createElement(e.Fragment,null,u&&e.createElement(I,{variant:"generalSection"}),g&&e.createElement(e.Fragment,null,e.createElement(U,{logData:n}),Object.entries(m).reverse().map(([v,o])=>e.createElement(A,{key:v,dateSeparator:v,position:"archivePage"},e.createElement(M,{currentItems:o})))),!u&&!g&&e.createElement(R,{variant:"page"}),a==="Remove news success"&&e.createElement(T,{variant:"interactive",status:"success"}))};export{j as default};
