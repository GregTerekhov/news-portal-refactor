import{u as H,a as W,b as U,r as w,R as s,P as A,V as D,S as P,I as L,c as K,d as Q,e as Y,f as z,g as V,h as $,L as j,T as _}from"./index-40811604.js";import{P as q,N as G}from"./NewsList-37da6da3.js";import"./images-7dac5094.js";const Z=(n,e,i)=>{const l=[e];let c=n-e;for(;c>0;)l.push(i),c-=i;return l},J=(n,e)=>{const i=n&&n.slice(0,-1).reduce((c,f)=>c+f,0);return e-i},X=(n,e,i)=>Z(n,e,i),F=(n,e)=>{try{return J(n,e)}catch(i){return console.error(i.message)}},b=n=>{const{breakpointsForMarkup:e}=H()||{breakpointsForMarkup:null},{popularNews:i,newsByKeyword:l,newsByCategory:c,newsByDate:f}=W(),{filteredNews:g}=U(),[m,t]=w.useState(1),[r,E]=w.useState([]),h=n&&(n==null?void 0:n.length)||0,o=(e==null?void 0:e.isNothing)||(e==null?void 0:e.isMobile),u=y(),p=C(),v=X(h,u,p),a=v[m-1]||0,T=F(v,h);w.useEffect(()=>{if(n&&(n==null?void 0:n.length)>0){const N=m*a-1>=h;let d,x;m===1?(d=m*a,x=d-a):m>1&&N&&T?(d=h,x=h-T):(d=m*a-1,x=d-a);const S=n.slice(x,d);E(S)}},[i,l,c,f,g,m]);function y(){return e!=null&&e.isNothing||e!=null&&e.isMobile?4:e!=null&&e.isTablet?7:8}function C(){return o?5:e!=null&&e.isTablet?8:9}const O=Math.ceil(m!==1&&o?h/a+1:h/a),I=Array.from({length:O},(N,d)=>d+1);return{currentItems:r,pageNumbers:I,currentPage:m,setCurrentPage:t}},R="w-32",B=1,M=3,k=6,ee=({pageNumbers:n,currentPage:e,setCurrentPage:i})=>{const{breakpointsForMarkup:l}=H()??{breakpointsForMarkup:null},c=(l==null?void 0:l.isTablet)||(l==null?void 0:l.isDesktop),f=n.length,g=window.innerHeight,m=c?k:M,t=[],r=f,E=e-1,h=e+1,o=a=>s.createElement("li",{key:a,className:`${a===e?"active":""}`,onClick:()=>{i(a),window.scrollTo({top:0+g,left:0})}},s.createElement(A,{"aria-label":a.toString(),classNameButton:`h-10 border-accentBase font-medium transition-colors duration-500 ${a===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:D.Small},a)),u=a=>s.createElement("li",{key:a,className:"ellipsis"},s.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"..."));if(f<=m)for(let a=B;a<=r;a+=1)t.push(o(a));else e===B?(t.push(o(e)),t.push(o(h)),t.push(u("next")),t.push(o(r))):e===r?(t.push(o(B)),t.push(u("prev")),t.push(o(E)),t.push(o(e))):e>B&&e<r&&(e===2&&(t.push(u("prev")),t.push(o(e)),t.push(o(h)),t.push(u("next")),t.push(o(r))),e-1>B&&e+1!==r&&(t.push(u("prev")),t.push(o(E)),t.push(o(e)),t.push(o(h)),t.push(u("next"))),e+1===r&&(t.push(u("prev")),t.push(o(E)),t.push(o(e)),t.push(o(r))));const p=()=>{e>1&&(i(e-1),window.scrollTo({top:0+g,left:0}))},v=()=>{e<n.length&&(i(e+1),window.scrollTo({top:0+g,left:0}))};return s.createElement("div",{className:"flex items-center justify-center gap-2"},s.createElement(A,{id:"Previous page button",variant:D.Other,onHandleClick:p,width:R,disabled:e-1===0},s.createElement(P,{svgName:"icon-arrow-left",size:L.mdIcon24,className:"fill-whiteBase"}),c?s.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium"},"Prev"):null),s.createElement("ul",{id:"page-numbers",className:"flex gap-2"},t),s.createElement(A,{id:"Next page button",variant:D.Other,onHandleClick:v,width:R,disabled:e===r},c?s.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium"},"Next"):null,s.createElement(P,{svgName:"icon-arrow-left",size:L.mdIcon24,className:"rotate-180 fill-whiteBase"})))},te="1",oe=()=>{const{isLoadingAPIData:n,errorAPI:e,headline:i,newsByCategory:l,newsByDate:c,newsByKeyword:f,fetchPopular:g}=W(),{isLoadingDBData:m,getSavedNews:t}=K(),{isAuthenticated:r,authError:E}=Q(),{setOpenToast:h}=Y(),o=z(),{rebuildedNews:u}=V({activeLinks:o}),{hasResults:p}=U(),{currentItems:v,currentPage:a,pageNumbers:T,setCurrentPage:y}=b(u??[]),C=e==null?void 0:e.toString().includes("429"),O=$();w.useEffect(()=>{e&&e>=500&&O("/serverError")},[e]),w.useEffect(()=>{g(te),r&&t()},[g,t,r]),w.useEffect(()=>{(f||l||c)&&h(!0)},[f,l,c]);const I=n||m||p==="loading",N=u&&u.length===0||p==="empty",d=f&&f.length>0||l&&l.length>0||c&&c.length>0,x=!I&&d,S=E&&E.message||e;return s.createElement(s.Fragment,null,I?s.createElement(j,{variant:"generalSection"}):s.createElement(s.Fragment,null,N||C?s.createElement(q,{variant:"page"}):s.createElement(s.Fragment,null,i&&s.createElement("h2",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},i),s.createElement(G,{currentItems:v,currentPage:a}),s.createElement(ee,{pageNumbers:T,currentPage:a,setCurrentPage:y}))),S&&s.createElement(_,{variant:"interactive",status:"error"}),x&&s.createElement(_,{variant:"non-interactive",status:"info"}))};export{oe as default};
