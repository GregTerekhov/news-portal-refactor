import{x as Z,y as Te,r as E,z as Be,E as Ie,D as _,p as pe,b as V,I as h,R as t,F as ke,P as re,V as ce,c as u,d as q,G as H,H as He,J as fe,K as Pe,L as Ae,N as G,O as U,m as F,u as ee,Q as J,W as Q,X as Y,Y as de,Z as xe,_ as ie,f as j,o as ye,$ as De,a0 as Re,a1 as We,g as le,B as Le,q as Fe,M as he,w as Me,e as me,a2 as ne,h as we,S as W,a3 as M,a4 as z}from"./index-bbedbc49.js";import{T as ze}from"./Toast-9151dc6f.js";var te=(e=>(e.Page="page",e.Card="card",e))(te||{}),b=(e=>(e.Timezone="Greenwich mean time",e.Humidity="Humidity in percent",e.PressureMmHg="Atmospheric pressure in mm Hg",e.PressureHPa="Atmospheric pressure in hPa",e.Sunrise="Sunrise time",e.Sunset="Sunset time",e.Visibility="Road visibility",e.WindSpeed="Wind speed in metre per seconds",e.Temperature="Temperature in scale C or F",e.CurrentWeather="Precipitation and weather",e))(b||{}),A=(e=>(e.Timezone="UTC",e.Humidity="%",e.PressureMmHg="mm.Hg",e.PressureHPa="hPa",e.Sunrise="AM",e.Sunset="PM",e.Visibility="km",e.WindSpeed="m/s",e))(A||{});const $e=e=>e.weather.isLoading,je=e=>e.weather.data,Oe=e=>e.weather.weatherByHour,Ge=e=>e.weather.hasError,K=()=>{const e=Z($e),s=Z(je),a=Z(Oe),n=Z(Ge),o=Te(),r=E.useCallback(i=>o(Be(i)),[o]),c=E.useCallback(i=>o(Ie(i)),[o]);return{isWeatherLoading:e,currentWeather:s,hourlyWeather:a,weatherError:n,getCurrentWeather:r,getHourlyWeather:c}},Ue=e=>{switch(e){case _.Delete:return"delete this";case _.Clear:return"clear the log of deleted";default:return""}},Ve=({handleClose:e,handleDelete:s,title:a})=>{const{isOpenModal:n}=pe(),o=Ue(a),r=[{onClick:c=>e(c,!0),id:_.Delete?V.CancelDeleteNews:V.CancelClearLog,label:"Cancel",icon:h.Reset},{onClick:s,id:_.Delete?V.DeleteNews:V.ClearLog,label:"Delete",icon:h.Trash}];return t.createElement(ke,{enabled:n},t.createElement("div",null,t.createElement("h3",{className:"mb-4 text-2xl text-darkBase dark:text-whiteBase md:mb-6 md:text-4xl"},a),t.createElement("p",{className:"mb-6 text-medium text-darkBase dark:text-whiteBase md:mb-10 md:text-xl"},`Are you sure you want to ${o} news?`),t.createElement("ul",{className:"max-md:space-y-4 md:flex md:items-center md:justify-between md:gap-8"},Array.isArray(r)&&r.map(({onClick:c,id:i,label:l,icon:m})=>t.createElement("li",{key:l,className:"w-full"},t.createElement(re,{variant:ce.Primary,onHandleClick:c,hasIcon:!0,id:i,svgName:m,svgSize:u.smIcon18,classNameIcon:"fill-whiteBase",classNameButton:"md:text-xl border border-whiteBase"},l))))))},_e="text-center text-2xl font-bold tracking-smallTight text-darkBase transition-colors dark:text-whiteBase md:w-548px md:text-5xl md:tracking-tighter",qe=(e,s)=>s&&e?"It seems you have been send too much requests then its needed":"We haven’t found news from this category",ve=({variant:e})=>{const{errorAPI:s}=q(),{isHomeActive:a}=H(),{cacheImage:n}=He(),o=s==null?void 0:s.toString().includes(fe.TooManyRequest.toString()),r=window.devicePixelRatio||1,{width:c,height:i,src:l}=Pe(Ae,r,window.innerWidth),m=n(l||"");return t.createElement(t.Fragment,null,e===te.Page?t.createElement("div",{className:"flex flex-col items-center justify-center space-y-10"},t.createElement("p",{className:_e},qe(a,o)),t.createElement("img",{src:m,alt:o&&a?"Too much requests":"No found news",width:c,height:i})):t.createElement("img",{src:m,alt:"No found an image for news",width:c,height:i}))},Se=()=>{const[e,s]=E.useState(!0),[a,n]=E.useState(!1),[o,r]=E.useState(null),[c,i]=E.useState(!1),{getCurrentWeather:l,getHourlyWeather:m}=K(),d="geolocation"in navigator,p=G(U.Get,"geolocationPermission");E.useEffect(()=>{p&&(i(!0),r("granted"))},[o]);const x=v=>{switch(i(!1),r("denied"),p&&G(U.Remove,"geolocationPermission"),v.code){case v.PERMISSION_DENIED:console.error("User denied access to geolocation");break;case v.POSITION_UNAVAILABLE:console.error("Geolocation information is unavailable");break;case v.TIMEOUT:console.error("Geolocation access request timed out");break;default:console.error("An unknown error occurred while getting geolocation");break}};return{isCelsius:e,flippingCard:a?"rotate-y-180":"rotate-y-0",statePermission:o,hasGeolocationPermission:c,requestGeolocationPermission:()=>{d&&navigator.permissions.query({name:"geolocation"}).then(v=>{v.state==="granted"?(r("granted"),i(!0),G(U.Set,"geolocationPermission","granted"),navigator.geolocation.getCurrentPosition(({coords:B})=>{const{latitude:N,longitude:I}=B,T={lat:N,lon:I};l(T),m(T)})):v.state==="prompt"?(r("prompt"),navigator.geolocation.getCurrentPosition(({coords:B})=>{i(!0),G(U.Set,"geolocationPermission","granted");const{latitude:N,longitude:I}=B,T={lat:N,lon:I};l(T),m(T)},x)):(i(!1),r("denied"),G(U.Remove,"geolocationPermission"))})},toggleTemperatureScale:()=>{s(!e)},flipWeatherDetails:()=>{n(!a)},showButtonText:()=>{switch(!0){case(o==="prompt"||!c):return"Give permission for your geolocation";case c:return"Get the weather for your region";case o==="denied":return"Permission denied";default:return"Give permission for your geolocation"}}}},Ke=({showError:e})=>{const{requestGeolocationPermission:s,showButtonText:a}=Se(),n=e?"Server error. Please try again later when you reload the page":"What a pity, this could be your weather";return t.createElement(t.Fragment,null,t.createElement("h2",{className:"text-medium text-whiteBase md:text-2xl lg:text-4xl"},n),t.createElement("div",{className:`my-auto ${e?"flex justify-center":""}`},t.createElement(F,{svgName:h.Moon,sizeKey:u.ultraIcon156,className:"fill-transparent stroke-greyBase"})),!e&&t.createElement(re,{id:V.GeoPermission,variant:ce.Primary,onHandleClick:s,classNameButton:"border border-solid border-whiteBase"},a()))},Xe={"-43200":"-12:00","-39600":"-11:00","-36000":"-10:00","-34200":"-09:30","-32400":"-09:00","-28800":"-08:00","-25200":"-07:00","-21600":"-06:00","-18000":"-05:00","-16200":"-04:30","-14400":"-04:00","-12600":"-03:30","-10800":"-03:00","-7200":"-02:00","-3600":"-01:00",0:"00:00",3600:"+01:00",7200:"+02:00",10800:"+03:00",12600:"+03:30",14400:"+04:00",16200:"+04:30",18e3:"+05:00",19800:"+05:30",20700:"+05:45",21600:"+06:00",23400:"+06:30",25200:"+07:00",28800:"+08:00",32400:"+09:00",34200:"+09:30",36e3:"+10:00",37800:"+10:30",39600:"+11:00",41400:"+11:30",43200:"+12:00",45900:"+12:45",46800:"+13:00",50400:"+14:00"},Ze=[{min:0,max:.2,scale:"0"},{min:.3,max:1.5,scale:"1"},{min:1.6,max:3.3,scale:"2"},{min:3.4,max:5.4,scale:"3"},{min:5.5,max:7.9,scale:"4"},{min:8,max:10.7,scale:"5"},{min:10.8,max:13.8,scale:"6"},{min:13.9,max:17.1,scale:"7"},{min:17.2,max:20.7,scale:"8"},{min:20.8,max:24.4,scale:"9"},{min:24.5,max:28.4,scale:"10"},{min:28.5,max:32.6,scale:"11"},{min:32.7,max:Number.MAX_SAFE_INTEGER,scale:"12"}],Je={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday"};function Qe(e){const s=String(e);return Xe[s]}function Ye(e){return e/1e3}function et(e){let s;return e&&(s=Ze.find(a=>e>=a.min&&e<=a.max)),s?s==null?void 0:s.scale:""}function oe(e){const s=new Date(e*1e3),a=s.getHours(),n=s.getMinutes(),o=String(a).padStart(2,"0"),r=String(n).padStart(2,"0");return`${o}:${r}`}function Ee(e){return Math.floor(e*.75006)}const $=(e,s)=>s&&e?Math.round(e)+"°":Math.round(e*9/5+32)+"°",ge=e=>e<10?`0${e}`:e.toString();function tt(){const e=new Date,s=e.getHours(),a=e.getMinutes(),n=ge(s),o=ge(a);return`${n}:${o}`}function st(){const e=new Date,s=Je[e.toDateString().slice(0,3)],a=tt(),n=e.toDateString().slice(4).slice(0,4),o=e.toDateString().slice(8).slice(0,2),r=e.toDateString().slice(11),c=`${a} | ${o} ${n} ${r}`;return{days:s,dateNow:c}}function ue(e,s){const{main:a,weather:n,name:o,timezone:r,sys:c,visibility:i,wind:l}=e;return{currentTemperature:s?$(a==null?void 0:a.temp,!0):$(a==null?void 0:a.temp,!1),feelsLike:s?`${$(a==null?void 0:a.feels_like,!0)} C`:`${$(a==null?void 0:a.feels_like,!1)} F`,prevailingWeather:(n==null?void 0:n[0].main)??"",location:o??"",timezone:Qe(r),iconWeather:n==null?void 0:n[0].icon,iconAlt:n==null?void 0:n[0].description,humidityPercent:a==null?void 0:a.humidity,pressureMmHg:Ee(a==null?void 0:a.pressure),pressureHpa:a==null?void 0:a.pressure,sunriseTime:oe(c==null?void 0:c.sunrise),sunsetTime:oe(c==null?void 0:c.sunset),visibility:Ye(i),windSpeed:l==null?void 0:l.speed,beaufortScale:et(l==null?void 0:l.speed)}}function L(e,s){var c,i;const{dt:a,main:n,weather:o,wind:r}=e;return{timeScale:a,convertedTimeScale:oe(a),mainTemperature:s?`${$(n==null?void 0:n.temp,!0)} C`:`${$(n==null?void 0:n.temp,!1)} F`,iconWeather:(c=o==null?void 0:o[0])==null?void 0:c.icon,iconAlt:(i=o==null?void 0:o[0])==null?void 0:i.description,humidityPercent:n==null?void 0:n.humidity,pressureMmHg:Ee(n==null?void 0:n.pressure),windSpeed:r==null?void 0:r.speed}}const at=(e,s)=>{const{timezone:a,humidityPercent:n,pressureHpa:o,pressureMmHg:r,sunriseTime:c,sunsetTime:i,visibility:l,windSpeed:m,beaufortScale:d}=ue(s);return[{icon:h.Earth,iconSize:e?u.xsIcon16:u.mdIcon24,value:a??"",ariaLabel:b.Timezone,hint:"GMT time",justifyItemClass:"justify-start",subTextValue:A.Timezone},{icon:h.Humidity,iconSize:e?u.smIcon18:u.lgIcon30,value:n,ariaLabel:b.Humidity,hint:"Humidity (%)",justifyItemClass:"justify-end",subTextValue:A.Humidity},{icon:h.Pressure,iconSize:e?u.smIcon18:u.lgIcon30,value:r,ariaLabel:b.PressureMmHg,hint:"Atmospheric pressure (mm.Hg)",justifyItemClass:"justify-start",subTextValue:A.PressureMmHg},{icon:h.Pressure,iconSize:e?u.smIcon18:u.lgIcon30,value:o,ariaLabel:b.PressureHPa,hint:"Atmospheric pressure (HPa)",justifyItemClass:"justify-end",subTextValue:A.PressureHPa},{icon:h.Sunrise,iconSize:e?u.smIcon20:u.lgIcon30,value:c,ariaLabel:b.Sunrise,hint:"Sunrise time",justifyItemClass:"justify-start",subTextValue:A.Sunrise},{icon:h.Sunset,iconSize:e?u.smIcon20:u.lgIcon30,value:i,ariaLabel:b.Sunset,hint:"Sunset time",justifyItemClass:"justify-end",subTextValue:A.Sunset},{icon:h.OpenedEye,iconSize:e?u.smIcon20:u.lgIcon30,value:l,ariaLabel:b.Visibility,hint:"Road visibility",justifyItemClass:"justify-start",subTextValue:A.Visibility},{icon:h.WindSpeed,iconSize:e?u.smIcon20:u.lgIcon30,value:m,ariaLabel:b.WindSpeed,hint:`Wind speed (m/s). (${d} on the Beaufort scale)`,justifyItemClass:"justify-end",subTextValue:A.WindSpeed}]},nt=e=>[{hint:`Temperature in °${e?"C":"F"}`,ariaLabel:b.Temperature,icon:h.Thermometer,iconSize:u.mdIcon24,iconColorStyles:"fill-whiteBase",renderCell:lt},{hint:"Precipitation and weather",ariaLabel:b.CurrentWeather,icon:h.Sun,iconSize:u.mdIcon24,iconColorStyles:"stroke-whiteBase fill-transparent",renderCell:mt},{hint:"Humidity (%)",ariaLabel:b.Humidity,icon:h.Humidity,iconSize:u.mdIcon28,iconColorStyles:"fill-whiteBase",renderCell:ut},{hint:"Atmospheric pressure (mm.Hg)",ariaLabel:b.PressureMmHg,icon:h.Pressure,iconSize:u.mdIcon24,iconColorStyles:"fill-whiteBase",renderCell:dt},{hint:"Wind speed (m/s)",ariaLabel:b.WindSpeed,icon:h.WindSpeed,iconSize:u.mdIcon24,iconColorStyles:"fill-whiteBase",renderCell:ht}],ot=({toggleTemperatureScale:e,currentWeather:s,isCelsius:a})=>{const{isSmallScreens:n}=ee(),{currentTemperature:o,prevailingWeather:r,feelsLike:c,location:i}=ue(s,a);return t.createElement("div",{className:"mx-auto flex cursor-pointer items-center justify-evenly gap-5",onClick:e},t.createElement("div",{className:'relative w-83px text-center after:absolute after:-right-2 after:top-0 after:h-full after:w-px after:bg-white after:content-[""] md:w-96px'},t.createElement("p",{className:"font-weather text-monstrous text-contrastWhite  md:text-[64px]"},o)),t.createElement("div",{className:"space-y-2.5"},t.createElement("div",null,t.createElement("p",{className:"font-weather text-3xl text-contrastWhite md:text-4.5xl"},r),t.createElement("p",{className:"font-weather text-base text-contrastWhite md:text-2xl"},"Feels like ",c)),t.createElement("div",{className:"flex items-center gap-1 rounded-lg bg-weatherForeground px-2 py-[9px] text-contrastWhite md:gap-2 md:pb-[9px] md:pl-[7px] md:pr-[17px] md:pt-[10px]"},t.createElement(F,{svgName:h.Location,sizeKey:n?u.smIcon20:u.mdIcon27,className:"fill-whiteBase"}),t.createElement("p",{className:"font-weather text-base text-contrastWhite md:text-medium"},i))))},rt=({isCelsius:e})=>{const{hourlyWeather:s}=K(),{isSmallScreens:a}=ee(),n=nt(e);return t.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full bg-accentBase duration-500 ease-in backface-hidden rotate-y-180"},t.createElement("table",{className:"h-full min-w-full border-separate border border-transparent bg-accentBase"},t.createElement("thead",{className:"h-10"},t.createElement(J,{label:"Time",side:Q.Top,sideOffset:Y.Zero,ariaLabel:"Time interval (3 hours)"},t.createElement("tr",null,t.createElement("th",{className:"w-10 pr-2"},t.createElement(F,{svgName:h.Clock,sizeKey:a?u.smIcon20:u.mdIcon24,className:"fill-whiteBase"})),Array.isArray(s)&&(s==null?void 0:s.map(o=>t.createElement("th",{key:L(o).timeScale,scope:"col",className:"-rotate-90 whitespace-nowrap text-center text-small text-whiteBase md:text-base hg:text-xl"},L(o).convertedTimeScale)))))),t.createElement("tbody",null,n.map(({hint:o,ariaLabel:r,icon:c,iconColorStyles:i,iconSize:l,renderCell:m})=>t.createElement(J,{key:c,label:o,side:Q.Top,sideOffset:Y.Zero,ariaLabel:`Info about ${r} by time interval`},t.createElement("tr",null,t.createElement("th",{scope:"row",className:"w-10 pr-2"},t.createElement(F,{svgName:c,sizeKey:a?u.smIcon20:l,className:i})),s&&Array.isArray(s)&&s.map(d=>t.createElement(t.Fragment,{key:L(d).timeScale},m(d,e)))))))))},ct=()=>{const{currentWeather:e}=K(),{isSmallScreens:s}=ee(),{days:a,dateNow:n}=st(),o=at(s,e);return t.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full flex-col justify-between gap-3 backface-hidden"},t.createElement("div",{className:"mb-3 text-center hg:mb-5"},t.createElement("span",{className:"font-weather text-3.5xl text-contrastWhite md:text-4.5xl hg:text-5xl"},a),t.createElement("p",{className:"text-2.5xl font-weather text-contrastWhite md:text-3.5xl"},n)),t.createElement("ul",{className:"grid grid-cols-2 grid-rows-2 gap-y-3.5"},Array.isArray(o)&&o.map(({icon:r,iconSize:c,value:i,ariaLabel:l,hint:m,justifyItemClass:d,subTextValue:p})=>t.createElement("li",{key:l},t.createElement(J,{label:m,side:Q.Top,align:d==="justify-end"?de.End:de.Start,sideOffset:Y.Small,ariaLabel:`Info about ${l} for current time`},t.createElement("div",{className:`flex items-center gap-3 text-base text-contrastWhite md:text-medium hg:text-2xl ${d}`},t.createElement("div",{className:d==="justify-end"?"order-last":"order-1"},t.createElement(F,{svgName:r,sizeKey:c,className:"fill-whiteBase"})),t.createElement("p",{className:"flex items-baseline gap-x-1 even:order-1"},i,t.createElement("span",{className:"text-xs hg:text-small"},p))))))))},{WEATHER_ICON_URL:it}=xe,se="py-1.5 text-center text-small text-whiteBase md:py-4 md:text-base hg:text-medium",lt=(e,s)=>{const{mainTemperature:a}=L(e,s);return t.createElement("td",{className:se},a)},mt=e=>{const{iconWeather:s,iconAlt:a}=L(e);return t.createElement("td",{className:"h-35px"},t.createElement("img",{className:"cover",src:`${it}/${s}@2x.png`,alt:a}))},ut=e=>{const{humidityPercent:s}=L(e);return t.createElement("td",{className:se},s)},dt=e=>{const{pressureMmHg:s}=L(e);return t.createElement("td",{className:se},s)},ht=e=>{const{windSpeed:s}=L(e);return t.createElement("td",{className:se},s)},{WEATHER_ICON_URL:gt}=xe,pt=()=>{const{hasGeolocationPermission:e,isCelsius:s,flippingCard:a,toggleTemperatureScale:n,flipWeatherDetails:o}=Se(),{isWeatherLoading:r,currentWeather:c,weatherError:i}=K(),l=c&&Object.keys(c).length===0,m=i&&i,d=!r&&l||!!m,p=r&&e,x=!r&&!l&&e,{iconWeather:f,iconAlt:y}=ue(c),g=`${(()=>{switch(!0){case(!r&&l&&!m):return"flex flex-col items-center justify-between px-6 py-10 text-center md:px-10";case!!m:return"px-6 py-10 text-center md:px-10";default:return"px-5 py-8 md:px-8 md:pt-10 hg:pt-8"}})()} h-[515px] md:h-700px flex flex-col justify-between w-full bg-accentBase hg:w-442px`;return t.createElement("div",{className:g},d&&t.createElement(Ke,{showError:m}),p&&t.createElement(ie,{variant:"element"}),x&&t.createElement(t.Fragment,null,t.createElement(ot,{toggleTemperatureScale:n,currentWeather:c,isCelsius:s}),f&&t.createElement("img",{className:"m-auto h-32 w-32 md:h-165px md:w-165px hg:h-180px hg:w-180px",src:`${gt}/${f}@2x.png`,alt:y}),t.createElement("div",{className:"h-56 w-full cursor-pointer perspective-10 md:h-[314px]",onClick:o},t.createElement("div",{className:`grid h-full w-full grid-cols-1 grid-rows-1 transition-transform transform-style-3d ${a}`},t.createElement(ct,null),t.createElement(rt,{isCelsius:s})))))},ft=({myButtonRef:e,handleOpenConfirm:s})=>t.createElement(J,{label:"Delete news from archive",side:Q.Bottom,sideOffset:Y.Large,ariaLabel:"Button for deleting news from archive"},t.createElement("div",null,t.createElement(re,{ref:e,onHandleClick:s,variant:ce.Small,hasIcon:!0,svgName:h.Close,svgSize:u.mdIcon24,classNameIcon:"stroke-whiteBase",ariaLabel:"Delete news from archive button",classNameButton:"absolute z-40 top-3 right-3 bg-accentBase/[.8] py-1.5"}))),xt=({liveNews:e})=>{const{isWideScreens:s}=ee(),{author:a,materialType:n,title:o,description:r,publishDate:c}=e,i="mb-2 line-clamp-1 text-end text-small leading-tight text-darkBase dark:text-whiteBase lg:text-base hg:text-medium",l="mb-4 line-clamp-3 h-100px text-3xl font-bold leading-tight tracking-mediumTight dark:text-whiteBase md:h-132px md:text-4xl md:tracking-tighter hg:h-[120px] hg:text-3.5xl",m="mb-4 line-clamp-3 h-57px text-base leading-tight text-darkBase dark:text-whiteBase md:h-66px md:text-medium hg:h-[72px] hg:text-xl",d="flex translate-x-full items-center gap-2 rounded-2xl bg-accentAlt pr-2 transition-all group-hover:translate-x-0 group-hover:bg-accentAlt dark:bg-transparent";return e&&t.createElement("div",{className:"mt-4 px-4"},t.createElement("p",{className:i},a?`By ${a}`:`${n}`),t.createElement("h2",{className:l},o),t.createElement("p",{className:m},r),t.createElement("div",{className:"flex justify-between"},t.createElement("p",{className:"text-base text-greyAlt md:text-medium hg:text-xl"},c),t.createElement("div",{className:d},t.createElement(F,{svgName:h.TriangleDouble,sizeKey:s?u.smIcon20:u.xsIcon16,className:"fill-whiteBase"}),t.createElement("p",{className:"text-base text-whiteBase transition-colors md:text-medium hg:py-px hg:text-xl"},"Click for read more..."))))},yt=(e,s)=>{switch(!0){case(!e&&s):return"Remove from favorite";case(!e&&!s):return"Add to favorite";case(e&&s):return"Favourites";case(e&&!s):return"Not in favourites";default:return""}},wt=(e,s,a)=>{switch(!0){case(!a&&e&&s):return"group-hover:fill-whiteBase group-hover:stroke-whiteBase group-focus:stroke-whiteBase";case(!a&&e&&!s):return"fill-accentBase stroke-accentBase";case(!a&&!e&&s):return"group-hover:fill-accentBase group-hover:stroke-whiteBase group-focus:stroke-whiteBase";case(a&&!e):return"fill-none stroke-accentBase";case(a&&e):return"fill-accentBase stroke-accentBase";default:return"fill-none stroke-accentBase"}},vt=({liveNews:e,isFavourite:s,setIsFavourite:a,setHasRead:n,getNewsState:o})=>{const[r,c]=E.useState(!1),{savedNews:i,requestStatus:l,updateSavedNews:m,addVotedNews:d,removeNews:p,removeFavouriteNews:x}=j(),{showToast:f}=ye(),{setIsScrollDisabled:y}=De(),{isArchiveActive:w,isFavoriteActive:g}=H();E.useEffect(()=>{(async()=>{r&&(await d(i),c(!1),g&&(e!=null&&e.newsUrl)&&x(e.newsUrl))})()},[r,d,g]);const C=e&&(e==null?void 0:e.newsUrl)!==void 0&&!w,{savedFavourite:v,savedRead:B,savedAdditionDate:N}=o(),I=S=>{if(S.stopPropagation(),S.preventDefault(),C){a(!s),c(!0);const P=We({liveNews:e,savedFavourite:v,savedRead:B,savedAdditionDate:N});P&&m(P)}},T=E.useCallback(()=>{if(C&&!B){n(!0),c(!0);const S=Re({liveNews:e,savedFavourite:v,savedRead:B,savedAdditionDate:N});S&&m(S)}},[C,i,m]);return{handleChangeFavourites:I,handleReadNews:T,handleDeleteNews:async(S,P)=>{S.stopPropagation(),S.preventDefault();try{await p(P),l&&f(l)}catch(k){throw console.error("Error during removeNews: ",k),k}finally{y(!1)}}}},be=({liveNews:e})=>{const{savedNews:s,allArchive:a}=j(),{isArchiveActive:n}=H(),{savedFavourite:o,savedRead:r}=y(),[c,i]=E.useState(o??!1),[l,m]=E.useState(r??!1),{isAuthenticated:d}=le();E.useEffect(()=>{d&&y()&&(i(o??!1),m(r??!1))},[y,d,e]);const{handleChangeFavourites:p,handleReadNews:x,handleDeleteNews:f}=vt({liveNews:e,isFavourite:c,setIsFavourite:i,setHasRead:m,getNewsState:y});function y(){const w=n?a:s,g=w==null?void 0:w.find(C=>C.newsUrl===(e==null?void 0:e.newsUrl));return{savedFavourite:g==null?void 0:g.isFavourite,savedRead:g==null?void 0:g.hasRead,savedAdditionDate:g==null?void 0:g.additionDate}}return{isFavourite:c,hasRead:l,handleChangeFavourites:p,handleReadNews:x,handleDeleteNews:f}},St=({liveNews:e,isFavourite:s,id:a})=>{const[n,o]=E.useState(!1),{handleChangeFavourites:r}=be({liveNews:e}),{isArchiveActive:c}=H(),i=yt(c,s),l=wt(s,n,c),m=`absolute bottom-3 right-2 z-20 flex items-center gap-x-1 rounded-3xl bg-contrastWhite px-3 py-1.5 text-small font-medium text-darkBase transition-colors duration-500 lg:text-medium ${c?"":"group hocus:bg-accentBase hocus:text-whiteBase"}`;return t.createElement("button",{id:a,type:Le.Submit,className:m,onClick:r,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},i,t.createElement(F,{svgName:h.VotedFavourite,sizeKey:u.xsIcon16,className:l}))},Et=({liveNews:e={}})=>{const s=t.createRef(),{isAuthenticated:a}=le(),{isOpenModal:n,modalType:o}=pe(),{toggleModal:r,popUpRef:c,isOpenModalForItem:i}=Fe(),{isHomeActive:l,isArchiveActive:m,isFavoriteActive:d}=H(),{isFavourite:p,hasRead:x,handleReadNews:f,handleDeleteNews:y}=be({liveNews:e}),{_id:w,newsUrl:g,category:C,materialType:v,edition:B,imgLink:N,imgAlt:I,title:T}=e,O=async(k,X)=>{X&&(r(),await y(k,X))},S=a&&x&&(l||m||d),P=n&&i&&a&&o===he.DeleteNews&&w;return e&&t.createElement(t.Fragment,null,g&&t.createElement("a",{rel:"noopener noreferrer nofollow",className:"group block transition-all",href:g,target:"_blank",onClick:a?f:void 0,"aria-label":"Click to read current news"},t.createElement("div",{className:`${S?"absolute z-20 h-full w-full bg-whiteBase/[.4]":"hidden"}`}),m?t.createElement(ft,{myButtonRef:s,handleOpenConfirm:k=>r(k,!0,he.DeleteNews)}):null,t.createElement("p",{className:"absolute left-0 top-10 z-20 rounded-r bg-accentBase/[.7] px-2 py-1 text-small font-medium text-contrastWhite hg:text-medium"},C," / ",v),S?t.createElement("p",{className:"absolute right-14 top-3.5 z-10 flex items-center gap-1 text-base font-bold text-readBase md:top-5"},"Already read",t.createElement(F,{svgName:h.Check,sizeKey:u.smIcon18,className:"fill-readBase"})):null,t.createElement("div",{className:"relative flex h-395px items-center justify-center overflow-hidden rounded-[10px]"},t.createElement("p",{className:"absolute bottom-3 left-3 z-10 text-whiteBase opacity-0 drop-shadow-lg transition-opacity group-hover:opacity-100"},B),N?t.createElement("img",{loading:"lazy",className:"absolute h-full max-w-none rounded-xl object-cover",src:N,alt:I||"plug image"}):t.createElement(ve,{variant:te.Card}),a&&t.createElement(St,{liveNews:e,isFavourite:p,id:`Add ${T??""} to favourites or remove from them`})),t.createElement(xt,{liveNews:e})),P&&t.createElement(Me,{closeModal:r,modalRef:c},t.createElement(Ve,{handleClose:k=>r(k),handleDelete:k=>O(k,w),title:_.Delete})))},bt=0,Ct=1,Ce="overflow-hidden rounded-[10px] shadow-card transition-colors dark:shadow-darkCard",Nt=e=>`${e?"mb-0":"mb-10 md:mb-12 lg:mb-[60px]"} max-md:space-y-7 md:grid md:grid-cols-2 md:gap-[30px] lg:grid-cols-3 lg:gap-x-8 lg:gap-y-10 hg:gap-10`,Tt=e=>{let s="";switch(e){case bt:s="md:col-start-1 md:row-start-1 lg:col-start-1";break;case Ct:s="lg:col-start-2 lg:row-start-1";break}return`${Ce} ${s} relative h-655px w-72 md:h-700px md:w-353px lg:w-395px hg:w-442px`},At=({currentItems:e,currentPage:s})=>{const{isWeatherLoading:a}=K(),{isFavoriteActive:n}=H(),o=Nt(n);return t.createElement("ul",{className:o},s&&s===1&&t.createElement("li",{className:`${Ce} max-md:h-515px md:col-start-2 lg:col-start-3`},a?t.createElement(ie,{variant:"element"}):t.createElement(pt,null)),Array.isArray(e)&&e.map((r,c)=>t.createElement("li",{key:r.newsUrl,className:Tt(c)},t.createElement(Et,{liveNews:r}))))},Bt=()=>{const{headline:e}=q(),{isHomeActive:s,isFavoriteActive:a,isReadActive:n,isArchiveActive:o}=H();return{getHeadline:()=>{switch(!0){case(e&&s):return e;case a:return"Favourite news";case n:return"Read news";case o:return"Archive news";default:return""}}}},ae=()=>{const{hasResults:e}=me(),{isLoadingAPIData:s}=q(),{isLoadingDBData:a}=j(),{isHomeActive:n,isFavoriteActive:o,isReadActive:r,isArchiveActive:c}=H(),i=a||e===ne.Loading,l=s||i;return{commonDBLoader:i,isHomeLoader:l,shouldShowLoader:n&&l||(o||r)&&i||c&&a}},Ne=()=>{const{hasResults:e}=me(),{errorAPI:s,hasRequestResults:a}=q(),{allArchive:n,archiveHistoryLog:o,isLoadingDBData:r}=j(),{isHomeActive:c,isFavoriteActive:i,isReadActive:l,isArchiveActive:m}=H(),{rebuiltNews:d}=we(),{isHomeLoader:p}=ae(),x=s==null?void 0:s.toString().includes(fe.TooManyRequest.toString()),f=(d==null?void 0:d.length)===0||a===ne.Empty||e===ne.Empty,y=f||x,w=n.length===0&&o.length===0;return{isHomePlug:y,commonPlug:f,shouldShowPlug:c&&y&&!p||(i||l)&&f&&!r||m&&w&&!r}},It=()=>{const{allArchive:e,isLoadingDBData:s}=j(),{isArchiveActive:a,isFavoriteActive:n,isHomeActive:o,isReadActive:r}=H(),{isHomeLoader:c,commonDBLoader:i}=ae(),{isHomePlug:l,commonPlug:m}=Ne(),d=o&&!c&&!l,p=(n||r)&&!i&&!m,x=a&&!s&&(e==null?void 0:e.length)>0;return{shouldShowContent:d||p||x}},kt=()=>{const{filteredNews:e}=me(),{errorAPI:s,newsByKeyword:a,newsByCategory:n,newsByDate:o}=q(),{authError:r,statusMessage:c}=le(),{allFavourites:i,allReads:l,dbSuccessMessage:m}=j(),{setOpenToast:d}=ye(),{isArchiveActive:p,isFavoriteActive:x,isHomeActive:f,isReadActive:y}=H(),{rebuiltNews:w}=we(),{isHomeLoader:g,commonDBLoader:C}=ae();E.useEffect(()=>{(x||y)&&(w==null?void 0:w.length)>0&&d(!0)},[]);const v=a&&a.length>0||n&&n.length>0||o&&o.length>0,N=[W.RecoveryPasswordSent,W.PasswordChange,W.SignIn,W.SignUp,W.RememberMe,W.SignOut].includes(c),I=typeof r=="string"||typeof s=="number",T=!g&&v||(e==null?void 0:e.length)>0,O=x&&!C&&(i==null?void 0:i.length)>0,S=y&&!C&&(l==null?void 0:l.length)>0,P=p&&(m===W.DeleteNews||m===W.ClearLog)&&!C,X=f&&(I||N||T)||O||S||P;let D,R;switch(!0){case(f&&N):D=M.Success,R=z.Background;break;case(f&&I):D=M.Error,R=z.Foreground;break;case(f&&T):D=M.Info,R=z.Background;break;case O:D=M.Info,R=z.Background;break;case S:D=M.Info,R=z.Background;break;case P:D=M.Success,R=z.Foreground;break;default:D=M.Info,R=z.Background;break}return{shouldShowToast:X,statusToast:D,toastType:R}},Dt=({children:e})=>{const{shouldShowLoader:s}=ae(),{shouldShowPlug:a}=Ne(),{shouldShowContent:n}=It(),{shouldShowToast:o,statusToast:r,toastType:c}=kt(),{getHeadline:i}=Bt();return t.createElement(t.Fragment,null,s&&t.createElement(ie,{variant:"generalSection"}),o&&t.createElement(ze,{variant:c,status:r}),a&&t.createElement(ve,{variant:te.Page}),n&&t.createElement("h1",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},i()),n&&e)};export{Ve as D,At as N,Dt as P};
