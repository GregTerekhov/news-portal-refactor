import{q as F,s as ae,r as x,t as oe,v as ne,u as H,f as v,w as re,R as s,S as B,P as V,V as N,b as R,H as $,L as q,l as Y,m as ce,d as I,n as X,x as le,y as ie,z as me,e as M,B as de,D as ue,o as he,M as ge,E as pe,a as K,g as J}from"./index-d30e8942.js";import{p as fe,u as xe}from"./images-cf488c82.js";import{T as ye}from"./Toast-4b4f8b33.js";const be=e=>e.weather.isLoading,Ee=e=>e.weather.data,we=e=>e.weather.weatherByHour,Se=e=>e.weather.hasError,P=()=>{const e=F(be),t=F(Ee),r=F(we),c=F(Se),n=ae(),o=x.useCallback(l=>n(oe(l)),[n]),a=x.useCallback(l=>n(ne(l)),[n]);return{isWeatherLoading:e,currentWeather:t,hourlyWeather:r,weatherError:c,getCurrentWeather:o,getHourlyWeather:a}},Q=({variant:e})=>{const{errorAPI:t}=H(),{isHomeActive:r}=v(),c=t==null?void 0:t.toString().includes("429"),n=window.devicePixelRatio||1,o=re(fe,n,window.innerWidth),a=xe((o==null?void 0:o.src)||""),l="text-center text-2xl font-bold tracking-smallTight text-darkBase transition-colors dark:text-whiteBase md:w-548px md:text-5xl md:tracking-tighter",i=()=>c&&r?"It seems you have been send too much requests then its needed":"We haven’t found news from this category";return s.createElement(s.Fragment,null,e==="page"?s.createElement("div",{className:"flex flex-col items-center justify-center space-y-10"},s.createElement("p",{className:`${l}`},i()),s.createElement("img",{src:a,alt:`${c&&r?"Too much requests":"No found news"}`,width:o.width,height:o.height})):s.createElement("img",{src:a,alt:"No found an image for news",width:o.width,height:o.height}))},Z=()=>{const[e,t]=x.useState(!0),[r,c]=x.useState(!1),[n,o]=x.useState(null),[a,l]=x.useState(!1),{getCurrentWeather:i,getHourlyWeather:m}=P(),u="geolocation"in navigator,h=d=>{switch(l(!1),o("denied"),d.code){case d.PERMISSION_DENIED:console.error("User denied access to geolocation");break;case d.POSITION_UNAVAILABLE:console.error("Geolocation information is unavailable");break;case d.TIMEOUT:console.error("Geolocation access request timed out");break;default:console.error("An unknown error occurred while getting geolocation");break}};return x.useEffect(()=>{localStorage.getItem("geolocationPermission")&&(l(!0),o("granted"))},[n]),{isCelsius:e,hasGeolocationPermission:a,flippingCard:r?"rotate-y-180":"rotate-y-0",requestGeolocationPermission:()=>{u&&navigator.permissions.query({name:"geolocation"}).then(d=>{d.state==="granted"?(o("granted"),l(!0),localStorage.setItem("geolocationPermission","granted"),navigator.geolocation.getCurrentPosition(b=>{const S={lat:b.coords.latitude,lon:b.coords.longitude};i(S),m(S)})):d.state==="prompt"?(o("prompt"),navigator.geolocation.getCurrentPosition(b=>{l(!0),localStorage.setItem("geolocationPermission","granted");const S={lat:b.coords.latitude,lon:b.coords.longitude};i(S),m(S)},h)):(l(!1),o("denied"),localStorage.removeItem("geolocationPermission"))})},toggleTemperatureScale:()=>{t(!e)},flipWeatherDetails:()=>{c(!r)},showButtonText:()=>{let d="Give permission for your geolocation";if(n==="prompt")d="Give permission for your geolocation";else if(a)d="Get the weather for your region";else if(n==="denied")d="Permission denied";else return"Give permission for your geolocation";return d},statePermission:n}},ve=({showError:e})=>{const{requestGeolocationPermission:t,showButtonText:r}=Z(),c=e?"Server error. Please try again later when you reload the page":"What a pity, this could be your weather";return s.createElement(s.Fragment,null,s.createElement("h2",{className:"text-medium text-whiteBase md:text-2xl lg:text-4xl"},c),s.createElement("div",{className:`my-auto ${e?"flex justify-center":""}`},s.createElement(B,{svgName:"moon",sizeKey:"ultraIcon156",className:"fill-transparent stroke-greyBase"})),!e&&s.createElement(V,{id:"Geolocation permission button",variant:N.Primary,onHandleClick:t,classNameButton:"border border-solid border-whiteBase"},r()))},Ae={"-43200":"-12:00","-39600":"-11:00","-36000":"-10:00","-34200":"-09:30","-32400":"-09:00","-28800":"-08:00","-25200":"-07:00","-21600":"-06:00","-18000":"-05:00","-16200":"-04:30","-14400":"-04:00","-12600":"-03:30","-10800":"-03:00","-7200":"-02:00","-3600":"-01:00",0:"00:00",3600:"+01:00",7200:"+02:00",10800:"+03:00",12600:"+03:30",14400:"+04:00",16200:"+04:30",18e3:"+05:00",19800:"+05:30",20700:"+05:45",21600:"+06:00",23400:"+06:30",25200:"+07:00",28800:"+08:00",32400:"+09:00",34200:"+09:30",36e3:"+10:00",37800:"+10:30",39600:"+11:00",41400:"+11:30",43200:"+12:00",45900:"+12:45",46800:"+13:00",50400:"+14:00"};function O(e){const t=new Date(e*1e3),r=t.getHours(),c=t.getMinutes(),n=String(r).padStart(2,"0"),o=String(c).padStart(2,"0");return`${n}:${o}`}function Ce(e){const t=String(e);return Ae[t]}function W(e){const t=e*.75006;return Math.floor(t)}function Be(e){return e/1e3}function ke(e){let t;const r=[{min:0,max:.2,scale:"0"},{min:.3,max:1.5,scale:"1"},{min:1.6,max:3.3,scale:"2"},{min:3.4,max:5.4,scale:"3"},{min:5.5,max:7.9,scale:"4"},{min:8,max:10.7,scale:"5"},{min:10.8,max:13.8,scale:"6"},{min:13.9,max:17.1,scale:"7"},{min:17.2,max:20.7,scale:"8"},{min:20.8,max:24.4,scale:"9"},{min:24.5,max:28.4,scale:"10"},{min:28.5,max:32.6,scale:"11"},{min:32.7,max:Number.MAX_SAFE_INTEGER,scale:"12"}];return e&&(t=r.find(c=>e>=c.min&&e<=c.max)),t?t==null?void 0:t.scale:""}function Ie(){const e=new Date,t=e.getHours(),r=e.getMinutes(),c=a=>a<10?`0${a}`:a.toString(),n=c(t),o=c(r);return`${n}:${o}`}function Te(){const e={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday"},t=new Date,r=e[t.toDateString().slice(0,3)],c=Ie(),n=t.toDateString().slice(4).slice(0,4),o=t.toDateString().slice(8).slice(0,2),a=t.toDateString().slice(11),l=`${c} | ${o} ${n} ${a}`;return{days:r,dateNow:l}}const D=(e,t)=>t&&e?Math.round(e)+"°":Math.round(e*9/5+32)+"°",He=(e,t)=>{var c,n,o,a,l,i,m;return[{icon:"earth",iconSize:e?"xsIcon16":"mdIcon24",value:`${Ce(t==null?void 0:t.timezone)}`,label:"Greenwich mean time",hint:"GMT time",justifyItemClass:"justify-start",subTextValue:"UTC"},{icon:"humidity",iconSize:e?"smIcon18":"lgIcon30",value:`${(c=t==null?void 0:t.main)==null?void 0:c.humidity}`,label:"Humidity in percent",hint:"Humidity (%)",justifyItemClass:"justify-end",subTextValue:"%"},{icon:"pressure",iconSize:e?"smIcon18":"lgIcon30",value:`${W((n=t==null?void 0:t.main)==null?void 0:n.pressure)}`,label:"Atmospheric pressure in mm Hg",hint:"Atmospheric pressure (mm.Hg)",justifyItemClass:"justify-start",subTextValue:"mm.Hg"},{icon:"pressure",iconSize:e?"smIcon18":"lgIcon30",value:`${(o=t==null?void 0:t.main)==null?void 0:o.pressure}`,label:"Atmospheric pressure in hPa",hint:"Atmospheric pressure (HPa)",justifyItemClass:"justify-end",subTextValue:"hPa"},{icon:"sunrise",iconSize:e?"smIcon20":"lgIcon30",value:`${O((a=t==null?void 0:t.sys)==null?void 0:a.sunrise)}`,label:"Sunrise time",hint:"Sunrise time",justifyItemClass:"justify-start",subTextValue:"AM"},{icon:"sunset",iconSize:e?"smIcon20":"lgIcon30",value:`${O((l=t==null?void 0:t.sys)==null?void 0:l.sunset)}`,label:"Sunset time",hint:"Sunset time",justifyItemClass:"justify-end",subTextValue:"PM"},{icon:"eye-opened",iconSize:e?"smIcon20":"lgIcon30",value:`${Be(t==null?void 0:t.visibility)}`,label:"Road visibility",hint:"Road visibility",justifyItemClass:"justify-start",subTextValue:"km"},{icon:"weather-wind",iconSize:e?"smIcon20":"lgIcon30",value:`${(i=t==null?void 0:t.wind)==null?void 0:i.speed}`,label:"Wind speed in metre per seconds",hint:`Wind speed (m/s). (${ke((m=t==null?void 0:t.wind)==null?void 0:m.speed)} on the Beaufort scale)`,justifyItemClass:"justify-end",subTextValue:"m/s"}]},De=e=>[{label:`Temperature in °${e?"C":"F"}`,icon:"thermometer",iconSize:"mdIcon24",iconColorStyles:"fill-whiteBase",renderCell:$e},{label:"Precipitation and weather",icon:"sun",iconSize:"mdIcon24",iconColorStyles:"stroke-whiteBase fill-transparent",renderCell:Re},{label:"Humidity (%)",icon:"humidity",iconSize:"mdIcon28",iconColorStyles:"fill-whiteBase",renderCell:Me},{label:"Pressure (mm.Hg)",icon:"pressure",iconSize:"mdIcon24",iconColorStyles:"fill-whiteBase",renderCell:ze},{label:"Wind speed (m/s)",icon:"weather-wind",iconSize:"mdIcon24",iconColorStyles:"fill-whiteBase",renderCell:je}],Pe=({toggleTemperatureScale:e,currentWeather:t,isCelsius:r})=>{var i,m,u,h;const{isMobile:c}=R(),n=((i=t.main)==null?void 0:i.temp)??0,o=((m=t.main)==null?void 0:m.feels_like)??0,a=((h=(u=t.weather)==null?void 0:u[0])==null?void 0:h.main)??"",l=t.name??"";return s.createElement("div",{className:"mx-auto flex cursor-pointer items-center justify-evenly gap-5",onClick:e},s.createElement("div",{className:'relative w-83px text-center after:absolute after:-right-2 after:top-0 after:h-full after:w-px after:bg-white after:content-[""] md:w-96px'},s.createElement("p",{className:"font-weather text-monstrous text-contrastWhite  md:text-[64px]"},D(n,r))),s.createElement("div",{className:"space-y-2.5"},s.createElement("div",null,s.createElement("p",{className:"font-weather text-3xl text-contrastWhite md:text-4.5xl"},a),s.createElement("p",{className:"font-weather text-base text-contrastWhite md:text-2xl"},"Feels like"," ",r?D(o,!0)+"C":D(o,!1)+"F")),s.createElement("div",{className:"flex items-center gap-1 rounded-lg bg-weatherForeground px-2 py-[9px] text-contrastWhite md:gap-2 md:pb-[9px] md:pl-[7px] md:pr-[17px] md:pt-[10px]"},s.createElement(B,{svgName:"location",sizeKey:c?"smIcon20":"mdIcon27",className:"fill-whiteBase"}),s.createElement("p",{className:"font-weather text-base text-contrastWhite md:text-medium"},l))))},Le=({isCelsius:e})=>{const{hourlyWeather:t}=P(),{isMobile:r}=R(),c=De(e);return s.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full bg-accentBase duration-500 ease-in backface-hidden rotate-y-180"},s.createElement("table",{className:"h-full min-w-full border-separate border border-transparent bg-accentBase"},s.createElement("thead",{className:"h-10"},s.createElement($,{label:"Time",side:"top",sideOffset:0,ariaLabel:"Time interval (3 hours)"},s.createElement("tr",null,s.createElement("th",{className:"w-10 pr-2"},s.createElement(B,{svgName:"time",sizeKey:r?"smIcon20":"mdIcon24",className:"fill-whiteBase"})),t&&Array.isArray(t)&&(t==null?void 0:t.map(n=>{const o=O(n==null?void 0:n.dt);return s.createElement("th",{key:n==null?void 0:n.dt,scope:"col",className:"-rotate-90 whitespace-nowrap text-center text-small text-whiteBase md:text-base hg:text-xl"},o)}))))),s.createElement("tbody",null,c.map(({label:n,icon:o,iconColorStyles:a,iconSize:l,renderCell:i})=>s.createElement($,{key:o,label:n,side:"top",sideOffset:0,ariaLabel:`Info about ${n} by time interval`},s.createElement("tr",null,s.createElement("th",{scope:"row",className:"w-10 pr-2"},s.createElement(B,{svgName:o,sizeKey:r?"smIcon20":l,className:a})),t&&Array.isArray(t)&&t.map(m=>s.createElement(s.Fragment,{key:m==null?void 0:m.dt},i(m,e)))))))))},Fe=()=>{const{currentWeather:e}=P(),{isMobile:t}=R(),{days:r,dateNow:c}=Te(),n=He(t,e);return s.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full flex-col justify-between gap-3 backface-hidden"},s.createElement("div",{className:"mb-3 text-center hg:mb-5"},s.createElement("span",{className:"font-weather text-3.5xl text-contrastWhite md:text-4.5xl hg:text-5xl"},r),s.createElement("p",{className:"text-2.5xl font-weather text-contrastWhite md:text-3.5xl"},c)),s.createElement("ul",{className:"grid grid-cols-2 grid-rows-2 gap-y-3.5"},Array.isArray(n)&&n.map(({icon:o,iconSize:a,value:l,label:i,hint:m,justifyItemClass:u,subTextValue:h})=>s.createElement("li",{key:i},s.createElement($,{label:m,side:"top",align:u==="justify-end"?"end":"start",sideOffset:4,ariaLabel:`Info about ${i} for current time`},s.createElement("div",{className:`flex items-center gap-3 text-base text-contrastWhite md:text-medium hg:text-2xl ${u}`},s.createElement("div",{className:`${u==="justify-end"?"order-last":"order-1"}`},s.createElement(B,{svgName:o,sizeKey:a,className:"fill-whiteBase"})),s.createElement("p",{className:"flex items-baseline gap-x-1 even:order-1"},l,s.createElement("span",{className:"text-xs hg:text-small"},h))))))))},z="py-1.5 text-center text-small text-whiteBase md:py-4 md:text-base hg:text-medium",$e=(e,t)=>{var r,c;return s.createElement("td",{className:`${z}`},t?D((r=e==null?void 0:e.main)==null?void 0:r.temp,!0)+"C":D((c=e==null?void 0:e.main)==null?void 0:c.temp,!1)+"F")},Re=e=>{var t,r,c,n;return s.createElement("td",{className:"h-35px"},s.createElement("img",{className:"cover",src:`https://openweathermap.org/img/wn/${(r=(t=e==null?void 0:e.weather)==null?void 0:t[0])==null?void 0:r.icon}@2x.png`,alt:(n=(c=e==null?void 0:e.weather)==null?void 0:c[0])==null?void 0:n.description}))},Me=e=>{var t;return s.createElement("td",{className:`${z}`},(t=e==null?void 0:e.main)==null?void 0:t.humidity)},ze=e=>{var t;return s.createElement("td",{className:`${z}`},W((t=e==null?void 0:e.main)==null?void 0:t.pressure))},je=e=>{var t;return s.createElement("td",{className:`${z}`},(t=e==null?void 0:e.wind)==null?void 0:t.speed)},Ge=()=>{var y,g;const{hasGeolocationPermission:e,isCelsius:t,flippingCard:r,toggleTemperatureScale:c,flipWeatherDetails:n}=Z(),{isWeatherLoading:o,currentWeather:a,weatherError:l}=P(),i=a&&Object.keys(a).length===0,m=l&&l,u=!o&&i||m,h=o&&e,p=!o&&!i&&e,f=`${(()=>{switch(!0){case(!o&&i&&!m):return"flex flex-col items-center justify-between px-6 py-10 text-center md:px-10";case!!m:return"px-6 py-10 text-center md:px-10";default:return"px-5 py-8 md:px-8 md:pt-10 hg:pt-8"}})()} h-[515px] md:h-700px flex flex-col justify-between w-full bg-accentBase hg:w-442px`;return s.createElement("div",{className:`${f}`},u&&s.createElement(ve,{showError:m}),h&&s.createElement(q,{variant:"element"}),p&&s.createElement(s.Fragment,null,s.createElement(Pe,{toggleTemperatureScale:c,currentWeather:a,isCelsius:t}),(a==null?void 0:a.weather)&&(a==null?void 0:a.weather[0].icon)&&s.createElement("img",{className:"m-auto h-32 w-32 md:h-165px md:w-165px hg:h-180px hg:w-180px",src:`https://openweathermap.org/img/wn/${a==null?void 0:a.weather[0].icon}@2x.png`,alt:(g=(y=a==null?void 0:a.weather)==null?void 0:y[0])==null?void 0:g.description}),s.createElement("div",{className:"h-56 w-full cursor-pointer perspective-10 md:h-[314px]",onClick:n},s.createElement("div",{className:`grid h-full w-full grid-cols-1 grid-rows-1 transition-transform transform-style-3d ${r}`},s.createElement(Fe,null),s.createElement(Le,{isCelsius:t})))))},Ue=({myButtonRef:e,handleOpenConfirm:t})=>s.createElement($,{label:"Delete news from archive",side:"bottom",sideOffset:16,ariaLabel:"Button for deleting news from archive"},s.createElement("div",null,s.createElement(V,{ref:e,onHandleClick:t,variant:N.Small,hasIcon:!0,svgName:"close",svgSize:"mdIcon24",classNameIcon:"stroke-whiteBase",ariaLabel:"Delete news from archive button",classNameButton:"absolute z-40 top-3 right-3 bg-accentBase/[.8] py-1.5"}))),Oe=({handleDeleteNews:e,handleClose:t})=>{const{isOpenModal:r}=Y(),c=[{onClick:n=>t(n,!1),id:"Cancel deletion the news",label:"Cancel",icon:"reset"},{onClick:e,id:"Delete selected news",label:"Delete",icon:"trash"}];return s.createElement(ce,{enabled:r},s.createElement("div",null,s.createElement("h3",{className:"mb-4 text-2xl text-darkBase dark:text-whiteBase md:mb-6 md:text-4xl"},"Delete news"),s.createElement("p",{className:"mb-6 text-medium text-darkBase dark:text-whiteBase md:mb-10 md:text-xl"},"Are you sure you want to delete this news?"),s.createElement("ul",{className:"max-md:space-y-4 md:flex md:items-center md:justify-between md:gap-8"},c.map(({onClick:n,id:o,label:a,icon:l})=>s.createElement("li",{key:a,className:"w-full"},s.createElement(V,{variant:N.Primary,onHandleClick:n,hasIcon:!0,id:o,svgName:l,svgSize:"smIcon18",classNameIcon:"fill-whiteBase",classNameButton:"md:text-xl border border-whiteBase"},a))))))},Ve=({liveNews:e})=>{const{wideScreens:t}=R();return s.createElement("div",{className:"mt-4 px-4"},s.createElement("p",{className:"mb-2 line-clamp-1 text-end text-small leading-tight text-darkBase dark:text-whiteBase lg:text-base hg:text-medium"},e!=null&&e.author?`By ${e==null?void 0:e.author}`:`${e==null?void 0:e.materialType}`),s.createElement("h2",{className:"mb-4 line-clamp-3 h-100px text-3xl font-bold leading-tight tracking-mediumTight dark:text-whiteBase md:h-132px md:text-4xl md:tracking-tighter hg:h-[120px] hg:text-3.5xl"},e==null?void 0:e.title),s.createElement("p",{className:"mb-4 line-clamp-3 h-57px text-base leading-tight text-darkBase dark:text-whiteBase md:h-66px md:text-medium hg:h-[72px] hg:text-xl"},e==null?void 0:e.description),s.createElement("div",{className:"flex justify-between"},s.createElement("p",{className:"text-base text-greyAlt md:text-medium hg:text-xl"},e==null?void 0:e.publishDate),s.createElement("div",{className:"flex translate-x-full items-center gap-2 rounded-2xl bg-accentAlt pr-2 transition-all group-hover:translate-x-0 group-hover:bg-accentAlt dark:bg-transparent"},s.createElement(B,{svgName:"triangle-double",sizeKey:t?"smIcon20":"xsIcon16",className:"fill-whiteBase"}),s.createElement("p",{className:"text-base text-whiteBase transition-colors md:text-medium hg:py-px hg:text-xl"},"Click for read more..."))))},Ne=({liveNews:e,isFavourite:t,setIsFavourite:r,setHasRead:c})=>{const[n,o]=x.useState(!1),[a,l]=x.useState(!1),{savedNews:i,updateSavedNews:m,addVotedNews:u,removeNews:h}=I(),{showToast:p}=X(),{setIsScrollDisabled:w}=le(),{isArchiveActive:f}=v(),y=!!(i!=null&&i.length)&&e&&(e==null?void 0:e.newsUrl)!==void 0&&!f;x.useEffect(()=>{(async()=>{n&&i.length>0&&(await u(i),o(!1))})()},[n,u]);const g=i==null?void 0:i.find(E=>E.newsUrl===e.newsUrl),d=g==null?void 0:g.isFavourite,b=g==null?void 0:g.hasRead,S=g==null?void 0:g.additionDate,G=E=>{if(E.stopPropagation(),E.preventDefault(),y){r(!t),o(!0);const k=me(e,d,b,S);k&&m(k)}},L=x.useCallback(()=>{if(y){c(!0),o(!0);const E=ie(e,d,b,S);E&&m(E)}},[y,i,m]);return{isDeleted:a,handleChangeFavourites:G,handleReadNews:L,handleDeleteNews:async(E,k)=>{E.stopPropagation(),E.preventDefault();try{const T=await h(k);p(T.meta.requestStatus)}catch(T){console.error("Error during removeNews: ",T)}finally{l(!0),w(!1)}}}},ee=({liveNews:e})=>{const{savedNews:t,allArchive:r}=I(),{isAuthenticated:c}=M(),{isArchiveActive:n}=v(),o=n?r:t,a=o==null?void 0:o.find(y=>y.newsUrl===(e==null?void 0:e.newsUrl)),[l,i]=x.useState((a==null?void 0:a.isFavourite)??!1),[m,u]=x.useState((a==null?void 0:a.hasRead)??!1);x.useEffect(()=>{c&&a&&(i((a==null?void 0:a.isFavourite)??!1),u((a==null?void 0:a.hasRead)??!1))},[a,c,e]);const{isDeleted:h,handleChangeFavourites:p,handleReadNews:w,handleDeleteNews:f}=Ne({liveNews:e,isFavourite:l,setIsFavourite:i,setHasRead:u});return{isFavourite:l,hasRead:m,isDeleted:h,handleChangeFavourites:p,handleReadNews:w,handleDeleteNews:f}},qe=({liveNews:e,isFavourite:t,buttonData:r})=>{const[c,n]=x.useState(!1),{handleChangeFavourites:o}=ee({liveNews:e}),{isArchiveActive:a}=v(),l=`absolute bottom-3 right-2 z-20 flex items-center gap-x-1 rounded-3xl bg-contrastWhite px-3 py-1.5 text-small font-medium text-darkBase transition-colors duration-500 lg:text-medium ${a?"":"group hocus:bg-accentBase hocus:text-whiteBase"}`;return s.createElement("button",{id:r==null?void 0:r.id,type:"button",className:`${l}`,onClick:o,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1)},de(a,t),s.createElement(B,{svgName:"heart",sizeKey:"xsIcon16",className:ue(t,c,a)}))},Ke=({liveNews:e={}})=>{const t=s.createRef(),{isAuthenticated:r}=M(),{isOpenModal:c,modalType:n}=Y(),{toggleModal:o,popUpRef:a,isOpenModalForItem:l}=he(),{isHomeActive:i,isArchiveActive:m,isFavoriteActive:u}=v(),{isFavourite:h,hasRead:p,handleReadNews:w,handleDeleteNews:f}=ee({liveNews:e}),y=async(d,b)=>{b&&(o(),await f(d,b))},g=r&&p&&(i||m||u);return s.createElement(s.Fragment,null,(e==null?void 0:e.newsUrl)&&s.createElement("a",{rel:"noopener noreferrer nofollow",className:"group block transition-colors",href:e.newsUrl,target:"_blank",onClick:r?w:void 0},s.createElement("div",{className:`${g?"absolute z-20 h-full w-full bg-whiteBase/[.4]":"hidden"}`}),m?s.createElement(Ue,{myButtonRef:t,handleOpenConfirm:d=>o(d,!0,"deleteNews")}):null,s.createElement("p",{className:"absolute left-0 top-10 z-20 rounded-r bg-accentBase/[.7] px-2 py-1 text-small font-medium text-contrastWhite hg:text-medium"},e==null?void 0:e.category," / ",e==null?void 0:e.materialType),g?s.createElement("p",{className:"absolute right-14 top-3.5 z-10 flex items-center gap-1 text-base font-bold text-readBase md:top-5"},"Already read",s.createElement(B,{svgName:"check",sizeKey:"smIcon18",className:"fill-readBase"})):null,s.createElement("div",{className:"relative flex h-395px items-center justify-center overflow-hidden rounded-[10px]"},s.createElement("p",{className:"absolute bottom-3 left-3 z-10 text-whiteBase opacity-0 drop-shadow-lg transition-opacity group-hover:opacity-100"},e==null?void 0:e.edition),e&&(e!=null&&e.imgLink)?s.createElement("img",{loading:"lazy",className:"absolute h-full max-w-none rounded-xl object-cover",src:e==null?void 0:e.imgLink,alt:e!=null&&e.imgAlt?e==null?void 0:e.imgAlt:"plug image"}):s.createElement(Q,{variant:"card"}),r&&s.createElement(qe,{liveNews:e,isFavourite:h,buttonData:{id:`Add ${e==null?void 0:e.title} to favourites or remove from them`}})),s.createElement(Ve,{liveNews:e})),c&&l&&r&&n==="deleteNews"&&(e==null?void 0:e._id)&&s.createElement(ge,{closeModal:o,modalRef:a},s.createElement(Oe,{handleClose:d=>o(d),handleDeleteNews:d=>y(d,e._id)})))},tt=({currentItems:e,currentPage:t})=>{const{isWeatherLoading:r}=P(),{isFavoriteActive:c}=v(),n=`${c?"mb-0":"mb-10 md:mb-12 lg:mb-[60px]"} max-md:space-y-7 md:grid md:grid-cols-2 md:gap-[30px] lg:grid-cols-3 lg:gap-x-8 lg:gap-y-10 hg:gap-10`,o=a=>`relative h-655px w-72 overflow-hidden rounded-[10px] shadow-card transition-colors dark:shadow-darkCard md:h-700px md:w-353px lg:w-395px hg:w-442px ${a===0&&"md:col-start-1 md:row-start-1 lg:col-start-1"} ${a===1&&"lg:col-start-2 lg:row-start-1"}`;return s.createElement("ul",{className:`${n}`},t&&t===1&&s.createElement("li",{className:"overflow-hidden rounded-[10px] shadow-card transition-colors dark:shadow-darkCard max-md:h-515px md:col-start-2 lg:col-start-3"},r?s.createElement(q,{variant:"element"}):s.createElement(Ge,null)),e==null?void 0:e.map((a,l)=>s.createElement("li",{key:a.newsUrl,className:o(l)},s.createElement(Ke,{liveNews:a}))))},_e=()=>{const{errorDB:e}=I(),{authError:t}=M(),{errorAPI:r}=H(),c=pe();x.useEffect(()=>{(e&&n(e)||r&&n(r)||t&&n(t))&&c("/server-error")},[e,r,t]);function n(o){return o&&typeof o=="number"&&o>=500}},Ye=()=>{const{headline:e}=H(),{isHomeActive:t,isFavoriteActive:r,isReadActive:c,isArchiveActive:n}=v();return{getHeadline:()=>{switch(!0){case(e&&t):return e;case r:return"Favourite news";case c:return"Read news";case n:return"Archive news";default:return""}}}},j=()=>{const{hasResults:e}=K(),{isLoadingAPIData:t}=H(),{isLoadingDBData:r}=I(),{isHomeActive:c,isFavoriteActive:n,isReadActive:o,isArchiveActive:a}=v(),l=r||e==="loading",i=t||l;return{commonDBLoader:l,isHomeLoader:i,shouldShowLoader:c&&i||(n||o)&&l||a&&r}},te=()=>{const{hasResults:e}=K(),{errorAPI:t}=H(),{allArchive:r,archiveHistoryLog:c,isLoadingDBData:n}=I(),o=v(),{rebuiltNews:a}=J(o),{isHomeLoader:l,commonDBLoader:i}=j(),{isHomeActive:m,isFavoriteActive:u,isReadActive:h,isArchiveActive:p}=o,w=t==null?void 0:t.toString().includes("429"),f=(a==null?void 0:a.length)===0||e==="empty",y=f||w,g=r.length===0&&c.length===0;return{isHomePlug:y,commonPlug:f,shouldShowPlug:m&&y&&!l||(u||h)&&f&&!i||p&&g&&!n}},Xe=()=>{const{allArchive:e,isLoadingDBData:t}=I(),r=v(),{isHomeLoader:c,commonDBLoader:n}=j(),{isHomePlug:o,commonPlug:a}=te(),{isArchiveActive:l,isFavoriteActive:i,isHomeActive:m,isReadActive:u}=r,h=m&&!c&&!o,p=(i||u)&&!n&&!a,w=l&&!t&&(e==null?void 0:e.length)>0;return{shouldShowContent:h||p||w}},Je=()=>{const{filteredNews:e}=K(),{errorAPI:t,newsByKeyword:r,newsByCategory:c,newsByDate:n}=H(),{authError:o,statusMessage:a}=M(),{allFavourites:l,allReads:i,dbSuccessMessage:m}=I(),{setOpenToast:u}=X(),h=v(),{rebuiltNews:p}=J(h),{isHomeLoader:w,commonDBLoader:f}=j(),{isArchiveActive:y,isFavoriteActive:g,isHomeActive:d,isReadActive:b}=h;x.useEffect(()=>{(g||b)&&(p==null?void 0:p.length)>0&&u(!0)},[]);const S=r&&r.length>0||c&&c.length>0||n&&n.length>0,L=["Email sent successfully","Password has successfully changed","User sign-in success","Your saved password has been successfully retrieved","Sign-out success"].includes(a),U=o&&typeof o=="string"||t&&typeof t=="number",E=!w&&S||(e==null?void 0:e.length)>0,k=g&&!f&&(l==null?void 0:l.length)>0,T=b&&!f&&(i==null?void 0:i.length)>0,_=y&&(m==="Remove news success"||m==="Your deleted news feed has been successfully cleared")&&!f,se=d&&(U||L||E)||k||T||_;let A,C;switch(!0){case(d&&L):A="success",C="non-interactive";break;case(d&&U):A="error",C="interactive";break;case(d&&E):A="info",C="non-interactive";break;case k:A="info",C="non-interactive";break;case T:A="info",C="non-interactive";break;case _:A="success",C="interactive";break;default:A="info",C="non-interactive";break}return{shouldShowToast:se,statusToast:A,toastType:C}},st=({children:e})=>{const{shouldShowLoader:t}=j(),{shouldShowPlug:r}=te(),{shouldShowContent:c}=Xe(),{shouldShowToast:n,statusToast:o,toastType:a}=Je(),{getHeadline:l}=Ye();return _e(),s.createElement(s.Fragment,null,t&&s.createElement(q,{variant:"generalSection"}),n&&s.createElement(ye,{variant:a,status:o}),r&&s.createElement(Q,{variant:"page"}),c&&s.createElement("h1",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},l()),c&&e)};export{tt as N,st as P};
