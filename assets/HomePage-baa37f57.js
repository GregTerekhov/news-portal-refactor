import{u as L,R as n,P as C,V as N,S as I,a as P,b as D,r as B,c as V,d as _,e as z,f as $,g as j,h as K,L as Q,N as U}from"./index-48b798e6.js";import{P as Y,N as Z}from"./NewsList-9668a43b.js";import"./images-5ac6d0c7.js";const T="w-32",O=24,q=({pageNumbers:s,currentPage:e,setCurrentPage:i})=>{const{breakpointsForMarkup:c}=L()??{breakpointsForMarkup:null},m=(c==null?void 0:c.isTablet)||(c==null?void 0:c.isDesktop),d=s.length,E=window.innerHeight,h=m?6:3,t=[],g=1,l=d,r=e-1,u=e+1,a=o=>n.createElement("li",{key:o,className:`${o===e?"active":""}`,onClick:()=>{i(o),window.scrollTo({top:0+E,left:0})}},n.createElement(C,{"aria-label":o.toString(),classNameButton:`h-10 border-accentBase font-medium transition-colors duration-500 ${o===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:N.Small},o)),f=o=>n.createElement("li",{key:o,className:"ellipsis"},n.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"..."));if(d<=h)for(let o=g;o<=l;o+=1)t.push(a(o));else e===g?(t.push(a(e)),t.push(a(u)),t.push(f("next")),t.push(a(l))):e===l?(t.push(a(g)),t.push(f("prev")),t.push(a(r)),t.push(a(e))):e>g&&e<l&&(e===2&&(t.push(f("prev")),t.push(a(e)),t.push(a(u)),t.push(f("next")),t.push(a(l))),e-1>g&&e+1!==l&&(t.push(f("prev")),t.push(a(r)),t.push(a(e)),t.push(a(u)),t.push(f("next"))),e+1===l&&(t.push(f("prev")),t.push(a(r)),t.push(a(e)),t.push(a(l))));const v=()=>{e>1&&(i(e-1),window.scrollTo({top:0+E,left:0}))},p=()=>{e<s.length&&(i(e+1),window.scrollTo({top:0+E,left:0}))};return n.createElement("div",{className:"flex justify-center items-center gap-2"},n.createElement(C,{id:"Previous page button",variant:N.Other,onHandleClick:v,width:T,disabled:e-1===0},n.createElement(I,{svgName:"icon-arrow-left",size:O,className:"fill-whiteBase"}),m?n.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Prev"):null),n.createElement("ul",{id:"page-numbers",className:"flex gap-2"},t),n.createElement(C,{id:"Next page button",variant:N.Other,onHandleClick:p,width:T,disabled:e===l},m?n.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Next"):null,n.createElement(I,{svgName:"icon-arrow-left",size:O,className:"fill-whiteBase rotate-180"})))},G=(s,e,i)=>{const c=[e];let m=s-e;for(;m>0;)c.push(i),m-=i;return c},J=(s,e)=>{const i=s&&s.slice(0,-1).reduce((m,d)=>m+d,0);return e-i},X=(s,e,i)=>G(s,e,i),F=(s,e)=>{try{return J(s,e)}catch(i){return console.error(i.message)}},b=s=>{const{breakpointsForMarkup:e}=L()||{breakpointsForMarkup:null},{popularNews:i,newsByKeyword:c,newsByCategory:m,newsByDate:d}=P(),{filteredNews:E}=D(),[h,t]=B.useState(1),[g,l]=B.useState([]),r=s&&(s==null?void 0:s.length)||0,u=(e==null?void 0:e.isNothing)||(e==null?void 0:e.isMobile),a=S(),f=A(),v=X(r,a,f),p=v[h-1]||0,o=F(v,r);B.useEffect(()=>{if(s&&(s==null?void 0:s.length)>0){const y=h*p-1>=r;let x,w;h===1?(x=h*p,w=x-p):h>1&&y&&o?(x=r,w=r-o):(x=h*p-1,w=x-p);const R=s.slice(w,x);l(R)}},[i,c,m,d,E,h]);function S(){return e!=null&&e.isNothing||e!=null&&e.isMobile?4:e!=null&&e.isTablet?7:8}function A(){return u?5:e!=null&&e.isTablet?8:9}const W=Math.ceil(h!==1&&u?r/p+1:r/p),H=Array.from({length:W},(y,x)=>x+1);return{currentItems:g,pageNumbers:H,currentPage:h,setCurrentPage:t}},te=()=>{const{isLoadingAPIData:s,headline:e,fetchPopular:i}=P(),{isLoadingDBData:c,getSavedNews:m}=V(),{isAuthenticated:d}=_(),{openToast:E,setOpenToast:h}=z(),t=$(),g=j(t),{rebuildedNews:l}=K({activeLinks:g}),{hasResults:r}=D(),{currentItems:u,currentPage:a,pageNumbers:f,setCurrentPage:v}=b(l??[]);return B.useEffect(()=>{i("1"),d&&m()},[i,m,d]),n.createElement("div",null,s||c&&l&&(u==null?void 0:u.length)===0||r==="loading"?n.createElement(Q,{variant:"generalSection"}):n.createElement(n.Fragment,null,l&&l.length===0||r==="empty"?n.createElement(Y,{variant:"page"}):n.createElement(n.Fragment,null,e&&n.createElement("h2",{className:"dark:text-whiteBase text-giant font-bold mb-6"},e),n.createElement(Z,{currentItems:u,currentPage:a}),n.createElement(q,{pageNumbers:f,currentPage:a,setCurrentPage:v}))),d&&n.createElement(U,{variant:"non-interactive",openToast:E,setOpenToast:h,title:"Welcome",description:"Welcome to New York Times News Viewer"}))};export{te as default};
