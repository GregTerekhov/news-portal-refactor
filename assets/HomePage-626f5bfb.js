import{r as g,u as I,a as R,b as x,c as f,R as i,P as v,V as k,d as L,e as y,f as F,g as G}from"./index-187fad00.js";import{P as D,N as H}from"./PageTemplate-0c343391.js";import"./images-7c958bd7.js";import"./Toast-02f521cf.js";const M=(t,e,a)=>({handlePageNumberClick:r=>{t(r),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},handlePrevClick:()=>{e>=1&&(t(e-1),setTimeout(()=>{window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},100))},handleNextClick:()=>{e<=a.length&&(t(e+1),setTimeout(()=>{window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},100))}}),d={FIRST_MOBILE_PAGE_COUNT:4,FIRST_TABLET_PAGE_COUNT:7,FIRST_DESKTOP_PAGE_COUNT:8,OTHER_MOBILE_PAGE_COUNT:5,OTHER_TABLET_PAGE_COUNT:8,OTHER_DESKTOP_PAGE_COUNT:9},l=1,B={DESKTOP_BUTTONS_QUANTITY:3,MOBILE_BUTTONS_QUANTITY:5},K=(t,e,a)=>{const n=[e];let o=t-e;for(;o>0;)n.push(a),o-=a;return n},Q=(t,e)=>{const a=t&&t.slice(0,-1).reduce((n,o)=>n+o,0);return e-a},Y=(t,e,a)=>K(t,e,a);function W(t,e){switch(!0){case t:return d.FIRST_MOBILE_PAGE_COUNT;case e:return d.FIRST_TABLET_PAGE_COUNT;default:return d.FIRST_DESKTOP_PAGE_COUNT}}function $(t,e){switch(!0){case t:return d.OTHER_MOBILE_PAGE_COUNT;case e:return d.OTHER_TABLET_PAGE_COUNT;default:return d.OTHER_DESKTOP_PAGE_COUNT}}const b=(t,e)=>Q(t,e);function V(t,e,a){return Y(t,W(e,a),$(e,a))}const j=(t,e,a,n,o)=>{const c=e.length,r=t-l,T=t+l,m=a?B.MOBILE_BUTTONS_QUANTITY:B.DESKTOP_BUTTONS_QUANTITY,O=t===l,u=t===c,h=t+l===c,_=t-l>l&&t+l!==c,s=[];if(c<=m)for(let p=l;p<=c;p+=1)s.push(n(p));else O?(s.push(n(t)),s.push(n(T)),s.push(o("next")),s.push(n(c))):u?(s.push(n(l)),s.push(o("prev")),s.push(n(r)),s.push(n(t))):t>l&&t<c&&(t===2&&(s.push(o("prev")),s.push(n(t)),s.push(n(T)),s.push(o("next")),s.push(n(c))),_&&(s.push(o("prev")),s.push(n(r)),s.push(n(t)),s.push(n(T)),s.push(o("next"))),h&&(s.push(o("prev")),s.push(n(r)),s.push(n(t)),s.push(n(c))));return s},z=t=>{const[e,a]=g.useState([]),{popularNews:n,newsByKeyword:o,newsByCategory:c,newsByDate:r}=I(),{filteredNews:T}=R(),{isMobile:m,isTablet:O}=x(),{currentPage:u}=f(),h=t&&(t==null?void 0:t.length)||0,_=V(h,m,O),s=_[u-l]||0,p=b(_,h);g.useEffect(()=>{if(t&&(t==null?void 0:t.length)>0){const A=u*s-l>=h,P=u>l&&A&&!!p;let E,C;u===l?(E=u*s,C=E-s):P?(E=u*s,C=E-s-l):(E=u*s-l,C=E-s);const U=t.slice(C,E);a(U)}},[n,o,c,r,T,u]);const w=Math.ceil(u!==l&&m?h/s+l:h/s),S=Array.from({length:w},(A,P)=>P+l);return{currentItems:e,pageNumbers:S}},N=({direction:t,pageNumbers:e,handlePrevClick:a,handleNextClick:n})=>{const{isNotMobile:o}=x(),{currentPage:c}=f(),r=c-1===0,T=c===(e==null?void 0:e.length),m=()=>o?i.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},t):null;return i.createElement(v,{id:`${t} page button`,variant:k.Other,onHandleClick:t==="Prev"?a:n,width:"w-32",disabled:t==="Prev"?r:T,hasIcon:!0,svgName:"arrow",svgSize:"xsIcon14",classNameIcon:`${t==="Prev"?"rotate-90":"-rotate-90"} fill-whiteBase`,classNameButton:t==="Prev"?"flex-row-reverse":""},m())},q=({pageNumber:t,onClick:e})=>{const{currentPage:a}=f(),n=`h-10 font-medium ring-whiteBase border-accentBase dark:ring-darkBase ring-2 ${t===a?"bg-accentBase text-contrastWhite hocus:bg-accentAlt  dark:border-whiteBase":"text-darkBase dark:text-whiteBase dark:border-greyBase"}`;return i.createElement("li",{key:t,onClick:()=>e(t)},i.createElement(v,{"aria-current":"page","aria-label":`Page ${t.toString()} button`,classNameButton:`${n}`,variant:k.Small},t))},J=({pageNumbers:t})=>{const{isNotMobile:e}=x(),{currentPage:a,setCurrentPage:n}=f(),{handlePageNumberClick:o,handleNextClick:c,handlePrevClick:r}=M(n,a,t),u=j(a,t,e,h=>i.createElement(q,{pageNumber:h,onClick:o}),h=>i.createElement("li",{key:h,className:"text-darkBase dark:text-whiteBase"},"...")).map((h,_)=>i.createElement(i.Fragment,{key:_},h));return i.createElement("div",{className:"flex items-center justify-center gap-2"},i.createElement(N,{direction:"Prev",handlePrevClick:r}),i.createElement("ul",{id:"page-numbers",className:"flex items-center gap-2"},u),i.createElement(N,{direction:"Next",pageNumbers:t,handleNextClick:c}))},X=1,nt=()=>{const{fetchPopular:t}=I(),{getSavedNews:e}=L(),{isAuthenticated:a}=y(),{currentPage:n}=f(),o=F(),{rebuiltNews:c}=G(o),{currentItems:r,pageNumbers:T}=z(c??[]);return g.useEffect(()=>{t({period:X}),a&&e()},[t,e,a]),i.createElement(D,null,i.createElement(H,{currentItems:r,currentPage:n}),i.createElement(J,{pageNumbers:T}))};export{nt as default};
