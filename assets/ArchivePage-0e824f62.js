import{j as N,k as C,R as a,S as w,b as p,C as L,d as g,r as x,H as S,U as D,l as T,A}from"./index-93ed3a0a.js";import{P as I,N as $}from"./PageTemplate-f79c3254.js";import"./images-55120594.js";import"./Toast-02fe6c6f.js";const E=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],M=56,R=87,_=t=>{const s={};return(t==null?void 0:t.length)>0&&t.forEach(e=>{const n=e==null?void 0:e.additionDate;if(n){const l=N(n,"LLLL yyyy",{locale:C});s[l]||(s[l]=[]),s[l].push(e)}}),s},y=t=>N(t,"dd/MM/yyyy"),j=(t,s)=>{let e;switch(!0){case s:e=R;break;default:e=M;break}return t.length>e?`${t.slice(0,e)}...`:t},k=({handlePageChange:t,currentPage:s,label:e,position:n,iconClass:l})=>{const o=n<s,c="group inline-flex items-center gap-x-2 rounded-full p-2.5 transition-colors duration-500 hocus:bg-accentBase disabled:pointer-events-none disabled:opacity-50 dark:hocus:bg-accentBase dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600";return a.createElement("button",{type:"button",onClick:()=>t(o?s-1:s+1),disabled:s===n,className:`${c}`},a.createElement("span",{"aria-hidden":"true"},a.createElement(w,{svgName:"arrow",sizeKey:"xsIcon14",className:`${l} fill-accentBase group-hover:fill-whiteBase group-focus:fill-whiteBase dark:fill-whiteBase`})),a.createElement("span",{className:"sr-only"},e))},H=({currentPage:t,handlePageChange:s,totalPages:e})=>{const{isMobile:n}=p(),l=()=>{const c=[],r=(f,d)=>{for(let u=f;u<=d;u++)c.push(a.createElement("button",{key:u,type:"button","aria-current":"page",className:`${o} ${t===u?"bg-accentBase text-whiteBase":"bg-transparent text-darkBase dark:text-whiteBase"}`,onClick:()=>s(u)},u))},i=f=>{c.push(a.createElement("span",{key:`dots${f}`,className:"flex w-10 items-center justify-center text-darkBase dark:text-whiteBase"},"..."))},m=()=>{c.push(a.createElement("button",{key:e,type:"button","aria-current":"page",className:`${o} ${t===e?"bg-accentBase text-whiteBase":"bg-transparent text-darkBase dark:text-whiteBase"}`,onClick:()=>s(e)},e))},h=t+2===e||t+1===e||t===e,b=t+3===e||t+2===e||t+1===e||t===e;return n?e<=4?r(1,e):t===1?(r(1,2),i("next"),m()):h?(i("prev"),r(e-2,e)):t+2<e&&(i("prev"),r(t,t),i("next"),m()):e<=5?r(1,e):t===1?(r(1,3),i("next"),m()):b?(i("prev"),r(e-3,e)):t+3<e&&(i("prev"),r(t,t+1),i("next"),m()),c},o="flex w-10 h-10 items-center justify-center rounded-full py-2.5 text-small text-darkBase transition-colors duration-500 hocus:bg-accentBase hocus:text-whiteBase dark:text-whiteBase dark:hocus:bg-accentBase lg:text-medium";return a.createElement(a.Fragment,null,l())},O=({handlePageChange:t,currentPage:s,totalPages:e})=>a.createElement("nav",{className:"flex items-center space-x-1 px-4 py-2"},a.createElement(k,{handlePageChange:t,currentPage:s,label:"Previous",position:1,iconClass:"rotate-90"}),a.createElement(H,{currentPage:s,totalPages:e,handlePageChange:t}),a.createElement(k,{handlePageChange:t,currentPage:s,label:"Next",position:e,iconClass:"-rotate-90"})),V=({displayedRows:t})=>{const{wideScreens:s}=p(),e="whitespace-nowrap px-6 text-small font-medium text-darkBase dark:text-whiteBase lg:text-medium";return a.createElement(L,{isOpen:!0,orientation:"horizontal"},a.createElement("table",{className:"mb-2.5 min-w-full divide-y divide-greyAlt/[.4] transition-colors duration-500 dark:divide-greyBase/[.4]"},a.createElement("thead",{className:"bg-accentBase/[.2] transition-colors duration-500 dark:bg-greyBase/[.4]"},a.createElement("tr",null,E==null?void 0:E.map(({label:n})=>a.createElement("th",{key:n,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase transition-colors duration-500 dark:text-whiteBase md:text-small lg:text-xl"},n)))),a.createElement("tbody",{className:"divide-y divide-whiteBase transition-colors duration-500 dark:divide-gray-700"},Array.isArray(t)&&t.map(({title:n,newsUrl:l,category:o,additionDate:c,deletionDate:r})=>a.createElement("tr",{key:l,className:"group even:bg-greyAlt/[.1]"},a.createElement("td",{className:`${e}`},a.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer nofollow",className:"block py-4 transition-colors duration-500 focus:text-accentBase group-hover:text-accentBase lg:text-medium"},j(n,s))),a.createElement("td",{className:`${e}`},o),a.createElement("td",{className:`${e}`},y(c)),a.createElement("td",{className:`${e}`},y(r)))))))},v=()=>{const{clearLog:t}=g(),{isNotMobile:s}=p();return a.createElement("button",{type:"submit",className:"group flex items-center gap-x-4 text-accentBase transition-colors duration-500 hocus:text-accentAlt dark:text-whiteBase dark:hocus:text-accentBase max-md:absolute max-md:right-0 max-md:top-0 max-md:h-10 max-md:w-10 max-md:justify-center",onClick:t},s?"Clear log":null,a.createElement(w,{svgName:"trash",sizeKey:"smIcon18",className:"fill-accentBase group-hover:fill-accentAlt group-focus:fill-accentAlt dark:fill-whiteBase dark:group-hover:fill-accentBase dark:group-focus:fill-accentBase"}))},B=4,W=t=>{const[s,e]=x.useState(""),[n,l]=x.useState(1),o=x.useMemo(()=>s?t.filter(d=>d.title.toLowerCase().includes(s.toLowerCase())):t,[t,s]),c=o.length,r=Math.ceil(c/B),i=(n-1)*B,m=i+B,h=o.slice(i,m),b=x.useCallback(d=>{const u=d.target.value;e(u),l(1)},[]),f=x.useCallback(d=>{d>=1&&d<=r&&l(d)},[r]);return{searchValue:s,currentPage:n,totalPages:r,displayedRows:h,handleSearchNews:b,handlePageChange:f}},z=({logData:t})=>{const{isMobile:s,isNotMobile:e}=p(),{searchValue:n,currentPage:l,totalPages:o,displayedRows:c,handlePageChange:r,handleSearchNews:i}=W(t);return a.createElement("div",{className:"mb-6 flex flex-col overflow-hidden rounded-lg shadow-modal"},a.createElement("div",{className:"inline-block min-w-full align-middle"},a.createElement("div",{className:"divide-y divide-greyAlt/[.4] overflow-hidden rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},a.createElement("div",{className:"px-4 py-3 lg:px-6 lg:py-5"},a.createElement("div",{className:"relative max-md:w-[254px] md:flex  md:flex-row-reverse md:items-center md:justify-between"},s?a.createElement(S,{label:"Clear deleted news log",side:"bottom",ariaLabel:"Button for clearing deleted news` log",sideOffset:0},a.createElement("div",null,a.createElement(v,null))):null,a.createElement("h3",{className:"mb-4 text-2xl font-medium text-darkBase dark:text-whiteBase"},"Deleted news"),a.createElement(D,{inputData:{name:"Deleted news",type:"text",value:n,placeholder:"Title"},hasIcon:!0,svgName:"search",onChange:m=>i(m),variant:T.FilterServiceBlock}))),a.createElement(V,{displayedRows:c}),a.createElement("div",{className:"flex max-w-xl justify-between"},a.createElement(O,{handlePageChange:r,currentPage:l,totalPages:o}),e?a.createElement(v,null):null))))},q=()=>{const{allArchive:t,archiveHistoryLog:s,getHistoryLog:e,getArchives:n}=g();x.useEffect(()=>{n(),e()},[n,e]);const l=_(t);return a.createElement(I,null,(s==null?void 0:s.length)>0?a.createElement(z,{logData:s}):null,Object.entries(l).reverse().map(([o,c])=>a.createElement(A,{key:o,dateSeparator:o,position:"archivePage"},a.createElement($,{currentItems:c}))))};export{q as default};
