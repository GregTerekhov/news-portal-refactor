import{k as E,l as b,R as e,S as f,I as N,r as h,C as k,U as w,m as B,c as D,d as L,h as S,L as I,A,T as C}from"./index-55250af1.js";import{N as T,P as M}from"./NewsList-464df176.js";import"./images-66245d57.js";const y=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],P=a=>{const t={};return a&&(a==null?void 0:a.length)>0&&a.forEach(s=>{const n=s==null?void 0:s.additionDate;if(n){const r=E(n,"LLLL yyyy",{locale:b});t[r]||(t[r]=[]),t[r].push(s)}}),t},R=({handlePageChange:a,currentPage:t,totalPages:s})=>e.createElement("nav",{className:"flex items-center space-x-1"},e.createElement("button",{type:"button",onClick:()=>a(t-1),className:"inline-flex items-center gap-x-2 rounded-full p-2.5 hover:bg-greyAlt/[.2] disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-whiteBase/[.2] dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{"aria-hidden":"true"},e.createElement(f,{svgName:"icon-arrow",size:N.xsIcon14,className:"rotate-90 fill-accentBase dark:fill-whiteBase"})),e.createElement("span",{className:"sr-only"},"Previous")),Array.from({length:s},(n,r)=>e.createElement("button",{key:r,type:"button","aria-current":"page",className:"flex min-w-10 items-center justify-center rounded-full py-2.5 text-sm text-gray-800 hover:bg-greyAlt/[.2] dark:text-white dark:hover:bg-whiteBase/[.2]",onClick:()=>a(r+1)},r+1)),e.createElement("button",{type:"button",onClick:()=>a(t+1),className:"inline-flex items-center gap-x-2 rounded-full p-2.5 text-sm text-gray-800 hover:bg-greyAlt/[.2] disabled:pointer-events-none disabled:opacity-50  dark:hover:bg-whiteBase/[.2] dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{className:"sr-only"},"Next"),e.createElement("span",{"aria-hidden":"true"},e.createElement(f,{svgName:"icon-arrow",size:N.xsIcon14,className:"-rotate-90 fill-accentBase dark:fill-whiteBase"})))),_=60,$=({displayedRows:a})=>{const t="whitespace-nowrap px-6 py-4 text-sm font-medium text-darkBase dark:text-whiteBase";return e.createElement("table",{className:"min-w-full divide-y divide-greyAlt/[.4] dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] dark:bg-greyBase/[.4]"},e.createElement("tr",null,y&&(y==null?void 0:y.map(({label:s})=>e.createElement("th",{key:s,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase dark:text-whiteBase md:text-small"},s))))),e.createElement("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700"},Array.isArray(a)&&a.map(s=>{const{title:n,newsUrl:r,category:o,additionDate:c,deletionDate:i}=s,d=E(c,"dd/MM/yyyy"),m=E(i,"dd/MM/yyyy");return e.createElement("tr",{key:r,className:"group even:bg-greyAlt/[.1]"},e.createElement("td",{className:`${t}`},e.createElement("a",{href:r,target:"_blank",className:" transition-colors duration-500 group-hover:text-accentBase"},n.length>_?`${n.slice(0,65)}...`:n)),e.createElement("td",{className:`${t}`},o),e.createElement("td",{className:`${t}`},d),e.createElement("td",{className:`${t}`},m))})))},p=7,O=({logData:a})=>{const[t,s]=h.useState(""),[n,r]=h.useState(1),o=t?a.filter(l=>l.title.toLowerCase().includes(t.toLowerCase())):a,c=o.length,i=Math.ceil(c/p),d=(n-1)*p,m=d+p,u=o.slice(d,m),g=l=>{const x=l.target.value;s(x),r(1)},v=l=>{l>=1&&l<=i&&r(l)};return e.createElement(k,{isOpen:!0,orientation:"horizontal"},e.createElement("div",{className:"mb-6 flex flex-col overflow-hidden rounded-lg shadow-modal"},e.createElement("div",{className:"-m-1.5 overflow-x-auto"},e.createElement("div",{className:"inline-block min-w-full p-1.5 align-middle"},e.createElement("div",{className:"divide-y divide-greyAlt/[.4] rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},e.createElement("div",{className:"px-4 py-3"},e.createElement("div",{className:"relative max-w-xs"},e.createElement(w,{inputData:{name:"Deleted news",type:"text",value:t,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"icon-search",onChange:l=>g(l),variant:B.FilterServiceBlock}))),e.createElement("div",{className:"overflow-hidden"},e.createElement($,{displayedRows:u})),e.createElement("div",{className:"px-4 py-1"},e.createElement(R,{handlePageChange:v,currentPage:n,totalPages:i})))))))},H=()=>{const{dbSuccessMessage:a,isLoadingDBData:t,allArchive:s,archiveHistoryLog:n,errorDB:r,getHistoryLog:o,getArchives:c}=D(),{isAuthenticated:i}=L(),d=S();h.useEffect(()=>{r&&r>=500&&d("/serverError")},[r]),h.useEffect(()=>{c(),o()},[c,o]);const m=P(s),u=t,g=!t&&s.length!==0;return i&&e.createElement(e.Fragment,null,u&&e.createElement(I,{variant:"generalSection"}),g&&e.createElement(e.Fragment,null,e.createElement(O,{logData:n}),Object.entries(m).reverse().map(([v,l])=>e.createElement(A,{key:v,dateSeparator:v,position:"archivePage"},e.createElement(T,{currentItems:l})))),!u&&!g&&e.createElement(M,{variant:"page"}),a==="Remove news success"&&e.createElement(C,{variant:"interactive",status:"success"}))};export{H as default};
