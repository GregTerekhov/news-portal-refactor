import{m as $,n as te,r as y,o as ae,p as se,u as A,f as S,q as oe,R as a,S as C,P as K,V as N,b as M,H as z,L as _,d as I,e as j,s as Y,t as ne,v as re,M as ce,w as le,a as X,g as J}from"./index-c05404ce.js";import{p as ie,u as me}from"./images-1667f645.js";import{T as de}from"./Toast-26291f4d.js";const ue=e=>e.weather.isLoading,he=e=>e.weather.data,ge=e=>e.weather.weatherByHour,pe=e=>e.weather.hasError,H=()=>{const e=$(ue),t=$(he),n=$(ge),c=$(pe),s=te(),r=y.useCallback(l=>s(ae(l)),[s]),o=y.useCallback(l=>s(se(l)),[s]);return{isWeatherLoading:e,currentWeather:t,hourlyWeather:n,weatherError:c,getCurrentWeather:r,getHourlyWeather:o}},Q=({variant:e})=>{const{errorAPI:t}=A(),{isHomeActive:n}=S(),c=t==null?void 0:t.toString().includes("429"),s=window.devicePixelRatio||1,r=oe(ie,s,window.innerWidth),o=me((r==null?void 0:r.src)||""),l="text-center text-2xl font-bold tracking-smallTight text-darkBase transition-colors dark:text-whiteBase md:w-548px md:text-5xl md:tracking-tighter";return a.createElement(a.Fragment,null,e==="page"?a.createElement("div",{className:"flex flex-col items-center justify-center space-y-10"},a.createElement("p",{className:`${l}`},`${c&&n?"It seems you have been send too much requests then its needed":"We haven’t found news from this category"}`),a.createElement("img",{src:o,alt:`${c&&n?"Too much requests":"No found news"}`,width:r.width,height:r.height})):a.createElement("img",{src:o,alt:"No found an image for news",width:r.width,height:r.height}))},Z=()=>{const[e,t]=y.useState(!0),[n,c]=y.useState(!1),[s,r]=y.useState(null),[o,l]=y.useState(!1),{getCurrentWeather:i,getHourlyWeather:m}=H(),u="geolocation"in navigator,g=d=>{switch(l(!1),r("denied"),d.code){case d.PERMISSION_DENIED:console.error("User denied access to geolocation");break;case d.POSITION_UNAVAILABLE:console.error("Geolocation information is unavailable");break;case d.TIMEOUT:console.error("Geolocation access request timed out");break;default:console.error("An unknown error occurred while getting geolocation");break}};return y.useEffect(()=>{localStorage.getItem("geolocationPermission")&&(l(!0),r("granted"))},[s]),{isCelsius:e,hasGeolocationPermission:o,flippingCard:n?"rotate-y-180":"rotate-y-0",requestGeolocationPermission:()=>{u&&navigator.permissions.query({name:"geolocation"}).then(d=>{d.state==="granted"?(r("granted"),l(!0),localStorage.setItem("geolocationPermission","granted"),navigator.geolocation.getCurrentPosition(f=>{const w={lat:f.coords.latitude,lon:f.coords.longitude};i(w),m(w)})):d.state==="prompt"?(r("prompt"),navigator.geolocation.getCurrentPosition(f=>{l(!0),localStorage.setItem("geolocationPermission","granted");const w={lat:f.coords.latitude,lon:f.coords.longitude};i(w),m(w)},g)):(l(!1),r("denied"),localStorage.removeItem("geolocationPermission"))})},toggleTemperatureScale:()=>{t(!e)},flipWeatherDetails:()=>{c(!n)},showButtonText:()=>{let d="Give permission for your geolocation";if(s==="prompt")d="Give permission for your geolocation";else if(o)d="Get the weather for your region";else if(s==="denied")d="Permission denied";else return"Give permission for your geolocation";return d},statePermission:s}},fe=({showError:e})=>{const{requestGeolocationPermission:t,showButtonText:n}=Z(),c=e?"Server error. Please try again later when you reload the page":"What a pity, this could be your weather";return a.createElement(a.Fragment,null,a.createElement("h2",{className:"text-medium text-whiteBase md:text-2xl lg:text-4xl"},c),a.createElement("div",{className:`my-auto ${e?"flex justify-center":""}`},a.createElement(C,{svgName:"moon",sizeKey:"ultraIcon156",className:"fill-transparent stroke-greyBase"})),!e&&a.createElement(K,{id:"Geolocation permission button",variant:N.Primary,onHandleClick:t,classNameButton:"border border-solid border-whiteBase"},n()))},xe={"-43200":"-12:00","-39600":"-11:00","-36000":"-10:00","-34200":"-09:30","-32400":"-09:00","-28800":"-08:00","-25200":"-07:00","-21600":"-06:00","-18000":"-05:00","-16200":"-04:30","-14400":"-04:00","-12600":"-03:30","-10800":"-03:00","-7200":"-02:00","-3600":"-01:00",0:"00:00",3600:"+01:00",7200:"+02:00",10800:"+03:00",12600:"+03:30",14400:"+04:00",16200:"+04:30",18e3:"+05:00",19800:"+05:30",20700:"+05:45",21600:"+06:00",23400:"+06:30",25200:"+07:00",28800:"+08:00",32400:"+09:00",34200:"+09:30",36e3:"+10:00",37800:"+10:30",39600:"+11:00",41400:"+11:30",43200:"+12:00",45900:"+12:45",46800:"+13:00",50400:"+14:00"};function q(e){const t=new Date(e*1e3),n=t.getHours(),c=t.getMinutes(),s=String(n).padStart(2,"0"),r=String(c).padStart(2,"0");return`${s}:${r}`}function ye(e){const t=String(e);return xe[t]}function W(e){const t=e*.75006;return Math.floor(t)}function be(e){return e/1e3}function Ee(e){let t;const n=[{min:0,max:.2,scale:"0"},{min:.3,max:1.5,scale:"1"},{min:1.6,max:3.3,scale:"2"},{min:3.4,max:5.4,scale:"3"},{min:5.5,max:7.9,scale:"4"},{min:8,max:10.7,scale:"5"},{min:10.8,max:13.8,scale:"6"},{min:13.9,max:17.1,scale:"7"},{min:17.2,max:20.7,scale:"8"},{min:20.8,max:24.4,scale:"9"},{min:24.5,max:28.4,scale:"10"},{min:28.5,max:32.6,scale:"11"},{min:32.7,max:Number.MAX_SAFE_INTEGER,scale:"12"}];return e&&(t=n.find(c=>e>=c.min&&e<=c.max)),t?t==null?void 0:t.scale:""}function we(){const e=new Date,t=e.getHours(),n=e.getMinutes(),c=o=>o<10?`0${o}`:o.toString(),s=c(t),r=c(n);return`${s}:${r}`}function Se(){const e={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday"},t=new Date,n=e[t.toDateString().slice(0,3)],c=we(),s=t.toDateString().slice(4).slice(0,4),r=t.toDateString().slice(8).slice(0,2),o=t.toDateString().slice(11),l=`${c} | ${r} ${s} ${o}`;return{days:n,dateNow:l}}const D=(e,t)=>t&&e?Math.round(e)+"°":Math.round(e*9/5+32)+"°",Be=(e,t)=>{var c,s,r,o,l,i,m;return[{icon:"earth",iconSize:e?"xsIcon16":"mdIcon24",value:`${ye(t==null?void 0:t.timezone)}`,label:"Greenwich mean time",hint:"GMT time",justifyItemClass:"justify-start",subTextValue:"UTC"},{icon:"humidity",iconSize:e?"smIcon18":"lgIcon30",value:`${(c=t==null?void 0:t.main)==null?void 0:c.humidity}`,label:"Humidity in percent",hint:"Humidity (%)",justifyItemClass:"justify-end",subTextValue:"%"},{icon:"pressure",iconSize:e?"smIcon18":"lgIcon30",value:`${W((s=t==null?void 0:t.main)==null?void 0:s.pressure)}`,label:"Atmospheric pressure in mm Hg",hint:"Atmospheric pressure (mm.Hg)",justifyItemClass:"justify-start",subTextValue:"mm.Hg"},{icon:"pressure",iconSize:e?"smIcon18":"lgIcon30",value:`${(r=t==null?void 0:t.main)==null?void 0:r.pressure}`,label:"Atmospheric pressure in hPa",hint:"Atmospheric pressure (HPa)",justifyItemClass:"justify-end",subTextValue:"hPa"},{icon:"sunrise",iconSize:e?"smIcon20":"lgIcon30",value:`${q((o=t==null?void 0:t.sys)==null?void 0:o.sunrise)}`,label:"Sunrise time",hint:"Sunrise time",justifyItemClass:"justify-start",subTextValue:"AM"},{icon:"sunset",iconSize:e?"smIcon20":"lgIcon30",value:`${q((l=t==null?void 0:t.sys)==null?void 0:l.sunset)}`,label:"Sunset time",hint:"Sunset time",justifyItemClass:"justify-end",subTextValue:"PM"},{icon:"eye-opened",iconSize:e?"smIcon20":"lgIcon30",value:`${be(t==null?void 0:t.visibility)}`,label:"Road visibility",hint:"Road visibility",justifyItemClass:"justify-start",subTextValue:"km"},{icon:"weather-wind",iconSize:e?"smIcon20":"lgIcon30",value:`${(i=t==null?void 0:t.wind)==null?void 0:i.speed}`,label:"Wind speed in metre per seconds",hint:`Wind speed (m/s). (${Ee((m=t==null?void 0:t.wind)==null?void 0:m.speed)} on the Beaufort scale)`,justifyItemClass:"justify-end",subTextValue:"m/s"}]},ke=e=>[{label:`Temperature in °${e?"C":"F"}`,icon:"thermometer",iconSize:"mdIcon24",iconColorStyles:"fill-whiteBase",renderCell:Te},{label:"Precipitation and weather",icon:"sun",iconSize:"mdIcon24",iconColorStyles:"stroke-whiteBase fill-transparent",renderCell:Ae},{label:"Humidity (%)",icon:"humidity",iconSize:"mdIcon28",iconColorStyles:"fill-whiteBase",renderCell:De},{label:"Pressure (mm.Hg)",icon:"pressure",iconSize:"mdIcon24",iconColorStyles:"fill-whiteBase",renderCell:He},{label:"Wind speed (m/s)",icon:"weather-wind",iconSize:"mdIcon24",iconColorStyles:"fill-whiteBase",renderCell:Pe}],ve=({toggleTemperatureScale:e,currentWeather:t,isCelsius:n})=>{var i,m,u,g;const{isMobile:c}=M(),s=((i=t.main)==null?void 0:i.temp)??0,r=((m=t.main)==null?void 0:m.feels_like)??0,o=((g=(u=t.weather)==null?void 0:u[0])==null?void 0:g.main)??"",l=t.name??"";return a.createElement("div",{className:"mx-auto flex cursor-pointer items-center justify-evenly gap-5",onClick:e},a.createElement("div",{className:'relative w-83px text-center after:absolute after:-right-2 after:top-0 after:h-full after:w-px after:bg-white after:content-[""] md:w-96px'},a.createElement("p",{className:"font-weather text-monstrous text-contrastWhite  md:text-[64px]"},D(s,n))),a.createElement("div",{className:"space-y-2.5"},a.createElement("div",null,a.createElement("p",{className:"font-weather text-3xl text-contrastWhite md:text-4.5xl"},o),a.createElement("p",{className:"font-weather text-base text-contrastWhite md:text-2xl"},"Feels like"," ",n?D(r,!0)+"C":D(r,!1)+"F")),a.createElement("div",{className:"flex items-center gap-1 rounded-lg bg-weatherForeground px-2 py-[9px] text-contrastWhite md:gap-2 md:pb-[9px] md:pl-[7px] md:pr-[17px] md:pt-[10px]"},a.createElement(C,{svgName:"location",sizeKey:c?"smIcon20":"mdIcon27",className:"fill-whiteBase"}),a.createElement("p",{className:"font-weather text-base text-contrastWhite md:text-medium"},l))))},Ce=({isCelsius:e})=>{const{hourlyWeather:t}=H(),{isMobile:n}=M(),c=ke(e);return a.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full bg-accentBase duration-500 ease-in backface-hidden rotate-y-180"},a.createElement("table",{className:"h-full min-w-full border-separate border border-transparent bg-accentBase"},a.createElement("thead",{className:"h-10"},a.createElement(z,{label:"Time",side:"top",sideOffset:0,ariaLabel:"Time interval (3 hours)"},a.createElement("tr",null,a.createElement("th",{className:"w-10 pr-2"},a.createElement(C,{svgName:"time",sizeKey:n?"smIcon20":"mdIcon24",className:"fill-whiteBase"})),t&&Array.isArray(t)&&(t==null?void 0:t.map(s=>{const r=q(s==null?void 0:s.dt);return a.createElement("th",{key:s==null?void 0:s.dt,scope:"col",className:"-rotate-90 whitespace-nowrap text-center text-small text-whiteBase md:text-base hg:text-xl"},r)}))))),a.createElement("tbody",null,c.map(({label:s,icon:r,iconColorStyles:o,iconSize:l,renderCell:i})=>a.createElement(z,{key:r,label:s,side:"top",sideOffset:0,ariaLabel:`Info about ${s} by time interval`},a.createElement("tr",null,a.createElement("th",{scope:"row",className:"w-10 pr-2"},a.createElement(C,{svgName:r,sizeKey:n?"smIcon20":l,className:o})),t&&Array.isArray(t)&&t.map(m=>a.createElement(a.Fragment,{key:m==null?void 0:m.dt},i(m,e)))))))))},Ie=()=>{const{currentWeather:e}=H(),{isMobile:t}=M(),{days:n,dateNow:c}=Se(),s=Be(t,e);return a.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full flex-col justify-between gap-3 backface-hidden"},a.createElement("div",{className:"mb-3 text-center hg:mb-5"},a.createElement("span",{className:"font-weather text-3.5xl text-contrastWhite md:text-4.5xl hg:text-5xl"},n),a.createElement("p",{className:"text-2.5xl font-weather text-contrastWhite md:text-3.5xl"},c)),a.createElement("ul",{className:"grid grid-cols-2 grid-rows-2 gap-y-3.5"},Array.isArray(s)&&s.map(({icon:r,iconSize:o,value:l,label:i,hint:m,justifyItemClass:u,subTextValue:g})=>a.createElement("li",{key:i},a.createElement(z,{label:m,side:"top",align:u==="justify-end"?"end":"start",sideOffset:4,ariaLabel:`Info about ${i} for current time`},a.createElement("div",{className:`flex items-center gap-3 text-base text-contrastWhite md:text-medium hg:text-2xl ${u}`},a.createElement("div",{className:`${u==="justify-end"?"order-last":"order-1"}`},a.createElement(C,{svgName:r,sizeKey:o,className:"fill-whiteBase"})),a.createElement("p",{className:"flex items-baseline gap-x-1 even:order-1"},l,a.createElement("span",{className:"text-xs hg:text-small"},g))))))))},G="py-1.5 text-center text-small text-whiteBase md:py-4 md:text-base hg:text-medium",Te=(e,t)=>{var n,c;return a.createElement("td",{className:`${G}`},t?D((n=e==null?void 0:e.main)==null?void 0:n.temp,!0)+"C":D((c=e==null?void 0:e.main)==null?void 0:c.temp,!1)+"F")},Ae=e=>{var t,n,c,s;return a.createElement("td",{className:"h-35px"},a.createElement("img",{className:"cover",src:`https://openweathermap.org/img/wn/${(n=(t=e==null?void 0:e.weather)==null?void 0:t[0])==null?void 0:n.icon}@2x.png`,alt:(s=(c=e==null?void 0:e.weather)==null?void 0:c[0])==null?void 0:s.description}))},De=e=>{var t;return a.createElement("td",{className:`${G}`},(t=e==null?void 0:e.main)==null?void 0:t.humidity)},He=e=>{var t;return a.createElement("td",{className:`${G}`},W((t=e==null?void 0:e.main)==null?void 0:t.pressure))},Pe=e=>{var t;return a.createElement("td",{className:`${G}`},(t=e==null?void 0:e.wind)==null?void 0:t.speed)},Le=()=>{var x,b;const{hasGeolocationPermission:e,isCelsius:t,flippingCard:n,toggleTemperatureScale:c,flipWeatherDetails:s}=Z(),{isWeatherLoading:r,currentWeather:o,weatherError:l}=H(),i=o&&Object.keys(o).length===0,m=r&&e,u=l&&l,g=`${!r&&i&&!u?"flex flex-col items-center justify-between px-6 py-10 text-center md:px-10":u?"px-6 py-10 text-center md:px-10":"px-5 py-8 md:px-8 md:pt-10 hg:pt-8"} h-[515px] md:h-700px flex flex-col justify-between w-full bg-accentBase hg:w-442px`;return a.createElement("div",{className:`${g}`},!r&&i||u?a.createElement(fe,{showError:u}):m?a.createElement(_,{variant:"element"}):!r&&!i&&e&&a.createElement(a.Fragment,null,a.createElement(ve,{toggleTemperatureScale:c,currentWeather:o,isCelsius:t}),(o==null?void 0:o.weather)&&(o==null?void 0:o.weather[0].icon)&&a.createElement("img",{className:"m-auto h-32 w-32 md:h-165px md:w-165px hg:h-180px hg:w-180px",src:`https://openweathermap.org/img/wn/${o==null?void 0:o.weather[0].icon}@2x.png`,alt:(b=(x=o==null?void 0:o.weather)==null?void 0:x[0])==null?void 0:b.description}),a.createElement("div",{className:"h-56 w-full cursor-pointer perspective-10 md:h-[314px]",onClick:s},a.createElement("div",{className:`grid h-full w-full grid-cols-1 grid-rows-1 transition-transform transform-style-3d ${n}`},a.createElement(Ie,null),a.createElement(Ce,{isCelsius:t})))))},Re=({myButtonRef:e,handleOpenConfirm:t})=>a.createElement(z,{label:"Delete news from archive",side:"bottom",sideOffset:16,ariaLabel:"Button for deleting news from archive"},a.createElement("div",null,a.createElement(K,{ref:e,onHandleClick:t,variant:N.Small,hasIcon:!0,svgName:"close",svgSize:"mdIcon24",classNameIcon:"stroke-whiteBase",ariaLabel:"Delete news from archive button",classNameButton:"absolute z-40 top-3 right-3 bg-accentBase/[.8] py-1.5"}))),Fe=({handleDeleteNews:e,handleClose:t,newsId:n})=>{const s=[{onClick:r=>t(r,!1),id:"Cancel deletion the news",label:"Cancel",icon:"reset"},{onClick:async r=>{await e(r,n)},id:"Delete selected news",label:"Delete",icon:"trash"}];return a.createElement("div",null,a.createElement("h3",{className:"mb-4 text-2xl text-darkBase dark:text-whiteBase md:mb-6 md:text-4xl"},"Delete news"),a.createElement("p",{className:"mb-6 text-medium text-darkBase dark:text-whiteBase md:mb-10 md:text-xl"},"Are you sure you want to delete this news?"),a.createElement("ul",{className:"max-md:space-y-4 md:flex md:items-center md:justify-between md:gap-8"},s.map(({onClick:r,id:o,label:l,icon:i})=>a.createElement("li",{key:l,className:"w-full"},a.createElement(K,{variant:N.Primary,onHandleClick:r,hasIcon:!0,id:o,svgName:i,svgSize:"smIcon18",classNameIcon:"fill-whiteBase",classNameButton:"md:text-xl border border-whiteBase"},l)))))},$e=({liveNews:e})=>{const{wideScreens:t}=M();return a.createElement("div",{className:"mt-4 px-4"},a.createElement("p",{className:"mb-2 line-clamp-1 text-end text-small leading-tight text-darkBase dark:text-whiteBase lg:text-base hg:text-medium"},e!=null&&e.author?`By ${e==null?void 0:e.author}`:`${e==null?void 0:e.materialType}`),a.createElement("h2",{className:"mb-4 line-clamp-3 h-100px text-3xl font-bold leading-tight tracking-mediumTight dark:text-whiteBase md:h-132px md:text-4xl md:tracking-tighter hg:h-[120px] hg:text-3.5xl"},e==null?void 0:e.title),a.createElement("p",{className:"mb-4 line-clamp-3 h-57px text-base leading-tight text-darkBase dark:text-whiteBase md:h-66px md:text-medium hg:h-[72px] hg:text-xl"},e==null?void 0:e.description),a.createElement("div",{className:"flex justify-between"},a.createElement("p",{className:"text-base text-greyAlt md:text-medium hg:text-xl"},e==null?void 0:e.publishDate),a.createElement("div",{className:"flex translate-x-full items-center gap-2 rounded-2xl bg-accentAlt pr-2 transition-all group-hover:translate-x-0 group-hover:bg-accentAlt dark:bg-transparent"},a.createElement(C,{svgName:"triangle-double",sizeKey:t?"smIcon20":"xsIcon16",className:"fill-whiteBase"}),a.createElement("p",{className:"text-base text-whiteBase transition-colors md:text-medium hg:py-px hg:text-xl"},"Click for read more..."))))},ze=(e,t)=>{switch(!0){case(!e&&t):return"Remove from favorite";case(!e&&!t):return"Add to favorite";case(e&&t):return"Favourited";case(e&&!t):return"Not in favourites";default:return}},Me=(e,t,n)=>{switch(!0){case(!n&&e&&t):return"group-hover:fill-whiteBase group-hover:stroke-whiteBase group-focus:stroke-whiteBase";case(!n&&e&&!t):return"fill-accentBase stroke-accentBase";case(!n&&!e&&t):return"group-hover:fill-accentBase group-hover:stroke-whiteBase group-focus:stroke-whiteBase";case(n&&!e):return"fill-none stroke-accentBase";case(n&&e):return"fill-accentBase stroke-accentBase";default:return"fill-none stroke-accentBase"}},je=({onHandleClick:e,isFavourite:t,buttonData:n})=>{const[c,s]=y.useState(!1),{isArchiveActive:r}=S(),o=`absolute bottom-3 right-2 z-20 flex items-center gap-x-1 rounded-3xl bg-contrastWhite px-3 py-1.5 text-small font-medium text-darkBase transition-colors duration-500 lg:text-medium ${r?"":"group hocus:bg-accentBase hocus:text-whiteBase"}`;return a.createElement("button",{id:n==null?void 0:n.id,type:"button",className:`${o}`,onClick:e,onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},ze(r,t),a.createElement(C,{svgName:"heart",sizeKey:"xsIcon16",className:Me(t,c,r)}))},Ge=({liveNews:e})=>{const{savedNews:t,allArchive:n}=I(),{isAuthenticated:c}=j(),{isArchiveActive:s}=S(),r=s?n:t,o=r==null?void 0:r.find(m=>m.newsUrl===(e==null?void 0:e.newsUrl)),[l,i]=y.useState({isFavourite:(o==null?void 0:o.isFavourite)??!1,hasRead:(o==null?void 0:o.hasRead)??!1});return y.useEffect(()=>{c&&o&&i({isFavourite:o.isFavourite??!1,hasRead:o.hasRead??!1})},[o,c,e]),{...l,setIsFavourite:m=>i({...l,isFavourite:m}),setHasRead:m=>i({...l,hasRead:m})}},Ue=({liveNews:e,setIsFavourite:t,setHasRead:n})=>{const[c,s]=y.useState(!1),[r,o]=y.useState(!1),{savedNews:l,updateSavedNews:i,addVotedNews:m,removeNews:u,removeFavouriteNews:g}=I(),{showToast:x}=Y(),{setIsScrollDisabled:b}=ne(),{isArchiveActive:E}=S(),B=l&&e&&(e==null?void 0:e.newsUrl)!==void 0&&!E;y.useEffect(()=>{c&&l.length>0&&(m(l),s(!1))},[c,m]);const h=l==null?void 0:l.find(p=>p.newsUrl===e.newsUrl),d=h==null?void 0:h.isFavourite,f=h==null?void 0:h.hasRead,w=h==null?void 0:h.additionDate,T=new Date().getTime(),P=()=>{t(!0),s(!0);const p={...e,isFavourite:!d,additionDate:T};i(p)},L=()=>{if(t(!d),!d&&f){s(!0);const p={...e,isFavourite:!d,hasRead:f,additionDate:w};i(p)}else if(d&&!f){s(!0);const p={...e,isFavourite:!d,additionDate:null};i(p),g((e==null?void 0:e.newsUrl)||"")}else if(d&&f){s(!0);const p={...e,isFavourite:!d,hasRead:f,additionDate:w};i(p),g((e==null?void 0:e.newsUrl)||"")}},R=p=>{p.stopPropagation(),p.preventDefault(),B&&(l.length===0||!h?(s(!0),P()):(s(!0),L()))},F=y.useCallback(()=>{if(B){if(l.length===0||!h){n(!0),s(!0);const p={...e,hasRead:!0,additionDate:T};i(p)}else if(!f&&d){n(!0),s(!0);const p={...e,isFavourite:d,hasRead:!0,additionDate:w};i(p)}else if(f===!0)return}},[E,l,i]);return{isDeleted:r,handleChangeFavourites:R,handleReadNews:F,handleDeleteNews:async(p,O)=>{p.stopPropagation(),p.preventDefault();const k=await u(O);x(k.meta.requestStatus),o(!0),b(!1)}}},Ve=({liveNews:e})=>{const{isFavourite:t,hasRead:n,setIsFavourite:c,setHasRead:s}=Ge({liveNews:e}),{isDeleted:r,handleChangeFavourites:o,handleReadNews:l,handleDeleteNews:i}=Ue({liveNews:e,setIsFavourite:c,setHasRead:s});return{isFavourite:t,hasRead:n,isDeleted:r,handleChangeFavourites:o,handleReadNews:l,handleDeleteNews:i}},Oe=({liveNews:e={}})=>{const t=a.createRef(),{isAuthenticated:n}=j(),{isOpenModal:c,toggleModal:s,popUpRef:r}=re(),{isHomeActive:o,isArchiveActive:l,isReadActive:i}=S(),{isFavourite:m,hasRead:u,handleChangeFavourites:g,handleReadNews:x,handleDeleteNews:b}=Ve({liveNews:e}),E=async h=>{e._id&&await b(h,e._id)},B=o||l;return a.createElement(a.Fragment,null,(e==null?void 0:e.newsUrl)&&a.createElement("a",{rel:"noopener noreferrer nofollow",className:"group block transition-colors",href:e.newsUrl,target:"_blank",onClick:n?x:void 0},a.createElement("div",{className:`${n&&u&&B?"absolute z-20 h-full w-full bg-whiteBase/[.4]":"hidden"}`}),l?a.createElement(Re,{myButtonRef:t,handleOpenConfirm:h=>s(h,!0)}):null,a.createElement("p",{className:"absolute left-0 top-10 z-20 rounded-r bg-accentBase/[.7] px-2 py-1 text-small font-medium text-contrastWhite hg:text-medium"},e==null?void 0:e.category," / ",e==null?void 0:e.materialType),n&&u&&!i&&a.createElement("p",{className:"absolute right-14 top-3.5 z-10 flex items-center gap-1 text-base font-bold text-readBase md:top-5"},"Already read",a.createElement(C,{svgName:"check",sizeKey:"smIcon18",className:"fill-readBase"})),a.createElement("div",{className:"relative flex h-395px items-center justify-center overflow-hidden rounded-[10px]"},a.createElement("p",{className:"absolute bottom-3 left-3 z-10 text-whiteBase opacity-0 drop-shadow-lg transition-opacity group-hover:opacity-100"},e==null?void 0:e.edition),e&&(e!=null&&e.imgLink)?a.createElement("img",{loading:"lazy",className:"absolute h-full max-w-none rounded-xl object-cover",src:e==null?void 0:e.imgLink,alt:e!=null&&e.imgAlt?e==null?void 0:e.imgAlt:"plug image"}):a.createElement(Q,{variant:"card"}),n&&a.createElement(je,{onHandleClick:g,isFavourite:m,buttonData:{id:`Add ${e==null?void 0:e.title} to favourites or remove from them`}})),a.createElement($e,{liveNews:e})),c&&a.createElement(ce,{closeModal:s,modalRef:r},a.createElement(Fe,{handleDeleteNews:E,newsId:e._id,handleClose:h=>s(h)})))},Qe=({currentItems:e,currentPage:t})=>{const{isWeatherLoading:n}=H(),{isFavoriteActive:c}=S(),s=`${c?"mb-0":"mb-10 md:mb-12 lg:mb-[60px]"} max-md:space-y-7 md:grid md:grid-cols-2 md:gap-[30px] lg:grid-cols-3 lg:gap-x-8 lg:gap-y-10 hg:gap-10`,r=o=>`relative h-655px w-72 overflow-hidden rounded-[10px] shadow-card transition-colors dark:shadow-darkCard md:h-700px md:w-353px lg:w-395px hg:w-442px ${o===0&&"md:col-start-1 md:row-start-1 lg:col-start-1"} ${o===1&&"lg:col-start-2 lg:row-start-1"}`;return a.createElement("ul",{className:`${s}`},t&&t===1&&a.createElement("li",{className:"overflow-hidden rounded-[10px] shadow-card transition-colors dark:shadow-darkCard max-md:h-515px md:col-start-2 lg:col-start-3"},n?a.createElement(_,{variant:"element"}):a.createElement(Le,null)),e==null?void 0:e.map((o,l)=>a.createElement("li",{key:o.newsUrl,className:r(l)},a.createElement(Oe,{liveNews:o}))))},qe=()=>{const{errorDB:e}=I(),{authError:t}=j(),{errorAPI:n}=A(),c=le();y.useEffect(()=>{(e&&s(e)||n&&s(n)||t&&s(t))&&c("/server-error")},[e,n,t]);function s(r){return r&&typeof r=="number"&&r>=500}},Ke=()=>{const{headline:e}=A(),{isHomeActive:t,isFavoriteActive:n,isReadActive:c,isArchiveActive:s}=S();return{getHeadline:()=>{switch(!0){case(e&&t):return e;case n:return"Favourite news";case c:return"Read news";case s:return"Archive news";default:return""}}}},U=()=>{const{hasResults:e}=X(),{isLoadingAPIData:t}=A(),{isLoadingDBData:n}=I(),{isHomeActive:c,isFavoriteActive:s,isReadActive:r,isArchiveActive:o}=S(),l=n||e==="loading",i=t||l;return{commonDBLoader:l,isHomeLoader:i,shouldShowLoader:c&&i||(s||r)&&l||o&&n}},ee=()=>{const{hasResults:e}=X(),{errorAPI:t}=A(),{allArchive:n,archiveHistoryLog:c,isLoadingDBData:s}=I(),r=S(),{rebuiltNews:o}=J(r),{isHomeLoader:l,commonDBLoader:i}=U(),{isHomeActive:m,isFavoriteActive:u,isReadActive:g,isArchiveActive:x}=r,b=t==null?void 0:t.toString().includes("429"),E=(o==null?void 0:o.length)===0||e==="empty",B=E||b,h=n.length===0&&c.length===0;return{isHomePlug:B,commonPlug:E,shouldShowPlug:m&&B&&!l||(u||g)&&E&&!i||x&&h&&!s}},Ne=()=>{const{allArchive:e,isLoadingDBData:t}=I(),n=S(),{isHomeLoader:c,commonDBLoader:s}=U(),{isHomePlug:r,commonPlug:o}=ee(),{isArchiveActive:l,isFavoriteActive:i,isHomeActive:m,isReadActive:u}=n,g=m&&!c&&!r,x=(i||u)&&!s&&!o,b=l&&!t&&(e==null?void 0:e.length)>0;return{shouldShowContent:g||x||b}},_e=()=>{const{filteredNews:e}=X(),{errorAPI:t,newsByKeyword:n,newsByCategory:c,newsByDate:s}=A(),{authError:r,statusMessage:o}=j(),{allFavourites:l,allReads:i,dbSuccessMessage:m}=I(),{setOpenToast:u}=Y(),g=S(),{rebuiltNews:x}=J(g),{isHomeLoader:b,commonDBLoader:E}=U(),{isArchiveActive:B,isFavoriteActive:h,isHomeActive:d,isReadActive:f}=g;y.useEffect(()=>{(h||f)&&(x==null?void 0:x.length)>0&&u(!0)},[]);const w=n&&n.length>0||c&&c.length>0||s&&s.length>0,T=o==="Email sent successfully"||o==="Password has successfully changed"||o==="User sign-in success"||o==="Your saved password has been successfully retrieved"||o==="Sign-out success",P=r&&typeof r=="string"||t&&typeof t=="number",L=!b&&w||(e==null?void 0:e.length)>0,R=h&&!E&&(l==null?void 0:l.length)>0,F=f&&!E&&(i==null?void 0:i.length)>0,V=B&&m==="Remove news success",O=d&&(P||T||L)||R||F||V;let k,v;switch(!0){case(d&&T):k="success",v="non-interactive";break;case(d&&P):k="error",v="interactive";break;case(d&&L):k="info",v="non-interactive";break;case R:k="info",v="non-interactive";break;case F:k="info",v="non-interactive";break;case V:k="success",v="interactive";break;default:k="info",v="non-interactive";break}return{shouldShowToast:O,statusToast:k,toastType:v}},Ze=({children:e})=>{const{shouldShowLoader:t}=U(),{shouldShowPlug:n}=ee(),{shouldShowContent:c}=Ne(),{shouldShowToast:s,statusToast:r,toastType:o}=_e(),{getHeadline:l}=Ke();return qe(),a.createElement(a.Fragment,null,t&&a.createElement(_,{variant:"generalSection"}),s&&a.createElement(de,{variant:o,status:r}),n&&a.createElement(Q,{variant:"page"}),c&&a.createElement("h1",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},l()),c&&e)};export{Qe as N,Ze as P};
