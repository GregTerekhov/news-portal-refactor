import{F as E,G as C,I as x,J as y,K as $,e as g,k as b,N as I,O as S,Q as v,R as s,A as T,T as R,W as H,P as F,V as U,X as D}from"./index-3b142ad8.js";import{T as M}from"./Toast-5c41533d.js";const q=({newPassword:a,confirmPassword:n,password:t,errors:e})=>{var l,o,c,u,m;const i=[{type:"password",placeholder:"Enter new password",fieldValue:a,errors:(l=e==null?void 0:e.newPassword)==null?void 0:l.message,label:"newPassword",ariaInvalid:!!(e!=null&&e.newPassword),iconName:"password"},{type:"password",placeholder:"Confirm new password",fieldValue:n,errors:(o=e==null?void 0:e.confirmPassword)==null?void 0:o.message,label:"confirmPassword",ariaInvalid:!!(e!=null&&e.confirmPassword),iconName:"password"}];return a&&n&&!((c=e==null?void 0:e.newPassword)!=null&&c.message)&&!((u=e==null?void 0:e.confirmPassword)!=null&&u.message)&&a.length!==0&&n.length!==0&&i.push({type:"password",placeholder:"Enter your current password",fieldValue:t,errors:(m=e==null?void 0:e.password)==null?void 0:m.message,label:"password",ariaInvalid:!!(e&&(e!=null&&e.password)),iconName:"password"}),i},G=({email:a,password:n,errors:t})=>{var d,l,o;const e=[{type:"email",placeholder:"Enter new email",fieldValue:a,errors:(d=t==null?void 0:t.email)==null?void 0:d.message,label:"email",iconName:"envelop",ariaInvalid:!!(t!=null&&t.email),autofill:"email"}];return a&&!((l=t==null?void 0:t.email)!=null&&l.message)&&a.length!==0&&e.push({type:"password",placeholder:"Enter your current password",fieldValue:n,errors:(o=t==null?void 0:t.password)==null?void 0:o.message,label:"password",iconName:"password",ariaInvalid:!!(t!=null&&t.password)}),e},L=E({email:C(),password:x()}),O=E({newPassword:y(),confirmPassword:$(y()),password:x()}),W=()=>{const{updateEmail:a}=g(),{showToast:n}=b(),{handleSubmit:t,register:e,watch:i,reset:d,getValues:l,formState:{errors:o}}=I({resolver:S(L),defaultValues:{email:"",password:""}}),[c,u]=i(["email","password"]);return{emailSubmit:t,updateEmailRegister:e,errors:o,email:c,handleEmailSubmitHandler:async p=>{try{const r=await a(p);v(),n(r.meta.requestStatus)}catch(r){throw console.error("Error during updateEmail:",r),r}finally{d({...l,email:"",password:""})}},emailInputs:G({email:c,password:u,errors:o})}},j=()=>{const{updatePassword:a}=g(),{showToast:n}=b(),{handleSubmit:t,register:e,watch:i,reset:d,getValues:l,formState:{errors:o}}=I({resolver:S(O),defaultValues:{newPassword:"",confirmPassword:"",password:""}}),[c,u,m]=i(["newPassword","confirmPassword","password"]);return{passwordSubmit:t,updatePasswordRegister:e,handlePasswordSubmitHandler:async r=>{try{const{newPassword:w,password:h}=r,f=await a({password:h,newPassword:w});v(),n(f.meta.requestStatus)}catch(w){throw console.error("Error during updatePassword:",w),w}finally{d({...l,newPassword:"",confirmPassword:"",password:""})}},passwordInputs:q({newPassword:c,confirmPassword:u,password:m,errors:o})}},P=({field:a})=>{const{isRefreshingUser:n}=g(),{emailSubmit:t,updateEmailRegister:e,emailInputs:i,handleEmailSubmitHandler:d}=W(),{passwordSubmit:l,updatePasswordRegister:o,handlePasswordSubmitHandler:c,passwordInputs:u}=j(),m=a==="email"?i:u,p=`and confirm by inputting your current ${a} in the new field.`,r=`in the first field and repeat the entry in the second field. In the third field, confirm the change by inputting your current ${a}.`,w=a==="email"?p:r;return s.createElement(T,{position:"accountManagePage",blockDefinition:`Change your ${a}`},s.createElement("form",{className:"space-y-4 pt-4 lg:space-y-8",onSubmit:a==="email"?t(d):l(c)},s.createElement("ul",{className:"space-y-4 lg:space-y-8"},Array.isArray(m)&&m.map(({label:h,type:f,placeholder:N,fieldValue:V,errors:k,iconName:B,ariaInvalid:A})=>s.createElement("li",{key:h},s.createElement(R,{inputData:{type:f,placeholder:N,fieldValue:V},errors:k,register:a==="email"?e:o,label:h,hasIcon:!0,svgName:B,variant:H.Account,ariaInvalid:A})))),s.createElement("p",{className:"text-small text-darkBase dark:text-whiteBase lg:text-medium hg:text-xl"},`To change your current ${a}, enter the new ${a} ${w} If all information is entered correctly, you will receive a
          notification confirming the successful update of your ${a}.`),s.createElement(F,{type:"submit",width:"w-28 lg:w-40",id:`Button for applying change ${a==="password"?"and confirm ":""}your new ${a}`,variant:U.Other,disabled:!!(a==="email"&&n)},"Apply")))},Q=()=>{const{authError:a,statusMessage:n}=g(),t=n==="Email is successfully updated"||n==="Password is successfully updated"||n.includes("linking"),e=t||typeof a=="string";return s.createElement("div",null,s.createElement("h2",{className:"mb-14 text-end text-3xl leading-tighter text-darkBase dark:text-whiteBase hg:text-5xl"},"Account settings"),s.createElement("div",{className:"flex items-center justify-end"},s.createElement("div",{className:"w-52 space-y-2 md:w-80 md:space-y-6 lg:w-600px"},s.createElement(s.Fragment,null,s.createElement(P,{field:"email"}),s.createElement(P,{field:"password"})),s.createElement("h3",{className:"text-darkBase dark:text-whiteBase md:text-2xl lg:mb-4 hg:text-3xl"},"Connected accounts"),s.createElement("p",{className:"text-small leading-normal text-darkBase dark:text-whiteBase lg:text-medium hg:text-xl"},"You can connect or disconnect your News account to Google, Facebook, or Apple to log in using this account. We will never send messages to your contacts without your permission."),s.createElement("hr",{className:"!border-greyAlt dark:!border-whiteBase"}),s.createElement(D,null))),e?s.createElement(M,{variant:"interactive",status:t?"success":"error"}):null)};export{Q as default};
