import{m as L,n as ee,r as S,o as te,p as ae,b as H,f as B,q as oe,R as a,S as I,I as u,P as U,V as G,u as $,H as R,L as V,d as T,s as K,t as se,e as O,v as ne,M as le,c as _,g as X,w as ce,T as re}from"./index-dfd72dbe.js";import{p as ie,u as me}from"./images-456d345e.js";const de=e=>e.weather.isLoading,ue=e=>e.weather.data,ge=e=>e.weather.weatherByHour,he=e=>e.weather.hasError,P=()=>{const e=L(de),t=L(ue),o=L(ge),s=L(he),n=ee(),l=S.useCallback(r=>n(te(r)),[n]),c=S.useCallback(r=>n(ae(r)),[n]);return{isWeatherLoading:e,currentWeather:t,hourlyWeather:o,weatherError:s,getCurrentWeather:l,getHourlyWeather:c}},Z=({variant:e})=>{const{errorAPI:t}=H(),{isHomeActive:o}=B(),s=t==null?void 0:t.toString().includes("429"),n=window.devicePixelRatio||1,l=oe(ie,n,window.innerWidth),c=me((l==null?void 0:l.src)||""),r="mb-10 text-center text-2xl font-bold tracking-smallTight text-darkBase transition-colors dark:text-whiteBase md:w-548px md:text-5xl md:tracking-tighter";return a.createElement(a.Fragment,null,e==="page"?a.createElement("div",{className:"flex flex-col items-center justify-center"},a.createElement("p",{className:`${r}`},`${s&&o?"It seems you have been send too much requests then its needed":"We haven’t found news from this category"}`),a.createElement("img",{src:c,alt:`${s&&o?"Too much requests":"No found news"}`,width:l.width,height:l.height})):a.createElement("img",{src:c,alt:"No found an image for news",width:l.width,height:l.height}))},J=()=>{const[e,t]=S.useState(!0),[o,s]=S.useState(!1),[n,l]=S.useState(null),[c,r]=S.useState(!1),{getCurrentWeather:i,getHourlyWeather:m}=P(),g="geolocation"in navigator;return S.useEffect(()=>{localStorage.getItem("geolocationPermission")&&(r(!0),l("granted"))},[n]),{isCelsius:e,hasGeolocationPermission:c,flippingCard:o?"rotate-y-180":"rotate-y-0",requestGeolocationPermission:()=>{g&&navigator.permissions.query({name:"geolocation"}).then(f=>{f.state==="granted"?(l("granted"),r(!0),localStorage.setItem("geolocationPermission","granted"),navigator.geolocation.getCurrentPosition(y=>{const E={lat:y.coords.latitude,lon:y.coords.longitude};i(E),m(E)})):f.state==="prompt"?(l("prompt"),navigator.geolocation.getCurrentPosition(y=>{r(!0),localStorage.setItem("geolocationPermission","granted");const E={lat:y.coords.latitude,lon:y.coords.longitude};i(E),m(E)},y=>{switch(r(!1),y.code){case y.PERMISSION_DENIED:console.error("User denied access to geolocation");break;case y.POSITION_UNAVAILABLE:console.error("Geolocation information is unavailable");break;case y.TIMEOUT:console.error("Geolocation access request timed out");break;default:console.error("An unknown error occurred while getting geolocation");break}})):(r(!1),l("denied"),localStorage.removeItem("geolocationPermission"))})},toggleTemperatureScale:()=>{t(!e)},flipWeatherDetails:()=>{s(!o)},showButtonText:()=>{let f="Give permission for your geolocation";return n==="prompt"?f="Give permission for your geolocation":c?f="Get the weather for your region":n==="denied"&&(f="Permission denied"),f},statePermission:n}},pe=({showError:e})=>{const{requestGeolocationPermission:t,showButtonText:o}=J(),s=e?"Server error. Please try again later when you reload the page":"What a pity, this could be your weather";return a.createElement(a.Fragment,null,a.createElement("h2",{className:"text-medium text-whiteBase md:text-2xl lg:text-4xl"},s),a.createElement("div",{className:`my-auto ${e?"flex justify-center":""}`},a.createElement(I,{svgName:"moon",size:u.ultraIcon156,className:"fill-transparent stroke-greyBase"})),!e&&a.createElement(U,{id:"Geolocation permission button",variant:G.Primary,onHandleClick:t,classNameButton:"border border-solid border-whiteBase"},o()))},fe=({toggleTemperatureScale:e,currentWeather:t,isCelsius:o})=>{var n,l,c,r,i,m,g,p;const{isMobile:s}=$();return a.createElement("div",{className:"mx-auto flex cursor-pointer items-center justify-evenly gap-5",onClick:e},a.createElement("div",{className:'relative w-83px text-center after:absolute after:-right-2 after:top-0 after:h-full after:w-px after:bg-white after:content-[""] md:w-96px'},a.createElement("p",{className:"w-full font-weather text-monstrous text-contrastWhite md:text-[64px]"},(t==null?void 0:t.main)!==void 0&&(o?Math.round((n=t==null?void 0:t.main)==null?void 0:n.temp)+"°":Math.round(((l=t==null?void 0:t.main)==null?void 0:l.temp)*9/5+32)+"°"))),a.createElement("div",null,(t==null?void 0:t.weather)&&((c=t==null?void 0:t.weather[0])==null?void 0:c.main)&&a.createElement("p",{className:"font-weather text-3xl text-contrastWhite md:text-4.5xl"},(r=t==null?void 0:t.weather[0])==null?void 0:r.main),a.createElement("p",{className:"mb-2.5 font-weather text-base text-contrastWhite md:text-2xl"},"Feels like"," ",o?((i=t==null?void 0:t.main)==null?void 0:i.feels_like)&&Math.round((m=t==null?void 0:t.main)==null?void 0:m.feels_like)+"°C":((g=t==null?void 0:t.main)==null?void 0:g.feels_like)&&Math.round(((p=t==null?void 0:t.main)==null?void 0:p.feels_like)*9/5+32)+"°F"),a.createElement("div",{className:"flex items-center gap-1 rounded-lg bg-weatherForeground px-2 py-[9px] text-contrastWhite md:gap-2 md:pb-[9px] md:pl-[7px] md:pr-[17px] md:pt-[10px]"},a.createElement(I,{svgName:"location",size:s?u.smIcon20:u.mdIcon27,className:"fill-whiteBase"}),a.createElement("p",{className:"text-base text-contrastWhite md:text-2xl"},t==null?void 0:t.name))))},xe={"-43200":"-12:00","-39600":"-11:00","-36000":"-10:00","-34200":"-09:30","-32400":"-09:00","-28800":"-08:00","-25200":"-07:00","-21600":"-06:00","-18000":"-05:00","-16200":"-04:30","-14400":"-04:00","-12600":"-03:30","-10800":"-03:00","-7200":"-02:00","-3600":"-01:00",0:"00:00",3600:"+01:00",7200:"+02:00",10800:"+03:00",12600:"+03:30",14400:"+04:00",16200:"+04:30",18e3:"+05:00",19800:"+05:30",20700:"+05:45",21600:"+06:00",23400:"+06:30",25200:"+07:00",28800:"+08:00",32400:"+09:00",34200:"+09:30",36e3:"+10:00",37800:"+10:30",39600:"+11:00",41400:"+11:30",43200:"+12:00",45900:"+12:45",46800:"+13:00",50400:"+14:00"};function j(e){const t=new Date(e*1e3),o=t.getHours(),s=t.getMinutes(),n=String(o).padStart(2,"0"),l=String(s).padStart(2,"0");return`${n}:${l}`}function ye(e){const t=String(e);return xe[t]}function Q(e){const t=e*.75006;return Math.floor(t)}function be(e){return e/1e3}function Ee(e){let t;const o=[{min:0,max:.2,scale:"0"},{min:.3,max:1.5,scale:"1"},{min:1.6,max:3.3,scale:"2"},{min:3.4,max:5.4,scale:"3"},{min:5.5,max:7.9,scale:"4"},{min:8,max:10.7,scale:"5"},{min:10.8,max:13.8,scale:"6"},{min:13.9,max:17.1,scale:"7"},{min:17.2,max:20.7,scale:"8"},{min:20.8,max:24.4,scale:"9"},{min:24.5,max:28.4,scale:"10"},{min:28.5,max:32.6,scale:"11"},{min:32.7,max:Number.MAX_SAFE_INTEGER,scale:"12"}];return e&&(t=o.find(s=>e>=s.min&&e<=s.max)),t?t==null?void 0:t.scale:""}function Se(){const e=new Date,t=e.getHours(),o=e.getMinutes(),s=c=>c<10?`0${c}`:c.toString(),n=s(t),l=s(o);return`${n}:${l}`}function we(){const e={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday"},t=new Date,o=e[t.toDateString().slice(0,3)],s=Se(),n=t.toDateString().slice(4).slice(0,4),l=t.toDateString().slice(8).slice(0,2),c=t.toDateString().slice(11),r=`${s} | ${l} ${n} ${c}`;return{days:o,dateNow:r}}const ke=(e,t)=>{var s,n,l,c,r,i,m;return[{icon:"earth",iconSize:e?u.xsIcon16:u.mdIcon24,value:`${ye(t==null?void 0:t.timezone)}`,label:"Greenwich mean time",hint:"GMT time",justifyItemClass:"justify-start",subTextValue:"UTC"},{icon:"humidity",iconSize:e?u.smIcon18:u.lgIcon30,value:`${(s=t==null?void 0:t.main)==null?void 0:s.humidity}`,label:"Humidity in percent",hint:"Humidity (%)",justifyItemClass:"justify-end",subTextValue:"%"},{icon:"pressure",iconSize:e?u.smIcon18:u.lgIcon30,value:`${Q((n=t==null?void 0:t.main)==null?void 0:n.pressure)}`,label:"Atmospheric pressure in mm Hg",hint:"Atmospheric pressure (mm.Hg)",justifyItemClass:"justify-start",subTextValue:"mm.Hg"},{icon:"pressure",iconSize:e?u.smIcon18:u.lgIcon30,value:`${(l=t==null?void 0:t.main)==null?void 0:l.pressure}`,label:"Atmospheric pressure in hPa",hint:"Atmospheric pressure (HPa)",justifyItemClass:"justify-end",subTextValue:"hPa"},{icon:"sunrise",iconSize:e?u.smIcon20:u.lgIcon30,value:`${j((c=t==null?void 0:t.sys)==null?void 0:c.sunrise)}`,label:"Sunrise time",hint:"Sunrise time",justifyItemClass:"justify-start",subTextValue:"AM"},{icon:"sunset",iconSize:e?u.smIcon20:u.lgIcon30,value:`${j((r=t==null?void 0:t.sys)==null?void 0:r.sunset)}`,label:"Sunset time",hint:"Sunset time",justifyItemClass:"justify-end",subTextValue:"PM"},{icon:"eye-opened",iconSize:e?u.smIcon20:u.lgIcon30,value:`${be(t==null?void 0:t.visibility)}`,label:"Road visibility",hint:"Road visibility",justifyItemClass:"justify-start",subTextValue:"km"},{icon:"weather-wind",iconSize:e?u.smIcon20:u.lgIcon30,value:`${(i=t==null?void 0:t.wind)==null?void 0:i.speed}`,label:"Wind speed in metre per seconds",hint:`Wind speed (m/s). (${Ee((m=t==null?void 0:t.wind)==null?void 0:m.speed)} on the Beaufort scale)`,justifyItemClass:"justify-end",subTextValue:"m/s"}]},Be=()=>[{label:"Temperature in °C",icon:"thermometer",iconSize:u.mdIcon24,iconColorStyles:"fill-whiteBase",renderCell:Te},{label:"Precipitation and weather",icon:"sun",iconSize:u.mdIcon24,iconColorStyles:"stroke-whiteBase fill-transparent",renderCell:De},{label:"Humidity (%)",icon:"humidity",iconSize:u.mdIcon28,iconColorStyles:"fill-whiteBase",renderCell:Ae},{label:"Pressure (mm.Hg)",icon:"pressure",iconSize:u.mdIcon24,iconColorStyles:"fill-whiteBase",renderCell:He},{label:"Wind speed (m/s)",icon:"weather-wind",iconSize:u.mdIcon24,iconColorStyles:"fill-whiteBase",renderCell:Pe}],Ce=()=>{const{hourlyWeather:e}=P(),{isMobile:t}=$(),o=Be();return a.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full bg-accentBase duration-500 ease-in backface-hidden rotate-y-180"},a.createElement("table",{className:"h-full min-w-full border-separate border border-transparent bg-accentBase"},a.createElement("thead",{className:"h-10"},a.createElement(R,{label:"Time",side:"top",sideOffset:0,ariaLabel:"Time interval (3 hours)"},a.createElement("tr",null,a.createElement("th",{className:"w-10 pr-2"},a.createElement(I,{svgName:"time",size:t?u.smIcon20:u.mdIcon24,className:"fill-whiteBase"})),e&&Array.isArray(e)&&(e==null?void 0:e.map(s=>{const n=j(s==null?void 0:s.dt);return a.createElement("th",{key:s==null?void 0:s.dt,scope:"col",className:"-rotate-90 whitespace-nowrap text-center text-small text-whiteBase md:text-base hg:text-xl"},n)}))))),a.createElement("tbody",null,o.map(({label:s,icon:n,iconColorStyles:l,iconSize:c,renderCell:r})=>a.createElement(R,{key:n,label:s,side:"top",sideOffset:0,ariaLabel:`Info about ${s} by time interval`},a.createElement("tr",null,a.createElement("th",{scope:"row",className:"w-10 pr-2"},a.createElement(I,{svgName:n,size:t?u.smIcon20:c,className:l})),e&&Array.isArray(e)&&e.map(i=>a.createElement(a.Fragment,{key:i==null?void 0:i.dt},r(i)))))))))},Ie=()=>{const{currentWeather:e}=P(),{isMobile:t}=$(),{days:o,dateNow:s}=we(),n=ke(t,e);return a.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full flex-col justify-between gap-3 backface-hidden"},a.createElement("div",{className:"mb-3 text-center hg:mb-5"},a.createElement("p",{className:"font-weather text-3.5xl text-contrastWhite md:text-4.5xl hg:text-5xl"},o),a.createElement("p",{className:"text-2.5xl font-weather text-contrastWhite md:text-3.5xl"},s)),a.createElement("ul",{className:"grid grid-cols-2 grid-rows-2 gap-y-3.5"},Array.isArray(n)&&n.map(({icon:l,iconSize:c,value:r,label:i,hint:m,justifyItemClass:g,subTextValue:p})=>a.createElement("li",{key:i},a.createElement(R,{label:m,side:"top",align:g==="justify-end"?"end":"start",sideOffset:4,ariaLabel:`Info about ${i} for current time`},a.createElement("div",{className:` flex items-center gap-3 text-base text-contrastWhite md:text-medium hg:text-2xl ${g}`},a.createElement("div",{className:`${g==="justify-end"?"order-last":"order-1"}`},a.createElement(I,{svgName:l,size:c,className:"fill-whiteBase"})),a.createElement("p",{className:"flex items-baseline gap-x-1 even:order-1"},r,a.createElement("span",{className:"text-xs hg:text-small"},p))))))))},v="py-1.5 text-center text-small text-whiteBase md:py-4 md:text-base hg:text-medium",Te=e=>{var t;return a.createElement("td",{className:`${v}`},Math.ceil((t=e==null?void 0:e.main)==null?void 0:t.temp),"°C")},De=e=>{var t,o,s,n;return a.createElement("td",{className:"h-35px"},a.createElement("img",{className:"cover",src:`https://openweathermap.org/img/wn/${(o=(t=e==null?void 0:e.weather)==null?void 0:t[0])==null?void 0:o.icon}@2x.png`,alt:(n=(s=e==null?void 0:e.weather)==null?void 0:s[0])==null?void 0:n.description}))},Ae=e=>{var t;return a.createElement("td",{className:`${v}`},(t=e==null?void 0:e.main)==null?void 0:t.humidity)},He=e=>{var t;return a.createElement("td",{className:`${v}`},Q((t=e==null?void 0:e.main)==null?void 0:t.pressure))},Pe=e=>{var t;return a.createElement("td",{className:`${v}`},(t=e==null?void 0:e.wind)==null?void 0:t.speed)},Fe=()=>{var d,h,x;const{hasGeolocationPermission:e,isCelsius:t,flippingCard:o,toggleTemperatureScale:s,flipWeatherDetails:n}=J(),{isWeatherLoading:l,currentWeather:c,weatherError:r}=P(),i=c&&Object.keys(c).length===0,m=l&&e,g=r&&((d=r==null?void 0:r.cod)==null?void 0:d.includes("5")),p=`${!l&&i&&!g?"flex flex-col items-center justify-between px-6 py-10 text-center md:px-10":g?"px-6 py-10 text-center md:px-10":"px-5 py-8 md:px-8 md:pt-10 hg:pt-8"}  h-full w-full bg-accentBase hg:w-442px`;return a.createElement("div",{className:`${p}`},!l&&i||g?a.createElement(pe,{showError:g}):m?a.createElement(V,{variant:"element"}):!l&&!i&&e&&a.createElement(a.Fragment,null,a.createElement(fe,{toggleTemperatureScale:s,currentWeather:c,isCelsius:t}),(c==null?void 0:c.weather)&&(c==null?void 0:c.weather[0].icon)&&a.createElement("img",{className:"m-auto h-32 w-32 md:h-165px md:w-165px hg:h-180px hg:w-180px",src:`https://openweathermap.org/img/wn/${c==null?void 0:c.weather[0].icon}@2x.png`,alt:(x=(h=c==null?void 0:c.weather)==null?void 0:h[0])==null?void 0:x.description}),a.createElement("div",{className:"h-56 w-full cursor-pointer perspective-10",onClick:n},a.createElement("div",{className:`grid h-full w-full grid-cols-1 grid-rows-1 transition-transform transform-style-3d ${o}`},a.createElement(Ie,null),a.createElement(Ce,null)))))},Le=({isArchiveActive:e,isAuthenticated:t,liveNews:o,savedNews:s,allArchive:n})=>{const[l,c]=S.useState(()=>g()),[r,i]=S.useState(()=>p());S.useEffect(()=>{if(t){if(e){if(e&&n&&n.length!==0){const d=n.find(h=>h.newsUrl===o.newsUrl);m(d)}}else if(s&&(o==null?void 0:o.newsUrl)!==void 0&&(s==null?void 0:s.length)!==0){const d=s==null?void 0:s.find(h=>h.newsUrl===(o==null?void 0:o.newsUrl));m(d)}}},[s,n,t,o]);function m(d){const h=d==null?void 0:d.isFavourite,x=d==null?void 0:d.hasRead;c(h??!1),i(x??!1)}function g(){const h=(e?n:s).find(x=>x.newsUrl===(o==null?void 0:o.newsUrl));return(h==null?void 0:h.isFavourite)??!1}function p(){const h=(e?n:s).find(x=>x.newsUrl===(o==null?void 0:o.newsUrl));return(h==null?void 0:h.hasRead)??!1}return{isFavourite:l,hasRead:r,setIsFavourite:c,setHasRead:i}},Re=({isArchiveActive:e,liveNews:t,setIsFavourite:o,setHasRead:s})=>{const[n,l]=S.useState(!1),[c,r]=S.useState(!1),{savedNews:i,updateSavedNews:m,addVotedNews:g,removeNews:p,removeFavouriteNews:d}=T(),{showToast:h}=K(),{setIsScrollDisabled:x}=se();S.useEffect(()=>{n&&i&&(g(i),l(!1))},[n,g]);const w=i&&t&&(t==null?void 0:t.newsUrl)!==void 0&&!e,f=i==null?void 0:i.find(b=>b.newsUrl===t.newsUrl),y=f==null?void 0:f.isFavourite,E=f==null?void 0:f.hasRead,D=new Date().getTime(),A=()=>{o(!0);const b={...t,isFavourite:!0,additionDate:D};m(b)},F=()=>{if(o(!y),!y&&E){const b={...t,isFavourite:!0};m(b)}else if(y&&!E){const b={...t,isFavourite:!1,hasRead:E,additionDate:null};m(b),d((t==null?void 0:t.newsUrl)||"")}else if(y&&E){const b={...t,isFavourite:!1,hasRead:E};m(b),d((t==null?void 0:t.newsUrl)||"")}},q=b=>{b.stopPropagation(),b.preventDefault(),w&&(k(),i.length===0||!f?A():F())},M=S.useCallback(()=>{if(w){if(i.length===0||!f){s(!0),k();const b={...t,hasRead:!0,additionDate:D};m(b)}else if(!E&&y){s(!0),k();const b={...t,hasRead:!0};m(b)}else if(E===!0)return}},[e,k,i,m]);function k(){l(!0)}return{isDeleted:c,handleChangeFavourites:q,handleReadNews:M,handleDeleteNews:async(b,N)=>{b.stopPropagation(),b.preventDefault();const W=await p(N);h(W.meta.requestStatus),r(!0),x(!1)}}},$e=({liveNews:e,isArchiveActive:t})=>{const{savedNews:o,allArchive:s}=T(),{isAuthenticated:n}=O(),{isFavourite:l,hasRead:c,setIsFavourite:r,setHasRead:i}=Le({isArchiveActive:t,isAuthenticated:n,liveNews:e,savedNews:o,allArchive:s}),{isDeleted:m,handleChangeFavourites:g,handleReadNews:p,handleDeleteNews:d}=Re({isArchiveActive:t,isAuthenticated:n,liveNews:e,setIsFavourite:r,setHasRead:i});return{isFavourite:l,hasRead:c,isDeleted:m,handleChangeFavourites:g,handleReadNews:p,handleDeleteNews:d}},ve=({myButtonRef:e,handleOpenConfirm:t})=>a.createElement(R,{label:"Delete news from archive",side:"bottom",sideOffset:16,ariaLabel:"Delete news from archive"},a.createElement("div",null,a.createElement(U,{ref:e,onHandleClick:t,variant:G.Small,hasIcon:!0,svgName:"close",svgSize:u.mdIcon24,classNameIcon:"stroke-whiteBase",ariaLabel:"Delete news from archive button",classNameButton:"absolute z-40 top-3 right-3 bg-accentBase/[.8] py-1.5"}))),ze=({handleDeleteNews:e,handleClose:t,newsId:o})=>{const n=[{onClick:l=>t(l,!1),id:"Cancel deletion the news",label:"Cancel",icon:"reset"},{onClick:async l=>{await e(l,o)},id:"Delete selected news",label:"Delete",icon:"trash"}];return a.createElement("div",null,a.createElement("h3",{className:"mb-4 text-2xl text-darkBase dark:text-whiteBase md:mb-6 md:text-4xl"},"Delete news"),a.createElement("p",{className:"mb-6 text-medium text-darkBase dark:text-whiteBase md:mb-10 md:text-xl"},"Are you sure you want to delete this news?"),a.createElement("ul",{className:"max-md:space-y-4 md:flex md:items-center md:justify-between md:gap-8"},n.map(({onClick:l,id:c,label:r,icon:i})=>a.createElement("li",{key:r,className:"w-full"},a.createElement(U,{variant:G.Primary,onHandleClick:l,hasIcon:!0,id:c,svgName:i,svgSize:u.smIcon18,classNameIcon:"fill-whiteBase",classNameButton:"md:text-xl border border-whiteBase"},r)))))},Me=({liveNews:e})=>{const{wideScreens:t}=$();return a.createElement("div",{className:"mt-4 px-4"},a.createElement("p",{className:"mb-2 line-clamp-1 text-end text-small leading-tight text-darkBase dark:text-whiteBase lg:text-base hg:text-medium"},e!=null&&e.author?`By ${e==null?void 0:e.author}`:`${e==null?void 0:e.materialType}`),a.createElement("h2",{className:"mb-4 line-clamp-3 h-100px text-3xl font-bold leading-tight tracking-mediumTight dark:text-whiteBase md:h-132px md:text-4xl md:tracking-tighter hg:h-[120px] hg:text-3.5xl"},e==null?void 0:e.title),a.createElement("p",{className:"mb-4 line-clamp-3 h-57px text-base leading-tight text-darkBase dark:text-whiteBase md:h-66px md:text-medium hg:h-[72px] hg:text-xl"},e==null?void 0:e.description),a.createElement("div",{className:"flex justify-between"},a.createElement("p",{className:"text-base text-greyAlt md:text-medium hg:text-xl"},e==null?void 0:e.publishDate),a.createElement("div",{className:"flex translate-x-full items-center gap-2 rounded-2xl bg-accentAlt pr-2 transition-all group-hover:translate-x-0 group-hover:bg-accentAlt dark:bg-transparent "},a.createElement(I,{svgName:"triangle-double",size:t?u.smIcon20:u.xsIcon16,className:"fill-whiteBase"}),a.createElement("p",{className:"text-base text-whiteBase transition-colors md:text-medium hg:py-px hg:text-xl"},"Click for read more..."))))},je=({onHandleClick:e,isFavourite:t,buttonData:o})=>{const{isArchiveActive:s}=B(),l=`absolute bottom-3 right-2 z-20 flex items-center gap-x-1 rounded-3xl bg-contrastWhite px-3 py-1.5 ${t?"fill-accentBase stroke-accentBase":"stroke-accentBase fill-none"} ${s?"":"group hover:bg-accentBase hover:text-whiteBase"} text-small font-medium text-darkBase transition-colors duration-500 lg:text-medium`;return a.createElement("button",{id:o==null?void 0:o.id,type:"button",className:`${l}`,onClick:e},s?t?"Favourited":"Not in favourites":t?"Remove from favorite":"Add to favorite",a.createElement(I,{svgName:"heart",size:u.xsIcon16,className:`fill-inherit ${s?"":"group-hover:stroke-whiteBase"} `}))},Ue=({liveNews:e={}})=>{const t=a.createRef(),{isAuthenticated:o}=O(),{isOpenModal:s,toggleModal:n,popUpRef:l}=ne(),{isHomeActive:c,isArchiveActive:r}=B(),{isFavourite:i,hasRead:m,handleChangeFavourites:g,handleReadNews:p,handleDeleteNews:d}=$e({liveNews:e,isArchiveActive:r}),h=async w=>{e._id&&await d(w,e._id)},x=c||r;return a.createElement(a.Fragment,null,(e==null?void 0:e.newsUrl)&&a.createElement("a",{rel:"noopener noreferrer nofollow",className:"group block transition-colors",href:e.newsUrl,target:"_blank",onClick:o?p:void 0},a.createElement("div",{className:`${o&&m&&x?"absolute z-20 h-full w-full bg-whiteBase/[.4]":"hidden"}`}),r?a.createElement(ve,{myButtonRef:t,handleOpenConfirm:w=>n(w,!0)}):null,a.createElement("p",{className:"absolute left-0 top-10 z-20 rounded-r bg-accentBase/[.7] px-2 py-1 text-small font-medium text-contrastWhite hg:text-medium"},e==null?void 0:e.category," / ",e==null?void 0:e.materialType),o&&m&&a.createElement("p",{className:"absolute right-14 top-3.5 z-10 flex items-center gap-1 text-base font-bold text-readBase md:top-5"},"Already read",a.createElement(I,{svgName:"check",size:u.smIcon18,className:"fill-readBase"})),a.createElement("div",{className:"relative flex h-395px items-center justify-center overflow-hidden rounded-[10px]"},a.createElement("p",{className:"absolute bottom-3 left-3 z-10 text-darkBase opacity-0 drop-shadow-lg transition-opacity group-hover:opacity-100 dark:text-whiteBase"},e==null?void 0:e.edition),e&&(e!=null&&e.imgLink)?a.createElement("img",{loading:"lazy",className:"absolute h-full max-w-none rounded-xl object-cover",src:e==null?void 0:e.imgLink,alt:e!=null&&e.imgAlt?e==null?void 0:e.imgAlt:"plug image"}):a.createElement(Z,{variant:"card"}),o&&a.createElement(a.Fragment,null,a.createElement(je,{onHandleClick:g,isFavourite:i,buttonData:{id:`Add ${e==null?void 0:e.title} to favourites or remove from them`}}))),a.createElement(Me,{liveNews:e})),s&&a.createElement(le,{closeModal:n,modalRef:l},a.createElement(ze,{handleDeleteNews:h,newsId:e._id,handleClose:w=>n(w)})))},qe=({currentItems:e,currentPage:t})=>{const{isWeatherLoading:o}=P(),{isFavoriteActive:s}=B(),n=`${s?"mb-0":"mb-10 md:mb-12 lg:mb-[60px]"} max-md:space-y-7 md:grid md:grid-cols-2 md:gap-[30px] lg:grid-cols-3 lg:gap-x-8 lg:gap-y-10 hg:gap-10`,l=c=>`relative h-655px w-72 overflow-hidden rounded-[10px] shadow-card transition-colors dark:shadow-darkCard md:h-700px md:w-353px lg:w-395px hg:w-442px ${c===0&&"md:col-start-1 md:row-start-1 lg:col-start-1"} ${c===1&&"lg:col-start-2 lg:row-start-1"}`;return a.createElement("ul",{className:`${n}`},t&&t===1&&a.createElement("li",{className:"overflow-hidden rounded-[10px] shadow-card transition-colors dark:shadow-darkCard max-md:h-515px md:col-start-2 lg:col-start-3"},o?a.createElement(V,{variant:"element"}):a.createElement(Fe,null)),e&&e.map((c,r)=>a.createElement("li",{key:c.newsUrl,className:l(r)},a.createElement(Ue,{liveNews:c}))))},z=()=>{const{hasResults:e}=_(),{isLoadingAPIData:t}=H(),{isLoadingDBData:o}=T(),{isHomeActive:s,isFavoriteActive:n,isReadActive:l,isArchiveActive:c}=B(),r=o||e==="loading",i=t||r;return{commonDBLoader:r,isHomeLoader:i,shouldShowLoader:s&&i||(n||l)&&r||c&&o}},Y=()=>{const e=B(),{rebuildedNews:t}=X(e),{hasResults:o}=_(),{errorAPI:s}=H(),{allArchive:n,archiveHistoryLog:l,isLoadingDBData:c}=T(),{isHomeLoader:r,commonDBLoader:i}=z(),{isHomeActive:m,isFavoriteActive:g,isReadActive:p,isArchiveActive:d}=e,h=s==null?void 0:s.toString().includes("429"),x=(t==null?void 0:t.length)===0||o==="empty",w=x||h,f=n.length===0&&l.length===0;return{isHomePlug:w,commonPlug:x,shouldShowPlug:m&&w&&!r||(g||p)&&x&&!i||d&&f&&!c}},Ge=()=>{const e=B(),{isHomeLoader:t,commonDBLoader:o}=z(),{isHomePlug:s,commonPlug:n}=Y(),{allArchive:l,isLoadingDBData:c}=T(),{isArchiveActive:r,isFavoriteActive:i,isHomeActive:m,isReadActive:g}=e,p=m&&!t&&!s,d=(i||g)&&!o&&!n,h=r&&!c&&(l==null?void 0:l.length)>0;return{shouldShowContent:p||d||h}},Ve=()=>{const e=B(),{filteredNews:t}=_(),{isArchiveActive:o,isFavoriteActive:s,isHomeActive:n,isReadActive:l}=e,{errorAPI:c,newsByKeyword:r,newsByCategory:i,newsByDate:m}=H(),{authError:g}=O(),{allFavourites:p,allReads:d,dbSuccessMessage:h}=T(),{isHomeLoader:x,commonDBLoader:w}=z(),f=r&&r.length>0||i&&i.length>0||m&&m.length>0,y=!!g||!!c,E=!x&&f||(t==null?void 0:t.length)>0,D=s&&!w&&(p==null?void 0:p.length)>0,A=l&&!w&&(d==null?void 0:d.length)>0,F=o&&h==="Remove news success",M=n&&(y||E)||D||A||F;let k,C;switch(!0){case(n&&y):k="error",C="interactive";break;case(n&&E):k="info",C="non-interactive";break;case(s&&D):k="info",C="non-interactive";break;case(l&&A):k="info",C="non-interactive";break;case(o&&F):k="success",C="interactive";break;default:k="info",C="non-interactive";break}return{shouldShowToast:M,statusToast:k,toastType:C}},Ke=({children:e})=>{const{errorDB:t}=T(),{errorAPI:o}=H(),{setOpenToast:s}=K(),n=B(),{rebuildedNews:l}=X(n),{shouldShowLoader:c}=z(),{shouldShowPlug:r}=Y(),{shouldShowContent:i}=Ge(),{shouldShowToast:m,statusToast:g,toastType:p}=Ve(),d=ce();return S.useEffect(()=>{(t&&typeof t=="number"&&t>=500||o&&o>=500)&&d("/serverError")},[t,o]),S.useEffect(()=>{(l==null?void 0:l.length)>0&&s(!0)},[]),a.createElement(a.Fragment,null,c&&a.createElement(V,{variant:"generalSection"}),m&&a.createElement(re,{variant:p,status:g}),r&&a.createElement(Z,{variant:"page"}),i&&e)};export{qe as N,Ke as P};
