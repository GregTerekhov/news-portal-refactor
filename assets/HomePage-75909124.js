import{u as N,a as d,b as x,c as O,r as P,R as r,P as S,V as w,d as G,e as H,f as D,g as M}from"./index-b2e8263d.js";import{P as K,N as Q}from"./PageTemplate-1708b79f.js";import"./images-86dfda53.js";import"./Toast-23ad4e8a.js";const f={FIRST_MOBILE_PAGE_COUNT:4,FIRST_TABLET_PAGE_COUNT:7,FIRST_DESKTOP_PAGE_COUNT:8,OTHER_MOBILE_PAGE_COUNT:5,OTHER_TABLET_PAGE_COUNT:8,OTHER_DESKTOP_PAGE_COUNT:9},h=1,B={DESKTOP_BUTTONS_QUANTITY:3,MOBILE_BUTTONS_QUANTITY:6},Y=(t,o,n)=>{const e=[o];let a=t-o;for(;a>0;)e.push(n),a-=n;return e},W=(t,o)=>{const n=t&&t.slice(0,-1).reduce((a,c)=>a+c,0);return o-n},$=(t,o,n)=>Y(t,o,n),b=(t,o)=>{try{return W(t,o)}catch(n){return console.error(n.message)}},V=(t,o,n,e,a)=>{const c=o.length,i=t-1,u=t+1,T=n?B.MOBILE_BUTTONS_QUANTITY:B.DESKTOP_BUTTONS_QUANTITY,s=[];if(c<=T)for(let E=h;E<=c;E+=1)s.push(e(E));else t===h?(s.push(e(t)),s.push(e(u)),s.push(a("next")),s.push(e(c))):t===c?(s.push(e(h)),s.push(a("prev")),s.push(e(i)),s.push(e(t))):t>h&&t<c&&(t===2&&(s.push(a("prev")),s.push(e(t)),s.push(e(u)),s.push(a("next")),s.push(e(c))),t-1>h&&t+1!==c&&(s.push(a("prev")),s.push(e(i)),s.push(e(t)),s.push(e(u)),s.push(a("next"))),t+1===c&&(s.push(a("prev")),s.push(e(i)),s.push(e(t)),s.push(e(c))));return s},j=t=>{const{popularNews:o,newsByKeyword:n,newsByCategory:e,newsByDate:a}=N(),{filteredNews:c}=d(),{isMobile:i,isTablet:u}=x(),{currentPage:T}=O(),[s,E]=P.useState([]),l=t&&(t==null?void 0:t.length)||0,C=R(),U=k(),A=$(l,C,U),_=A[T-1]||0,I=b(A,l);P.useEffect(()=>{if(t&&(t==null?void 0:t.length)>0){const g=T*_-h>=l;let m,p;T===h?(m=T*_,p=m-_):T>h&&g&&I?(m=l,p=l-I):(m=T*_-h,p=m-_);const L=t.slice(p,m);E(L)}},[o,n,e,a,c,T]);function R(){return i?f.FIRST_MOBILE_PAGE_COUNT:u?f.FIRST_TABLET_PAGE_COUNT:f.FIRST_DESKTOP_PAGE_COUNT}function k(){return i?f.OTHER_MOBILE_PAGE_COUNT:u?f.OTHER_TABLET_PAGE_COUNT:f.OTHER_DESKTOP_PAGE_COUNT}const y=Math.ceil(T!==1&&i?l/_+1:l/_),F=Array.from({length:y},(g,m)=>m+1);return{currentItems:s,pageNumbers:F}},v=({direction:t,pageNumbers:o,handlePrevClick:n,handleNextClick:e})=>{const{isNotMobile:a}=x(),{currentPage:c}=O(),i=c-1===0,u=c===(o==null?void 0:o.length);return r.createElement(S,{id:`${t} page button`,variant:w.Other,onHandleClick:t==="Prev"?n:e,width:"w-32",disabled:t==="Prev"?i:u,hasIcon:!0,svgName:"arrow",svgSize:"xsIcon14",classNameIcon:`${t==="Prev"?"rotate-90":"-rotate-90"}  fill-whiteBase`,classNameButton:t==="Prev"?"flex-row-reverse":""},a?r.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},t):null)},z=({pageNumber:t,onClick:o})=>{const{currentPage:n}=O(),e=`h-10 border-accentBase dark:border-whiteBase font-medium transition-colors duration-500 ${t===n?"bg-accentBase text-contrastWhite hocus:bg-accentAlt":"text-darkBase dark:text-whiteBase"}`;return r.createElement("li",{key:t,onClick:()=>o(t)},r.createElement(S,{"aria-label":`Page ${t.toString()} button`,classNameButton:`${e}`,variant:w.Small},t))},q=({pageNumbers:t})=>{const{isNotMobile:o}=x(),{currentPage:n,setCurrentPage:e}=O(),a=l=>r.createElement("li",{key:l,className:"text-darkBase dark:text-whiteBase"},"..."),c=l=>{e(l),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},i=()=>{n>1&&(e(n-1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))},u=()=>{n<t.length&&(e(n+1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))},E=V(n,t,o,l=>r.createElement(z,{pageNumber:l,onClick:c}),a).map((l,C)=>r.createElement(r.Fragment,{key:C},l));return r.createElement("div",{className:"flex items-center justify-center gap-2"},r.createElement(v,{direction:"Prev",handlePrevClick:i}),r.createElement("ul",{id:"page-numbers",className:"flex items-center gap-2"},E),r.createElement(v,{direction:"Next",pageNumbers:t,handleNextClick:u}))},J=1,st=()=>{const{fetchPopular:t}=N(),{getSavedNews:o}=G(),{isAuthenticated:n}=H(),{currentPage:e}=O(),a=D(),{rebuildedNews:c}=M(a),{currentItems:i,pageNumbers:u}=j(c??[]);return P.useEffect(()=>{t({period:J}),n&&o()},[t,o,n]),r.createElement(K,null,r.createElement(Q,{currentItems:i,currentPage:e}),r.createElement(q,{pageNumbers:u}))};export{st as default};
