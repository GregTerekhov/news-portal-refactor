import{j as h,k as v,R as e,S as N,u as B,C as k,r as E,U as w,l as L,d as D,A as S}from"./index-85bc09cb.js";import{P as A,N as C}from"./PageTemplate-3abf4b7c.js";import"./images-c2995247.js";import"./Toast-47d44cab.js";const p=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],T=r=>{const t={};return(r==null?void 0:r.length)>0&&r.forEach(o=>{const n=o==null?void 0:o.additionDate;if(n){const a=h(n,"LLLL yyyy",{locale:v});t[a]||(t[a]=[]),t[a].push(o)}}),t},f=({handlePageChange:r,currentPage:t,label:o,position:n,iconClass:a})=>{const s=n<t,c="group inline-flex items-center gap-x-2 rounded-full p-2.5 transition-colors duration-500 hocus:bg-accentBase disabled:pointer-events-none disabled:opacity-50 dark:hocus:bg-accentBase dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600";return e.createElement("button",{type:"button",onClick:()=>r(s?t-1:t+1),disabled:t===n,className:`${c}`},e.createElement("span",{"aria-hidden":"true"},e.createElement(N,{svgName:"arrow",sizeKey:"xsIcon14",className:`${a} fill-accentBase group-hover:fill-whiteBase group-focus:fill-whiteBase dark:fill-whiteBase`})),e.createElement("span",{className:"sr-only"},o))},I=({handlePageChange:r,currentPage:t,totalPages:o})=>{const n="flex w-10 h-10 items-center justify-center rounded-full py-2.5 text-small text-darkBase transition-colors duration-500 hocus:bg-accentBase hocus:text-whiteBase dark:text-whiteBase dark:hocus:bg-accentBase lg:text-medium";return e.createElement("nav",{className:"flex items-center space-x-1 px-4 py-2"},e.createElement(f,{handlePageChange:r,currentPage:t,label:"Previous",position:1,iconClass:"rotate-90"}),Array.from({length:o},(a,s)=>e.createElement("button",{key:s,type:"button","aria-current":"page",className:`${n} ${t===s+1?"bg-accentBase text-whiteBase":"bg-transparent text-darkBase dark:text-whiteBase"}`,onClick:()=>r(s+1)},s+1)),e.createElement(f,{handlePageChange:r,currentPage:t,label:"Next",position:o,iconClass:"-rotate-90"}))},_=60,$=87,R=({displayedRows:r})=>{const{wideScreens:t}=B(),o=a=>{let s;switch(!0){case t:s=$;break;default:s=_;break}return a.length>s?`${a.slice(0,s)}...`:a},n="whitespace-nowrap px-6 py-4 text-small font-medium text-darkBase dark:text-whiteBase lg:text-medium";return e.createElement(k,{isOpen:!0,orientation:"horizontal"},e.createElement("table",{className:"mb-2.5 min-w-full divide-y divide-greyAlt/[.4] transition-colors duration-500 dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] transition-colors duration-500 dark:bg-greyBase/[.4]"},e.createElement("tr",null,p==null?void 0:p.map(({label:a})=>e.createElement("th",{key:a,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase transition-colors duration-500 dark:text-whiteBase md:text-small lg:text-xl"},a)))),e.createElement("tbody",{className:"divide-y divide-whiteBase transition-colors duration-500 dark:divide-gray-700"},Array.isArray(r)&&r.map(a=>{const{title:s,newsUrl:c,category:i,additionDate:d,deletionDate:m}=a,u=h(d,"dd/MM/yyyy"),g=h(m,"dd/MM/yyyy");return e.createElement("tr",{key:c,className:"group even:bg-greyAlt/[.1]"},e.createElement("td",{className:`${n}`},e.createElement("a",{href:c,target:"_blank",className:"group-hocus:text-accentBase transition-colors duration-500 lg:text-medium"},o(s))),e.createElement("td",{className:`${n}`},i),e.createElement("td",{className:`${n}`},u),e.createElement("td",{className:`${n}`},g))}))))},y=7,M=({logData:r})=>{const[t,o]=E.useState(""),[n,a]=E.useState(1),s=t?r.filter(l=>l.title.toLowerCase().includes(t.toLowerCase())):r,c=s.length,i=Math.ceil(c/y),d=(n-1)*y,m=d+y,u=s.slice(d,m),g=l=>{const b=l.target.value;o(b),a(1)},x=l=>{l>=1&&l<=i&&a(l)};return e.createElement("div",{className:"mb-6 flex flex-col overflow-hidden rounded-lg shadow-modal"},e.createElement("div",{className:"inline-block min-w-full align-middle"},e.createElement("div",{className:"divide-y divide-greyAlt/[.4] overflow-hidden rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},e.createElement("div",{className:"px-4 py-3 lg:px-6 lg:py-5"},e.createElement("div",{className:"relative w-[254px] md:max-w-xs"},e.createElement(w,{inputData:{name:"Deleted news",type:"text",value:t,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"search",onChange:l=>g(l),variant:L.FilterServiceBlock}))),e.createElement(R,{displayedRows:u}),e.createElement(I,{handlePageChange:x,currentPage:n,totalPages:i}))))},G=()=>{const{allArchive:r,archiveHistoryLog:t,getHistoryLog:o,getArchives:n}=D();E.useEffect(()=>{n(),o()},[n,o]);const a=T(r);return e.createElement(A,null,e.createElement(M,{logData:t}),Object.entries(a).reverse().map(([s,c])=>e.createElement(S,{key:s,dateSeparator:s,position:"archivePage"},e.createElement(C,{currentItems:c}))))};export{G as default};
