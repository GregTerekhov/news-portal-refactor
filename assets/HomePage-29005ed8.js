import{u as d,a as F,b as L,r as v,R as o,P,V as R,I as D,c as M,d as U,e as G,f as H,g as K,h as W,L as $,T as N}from"./index-b1d6c337.js";import{P as Q,N as Y}from"./NewsList-1a71e96a.js";import"./images-9b9ce44d.js";const I=1,V=3,b=6,j=(t,e,a)=>{const s=[e];let c=t-e;for(;c>0;)s.push(a),c-=a;return s},q=(t,e)=>{const a=t&&t.slice(0,-1).reduce((c,l)=>c+l,0);return e-a},z=(t,e,a)=>j(t,e,a),Z=(t,e)=>{try{return q(t,e)}catch(a){return console.error(a.message)}},J=(t,e,a,s,c)=>{const l=e.length,r=t-1,h=t+1,i=a?b:V,n=[];if(l<=i)for(let p=I;p<=l;p+=1)n.push(s(p));else t===I?(n.push(s(t)),n.push(s(h)),n.push(c("next")),n.push(s(l))):t===l?(n.push(s(I)),n.push(c("prev")),n.push(s(r)),n.push(s(t))):t>I&&t<l&&(t===2&&(n.push(c("prev")),n.push(s(t)),n.push(s(h)),n.push(c("next")),n.push(s(l))),t-1>I&&t+1!==l&&(n.push(c("prev")),n.push(s(r)),n.push(s(t)),n.push(s(h)),n.push(c("next"))),t+1===l&&(n.push(c("prev")),n.push(s(r)),n.push(s(t)),n.push(s(l))));return n},X=4,tt=7,et=8,st=5,nt=8,at=9,ot=t=>{const{isMobile:e,isTablet:a}=d(),{popularNews:s,newsByKeyword:c,newsByCategory:l,newsByDate:r}=F(),{filteredNews:h}=L(),[i,n]=v.useState(1),[p,u]=v.useState([]),m=t&&(t==null?void 0:t.length)||0,T=w(),x=A(),O=z(m,T,x),f=O[i-1]||0,_=Z(O,m);v.useEffect(()=>{if(t&&(t==null?void 0:t.length)>0){const B=i*f-1>=m;let E,g;i===1?(E=i*f,g=E-f):i>1&&B&&_?(E=m,g=m-_):(E=i*f-1,g=E-f);const S=t.slice(g,E);u(S)}},[s,c,l,r,h,i]);function w(){return e?X:a?tt:et}function A(){return e?st:a?nt:at}const y=Math.ceil(i!==1&&e?m/f+1:m/f),C=Array.from({length:y},(B,E)=>E+1);return{currentItems:p,pageNumbers:C,currentPage:i,setCurrentPage:n}},k=({direction:t,currentPage:e,pageNumbers:a,handlePrevClick:s,handleNextClick:c})=>{const{isNotMobile:l}=d(),r=e-1===0,h=e===(a==null?void 0:a.length);return o.createElement(P,{id:`${t} page button`,variant:R.Other,onHandleClick:t==="Prev"?s:c,width:"w-32",disabled:t==="Prev"?r:h,hasIcon:!0,svgName:"icon-arrow",svgSize:D.xsIcon14,classNameIcon:`${t==="Prev"?"rotate-90":"-rotate-90"}  fill-whiteBase`,classNameButton:t==="Prev"?"flex-row-reverse":""},l?o.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},t):null)},ct=({pageNumber:t,currentPage:e,onClick:a})=>o.createElement("li",{key:t,onClick:()=>a(t)},o.createElement(P,{"aria-label":`Page ${t.toString()} button`,classNameButton:`h-10 border-accentBase font-medium transition-colors duration-500 ${t===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:R.Small},t)),lt=({pageNumbers:t,currentPage:e,setCurrentPage:a})=>{const{isNotMobile:s}=d();window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"});const c=u=>o.createElement("li",{key:u,className:"ellipsis"},o.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"...")),l=u=>{a(u)},r=()=>{e>1&&a(e-1)},h=()=>{e<t.length&&a(e+1)},p=J(e,t,s,u=>o.createElement(ct,{pageNumber:u,currentPage:e,onClick:l}),c).map((u,m)=>o.createElement(o.Fragment,{key:m},u));return o.createElement("div",{className:"flex items-center justify-center gap-2"},o.createElement(k,{direction:"Prev",currentPage:e,handlePrevClick:r}),o.createElement("ul",{id:"page-numbers",className:"flex gap-2"},p),o.createElement(k,{direction:"Next",pageNumbers:t,currentPage:e,handleNextClick:h}))},it=1,mt=()=>{const{isLoadingAPIData:t,errorAPI:e,headline:a,newsByCategory:s,newsByDate:c,newsByKeyword:l,fetchPopular:r}=F(),{isLoadingDBData:h,getSavedNews:i}=M(),{isAuthenticated:n,authError:p}=U(),{setOpenToast:u}=G(),m=H(),{rebuildedNews:T}=K({activeLinks:m}),{hasResults:x}=L(),{currentItems:O,currentPage:f,pageNumbers:_,setCurrentPage:w}=ot(T??[]),A=e==null?void 0:e.toString().includes("429"),y=W();v.useEffect(()=>{e&&e>=500&&y("/serverError")},[e]),v.useEffect(()=>{r(it),n&&i()},[r,i,n]),v.useEffect(()=>{(l||s||c)&&u(!0)},[l,s,c]);const C=t||h||x==="loading",B=(T==null?void 0:T.length)===0||x==="empty";console.log("hasResults",x);const E=l&&l.length>0||s&&s.length>0||c&&c.length>0,g=!C&&E,S=p||e;return console.log("rebuildedNews HOME_PAGE",T),o.createElement(o.Fragment,null,C?o.createElement($,{variant:"generalSection"}):o.createElement(o.Fragment,null,B||A?o.createElement(Q,{variant:"page"}):o.createElement(o.Fragment,null,a&&o.createElement("h2",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},a),o.createElement(Y,{currentItems:O,currentPage:f}),o.createElement(lt,{pageNumbers:_,currentPage:f,setCurrentPage:w}))),S?o.createElement(N,{variant:"interactive",status:"error"}):null,g?o.createElement(N,{variant:"non-interactive",status:"info"}):null)};export{mt as default};
