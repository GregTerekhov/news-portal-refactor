import{j as g,k as L,R as a,S as w,b as h,C as S,d as C,r as p,U as D,l as T,H as A,A as I}from"./index-e7c48632.js";import{P as $,N as M}from"./PageTemplate-dac01210.js";import"./images-47112fa2.js";import"./Toast-266ab3d2.js";const y=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],R=56,_=87,j=t=>{const s={};return(t==null?void 0:t.length)>0&&t.forEach(e=>{const n=e==null?void 0:e.additionDate;if(n){const l=g(n,"LLLL yyyy",{locale:L});s[l]||(s[l]=[]),s[l].push(e)}}),s},k=t=>g(t,"dd/MM/yyyy"),H=(t,s)=>{let e;switch(!0){case s:e=_;break;default:e=R;break}return t.length>e?`${t.slice(0,e)}...`:t},v=({handlePageChange:t,currentPage:s,label:e,position:n,iconClass:l})=>{const r=n<s,o="group inline-flex items-center gap-x-2 rounded-full p-2.5 transition-colors duration-500 hocus:bg-accentBase disabled:pointer-events-none disabled:opacity-50 dark:hocus:bg-accentBase dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600";return a.createElement("button",{type:"button",onClick:()=>t(r?s-1:s+1),disabled:s===n,className:`${o}`},a.createElement("span",{"aria-hidden":"true"},a.createElement(w,{svgName:"arrow",sizeKey:"xsIcon14",className:`${l} fill-accentBase group-hover:fill-whiteBase group-focus:fill-whiteBase dark:fill-whiteBase`})),a.createElement("span",{className:"sr-only"},e))},O=({currentPage:t,handlePageChange:s,totalPages:e})=>{const{isMobile:n}=h(),l=()=>{const o=[],m=(d,x)=>d===x?"bg-accentBase text-whiteBase":"bg-transparent text-darkBase dark:text-whiteBase",c=(d,x)=>{for(let f=d;f<=x;f+=1)o.push(a.createElement("button",{key:f,type:"button","aria-current":"page",className:`${r} ${m(t,f)}`,onClick:()=>s(f)},f))},i=d=>{o.push(a.createElement("span",{key:`dots${d}`,className:"flex w-10 items-center justify-center text-darkBase dark:text-whiteBase"},"..."))},u=()=>{o.push(a.createElement("button",{key:e,type:"button","aria-current":"page",className:`${r} ${m(t,e)}`,onClick:()=>s(e)},e))},b=t+2===e||t+1===e||t===e,E=t+3===e||t+2===e||t+1===e||t===e;return n?e<=4?c(1,e):t===1?(c(1,2),i("next"),u()):b?(i("prev"),c(e-2,e)):t+2<e&&(i("prev"),c(t,t),i("next"),u()):e<=5?c(1,e):t===1?(c(1,3),i("next"),u()):E?(i("prev"),c(e-3,e)):t+3<e&&(i("prev"),c(t,t+1),i("next"),u()),o},r="flex w-10 h-10 items-center justify-center rounded-full py-2.5 text-small text-darkBase transition-colors duration-500 hocus:bg-accentBase hocus:text-whiteBase dark:text-whiteBase dark:hocus:bg-accentBase lg:text-medium";return a.createElement(a.Fragment,null,l())},V=({handlePageChange:t,currentPage:s,totalPages:e})=>a.createElement("nav",{className:"flex items-center space-x-1 px-4 py-2"},a.createElement(v,{handlePageChange:t,currentPage:s,label:"Previous",position:1,iconClass:"rotate-90"}),a.createElement(O,{currentPage:s,totalPages:e,handlePageChange:t}),a.createElement(v,{handlePageChange:t,currentPage:s,label:"Next",position:e,iconClass:"-rotate-90"})),W=({displayedRows:t})=>{const{wideScreens:s}=h(),e="whitespace-nowrap px-6 text-small font-medium text-darkBase dark:text-whiteBase lg:text-medium";return a.createElement(S,{isOpen:!0,orientation:"horizontal"},a.createElement("table",{className:"mb-2.5 min-w-full divide-y divide-greyAlt/[.4] transition-colors duration-500 dark:divide-greyBase/[.4]"},a.createElement("thead",{className:"bg-accentBase/[.2] transition-colors duration-500 dark:bg-greyBase/[.4]"},a.createElement("tr",null,y==null?void 0:y.map(({label:n})=>a.createElement("th",{key:n,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase transition-colors duration-500 dark:text-whiteBase md:text-small lg:text-xl"},n)))),a.createElement("tbody",{className:"divide-y divide-whiteBase transition-colors duration-500 dark:divide-gray-700"},Array.isArray(t)&&t.map(({title:n,newsUrl:l,category:r,additionDate:o,deletionDate:m})=>a.createElement("tr",{key:l,className:"group even:bg-greyAlt/[.1]"},a.createElement("td",{className:`${e}`},a.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer nofollow",className:"block py-4 transition-colors duration-500 focus:text-accentBase group-hover:text-accentBase lg:text-medium"},H(n,s))),a.createElement("td",{className:`${e}`},r),a.createElement("td",{className:`${e}`},k(o)),a.createElement("td",{className:`${e}`},k(m)))))))},N=()=>{const{clearLog:t}=C(),{isNotMobile:s}=h();return a.createElement("button",{type:"submit",className:"group flex items-center gap-x-4 text-accentBase transition-colors duration-500 hocus:text-accentAlt dark:text-whiteBase dark:hocus:text-accentBase max-md:absolute max-md:right-0 max-md:top-0 max-md:h-10 max-md:w-10 max-md:justify-center",onClick:t},s?"Clear log":null,a.createElement(w,{svgName:"trash",sizeKey:"smIcon18",className:"fill-accentBase group-hover:fill-accentAlt group-focus:fill-accentAlt dark:fill-whiteBase dark:group-hover:fill-accentBase dark:group-focus:fill-accentBase"}))},B=7,z=t=>{const[s,e]=p.useState(""),[n,l]=p.useState(1),r=p.useMemo(()=>s?t.filter(d=>d.title.toLowerCase().includes(s.toLowerCase())):t,[t,s]),o=r.length,m=Math.ceil(o/B),c=(n-1)*B,i=c+B,u=r.slice(c,i),b=p.useCallback(d=>{const x=d.target.value;e(x),l(1)},[]),E=p.useCallback(d=>{d>=1&&d<=m&&l(d)},[m]);return{searchValue:s,currentPage:n,totalPages:m,displayedRows:u,handleSearchNews:b,handlePageChange:E}},F=({logData:t})=>{const{isMobile:s,isNotMobile:e}=h(),{searchValue:n,currentPage:l,totalPages:r,displayedRows:o,handlePageChange:m,handleSearchNews:c}=z(t),i=u=>u?a.createElement(A,{label:"Clear deleted news log",side:"bottom",ariaLabel:"Button for clearing deleted news` log",sideOffset:0},a.createElement("div",null,a.createElement(N,null))):a.createElement(N,null);return a.createElement("div",{className:"mb-10 flex flex-col overflow-hidden rounded-lg shadow-modal"},a.createElement("div",{className:"inline-block min-w-full align-middle"},a.createElement("div",{className:"divide-y divide-greyAlt/[.4] overflow-hidden rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},a.createElement("div",{className:"px-4 py-3 lg:px-6 lg:py-5"},a.createElement("div",{className:"relative max-md:w-[254px] md:flex  md:flex-row-reverse md:items-center md:justify-between"},s?i(s):null,a.createElement("h3",{className:"mb-4 text-2xl font-medium text-darkBase dark:text-whiteBase"},"Deleted news"),a.createElement(D,{inputData:{name:"Deleted news",type:"text",value:n,placeholder:"Title"},hasIcon:!0,svgName:"search",onChange:u=>c(u),variant:T.FilterServiceBlock}))),a.createElement(W,{displayedRows:o}),a.createElement("div",{className:"flex max-w-xl justify-between"},a.createElement(V,{handlePageChange:m,currentPage:l,totalPages:r}),e?i(s):null))))},J=()=>{const{allArchive:t,archiveHistoryLog:s,getHistoryLog:e,getArchives:n}=C();p.useEffect(()=>{n(),e()},[n,e]);const l=j(t);return a.createElement($,null,(s==null?void 0:s.length)>0?a.createElement(F,{logData:s}):null,Object.entries(l).reverse().map(([r,o])=>a.createElement(I,{key:r,dateSeparator:r,position:"archivePage"},a.createElement(M,{currentItems:o}))))};export{J as default};
