import{u as d,a as P,b as R,r as x,R as o,P as U,V as p,I as H,c as G,d as W,e as K,f as V,g as $,h as Q,L as Y,T as D}from"./index-c6f4a6ce.js";import{P as j,N as q}from"./NewsList-042017b5.js";import"./images-6d3ec2d0.js";const O=1,z=3,Z=6,J=(t,e,c)=>{const s=[e];let l=t-e;for(;l>0;)s.push(c),l-=c;return s},X=(t,e)=>{const c=t&&t.slice(0,-1).reduce((l,n)=>l+n,0);return e-c},F=(t,e,c)=>J(t,e,c),M=(t,e)=>{try{return X(t,e)}catch(c){return console.error(c.message)}},b=(t,e,c,s,l)=>{const n=e.length,m=t-1,i=t+1,f=c?Z:z,a=[];if(n<=f)for(let g=O;g<=n;g+=1)a.push(s(g));else t===O?(a.push(s(t)),a.push(s(i)),a.push(l("next")),a.push(s(n))):t===n?(a.push(s(O)),a.push(l("prev")),a.push(s(m)),a.push(s(t))):t>O&&t<n&&(t===2&&(a.push(l("prev")),a.push(s(t)),a.push(s(i)),a.push(l("next")),a.push(s(n))),t-1>O&&t+1!==n&&(a.push(l("prev")),a.push(s(m)),a.push(s(t)),a.push(s(i)),a.push(l("next"))),t+1===n&&(a.push(l("prev")),a.push(s(m)),a.push(s(t)),a.push(s(n))));return a},k=4,tt=7,et=8,st=5,nt=8,at=9,ct=t=>{const{breakpointsForMarkup:e}=d(),{popularNews:c,newsByKeyword:s,newsByCategory:l,newsByDate:n}=P(),{filteredNews:m}=R(),[i,f]=x.useState(1),[a,g]=x.useState([]),r=t&&(t==null?void 0:t.length)||0,h=(e==null?void 0:e.isNothing)||(e==null?void 0:e.isMobile),T=A(),I=y(),_=F(r,T,I),u=_[i-1]||0,C=M(_,r);x.useEffect(()=>{if(t&&(t==null?void 0:t.length)>0){const w=i*u-1>=r;let E,v;i===1?(E=i*u,v=E-u):i>1&&w&&C?(E=r,v=r-C):(E=i*u-1,v=E-u);const S=t.slice(v,E);g(S)}},[c,s,l,n,m,i]);function A(){return h?k:e!=null&&e.isTablet?tt:et}function y(){return h?st:e!=null&&e.isTablet?nt:at}const N=Math.ceil(i!==1&&h?r/u+1:r/u),B=Array.from({length:N},(w,E)=>E+1);return{currentItems:a,pageNumbers:B,currentPage:i,setCurrentPage:f}},ot="w-32",L=({direction:t,currentPage:e,pageNumbers:c,handlePrevClick:s,handleNextClick:l})=>{const{breakpointsForMarkup:n}=d(),m=(n==null?void 0:n.isTablet)||(n==null?void 0:n.isDesktop)||(n==null?void 0:n.isTV),i=e-1===0,f=e===(c==null?void 0:c.length);return o.createElement(U,{id:`${t} page button`,variant:p.Other,onHandleClick:t==="Prev"?s:l,width:ot,disabled:t==="Prev"?i:f,hasIcon:!0,svgName:"icon-arrow",svgSize:H.xsIcon14,classNameIcon:`${t==="Prev"?"rotate-90":"-rotate-90"}  fill-whiteBase`,classNameButton:t==="Prev"?"flex-row-reverse":""},m?o.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium"},t):null)},lt=({pageNumber:t,currentPage:e,onClick:c})=>o.createElement("li",{key:t,onClick:()=>c(t)},o.createElement(U,{"aria-label":`Page ${t.toString()} button`,classNameButton:`h-10 border-accentBase font-medium transition-colors duration-500 ${t===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:p.Small},t)),it=({pageNumbers:t,currentPage:e,setCurrentPage:c})=>{const{breakpointsForMarkup:s}=d(),l=(s==null?void 0:s.isTablet)||(s==null?void 0:s.isDesktop)||(s==null?void 0:s.isTV);window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"});const n=h=>o.createElement("li",{key:h,className:"ellipsis"},o.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"...")),m=h=>{c(h)},i=()=>{e>1&&c(e-1)},f=()=>{e<t.length&&c(e+1)},r=b(e,t,l,h=>o.createElement(lt,{pageNumber:h,currentPage:e,onClick:m}),n).map((h,T)=>o.createElement(o.Fragment,{key:T},h));return o.createElement("div",{className:"flex items-center justify-center gap-2"},o.createElement(L,{direction:"Prev",currentPage:e,handlePrevClick:i}),o.createElement("ul",{id:"page-numbers",className:"flex gap-2"},r),o.createElement(L,{direction:"Next",pageNumbers:t,currentPage:e,handleNextClick:f}))},ht=1,ut=()=>{const{isLoadingAPIData:t,errorAPI:e,headline:c,newsByCategory:s,newsByDate:l,newsByKeyword:n,fetchPopular:m}=P(),{isLoadingDBData:i,getSavedNews:f}=G(),{isAuthenticated:a,authError:g}=W(),{setOpenToast:r}=K(),h=V(),{rebuildedNews:T}=$({activeLinks:h}),{hasResults:I}=R(),{currentItems:_,currentPage:u,pageNumbers:C,setCurrentPage:A}=ct(T??[]),y=e==null?void 0:e.toString().includes("429"),N=Q();x.useEffect(()=>{e&&e>=500&&N("/serverError")},[e]),x.useEffect(()=>{m(ht),a&&f()},[m,f,a]),x.useEffect(()=>{(n||s||l)&&r(!0)},[n,s,l]);const B=t||i||I==="loading",w=(T==null?void 0:T.length)===0||I==="empty";console.log("hasResults",I);const E=n&&n.length>0||s&&s.length>0||l&&l.length>0,v=!B&&E,S=g||e;return console.log("rebuildedNews HOME_PAGE",T),o.createElement(o.Fragment,null,B?o.createElement(Y,{variant:"generalSection"}):o.createElement(o.Fragment,null,w||y?o.createElement(j,{variant:"page"}):o.createElement(o.Fragment,null,c&&o.createElement("h2",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},c),o.createElement(q,{currentItems:_,currentPage:u}),o.createElement(it,{pageNumbers:C,currentPage:u,setCurrentPage:A}))),S?o.createElement(D,{variant:"interactive",status:"error"}):null,v?o.createElement(D,{variant:"non-interactive",status:"info"}):null)};export{ut as default};
