import{k as p,l as b,R as e,S as E,I as N,r as h,U as k,m as w,c as B,d as D,h as L,L as S,A as I,T as A}from"./index-102037ce.js";import{N as C,P as T}from"./NewsList-f9d61872.js";import"./images-27f16078.js";const y=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],M=a=>{const t={};return a&&(a==null?void 0:a.length)>0&&a.forEach(s=>{const n=s==null?void 0:s.additionDate;if(n){const r=p(n,"LLLL yyyy",{locale:b});t[r]||(t[r]=[]),t[r].push(s)}}),t},P=({handlePageChange:a,currentPage:t,totalPages:s})=>e.createElement("nav",{className:"flex items-center space-x-1"},e.createElement("button",{type:"button",onClick:()=>a(t-1),className:"inline-flex items-center gap-x-2 rounded-full p-2.5 hover:bg-greyAlt/[.2] disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-whiteBase/[.2] dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{"aria-hidden":"true"},e.createElement(E,{svgName:"icon-arrow-left",size:N.smIcon20,className:"fill-accentBase dark:fill-whiteBase"})),e.createElement("span",{className:"sr-only"},"Previous")),Array.from({length:s},(n,r)=>e.createElement("button",{key:r,type:"button","aria-current":"page",className:"flex min-w-10 items-center justify-center rounded-full py-2.5 text-sm text-gray-800 hover:bg-greyAlt/[.2] dark:text-white dark:hover:bg-whiteBase/[.2]",onClick:()=>a(r+1)},r+1)),e.createElement("button",{type:"button",onClick:()=>a(t+1),className:"inline-flex items-center gap-x-2 rounded-full p-2.5 text-sm text-gray-800 hover:bg-greyAlt/[.2] disabled:pointer-events-none disabled:opacity-50  dark:hover:bg-whiteBase/[.2] dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{className:"sr-only"},"Next"),e.createElement("span",{"aria-hidden":"true"},e.createElement(E,{svgName:"icon-arrow-left",size:N.smIcon20,className:"rotate-180 fill-accentBase dark:fill-whiteBase"})))),R=60,_=({displayedRows:a})=>{const t="whitespace-nowrap px-6 py-4 text-sm font-medium text-darkBase dark:text-whiteBase";return e.createElement("table",{className:"min-w-full divide-y divide-greyAlt/[.4] dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] dark:bg-greyBase/[.4]"},e.createElement("tr",null,y&&(y==null?void 0:y.map(({label:s})=>e.createElement("th",{key:s,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase dark:text-whiteBase md:text-small"},s))))),e.createElement("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700"},Array.isArray(a)&&a.map(s=>{const{title:n,newsUrl:r,category:c,additionDate:o,deletionDate:i}=s,d=p(o,"dd/MM/yyyy"),m=p(i,"dd/MM/yyyy");return e.createElement("tr",{key:r,className:"group even:bg-greyAlt/[.1]"},e.createElement("td",{className:`${t}`},e.createElement("a",{href:r,target:"_blank",className:" transition-colors duration-500 group-hover:text-accentBase"},n.length>R?`${n.slice(0,65)}...`:n)),e.createElement("td",{className:`${t}`},c),e.createElement("td",{className:`${t}`},d),e.createElement("td",{className:`${t}`},m))})))},f=7,$=({logData:a})=>{const[t,s]=h.useState(""),[n,r]=h.useState(1),c=t?a.filter(l=>l.title.toLowerCase().includes(t.toLowerCase())):a,o=c.length,i=Math.ceil(o/f),d=(n-1)*f,m=d+f,u=c.slice(d,m),g=l=>{const x=l.target.value;s(x),r(1)},v=l=>{l>=1&&l<=i&&r(l)};return e.createElement("div",{className:"mb-6 flex flex-col overflow-hidden rounded-lg shadow-modal"},e.createElement("div",{className:"-m-1.5 overflow-x-auto"},e.createElement("div",{className:"inline-block min-w-full p-1.5 align-middle"},e.createElement("div",{className:"divide-y divide-greyAlt/[.4] rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},e.createElement("div",{className:"px-4 py-3"},e.createElement("div",{className:"relative max-w-xs"},e.createElement(k,{inputData:{name:"Deleted news",type:"text",value:t,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"icon-search",onChange:l=>g(l),variant:w.FilterServiceBlock}))),e.createElement("div",{className:"overflow-hidden"},e.createElement(_,{displayedRows:u})),e.createElement("div",{className:"px-4 py-1"},e.createElement(P,{handlePageChange:v,currentPage:n,totalPages:i}))))))},O=()=>{const{dbSuccessMessage:a,isLoadingDBData:t,allArchive:s,archiveHistoryLog:n,errorDB:r,getHistoryLog:c,getArchives:o}=B(),{isAuthenticated:i}=D(),d=L();h.useEffect(()=>{r&&r>=500&&d("/serverError")},[r]),h.useEffect(()=>{o(),c()},[o,c]);const m=M(s),u=t,g=!t&&s.length!==0;return i&&e.createElement(e.Fragment,null,u&&e.createElement(S,{variant:"generalSection"}),g&&e.createElement(e.Fragment,null,e.createElement($,{logData:n}),Object.entries(m).reverse().map(([v,l])=>e.createElement(I,{key:v,dateSeparator:v,position:"archivePage"},e.createElement(C,{currentItems:l})))),!u&&!g&&e.createElement(T,{variant:"page"}),a==="Remove news success"&&e.createElement(A,{variant:"interactive",status:"success"}))};export{O as default};
