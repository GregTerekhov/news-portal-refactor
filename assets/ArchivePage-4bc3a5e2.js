import{j as y,k as N,R as e,S as k,b as B,C as w,r as d,U as C,l as L,d as S,A as T}from"./index-b2e8263d.js";import{P as D,N as A}from"./PageTemplate-1708b79f.js";import"./images-86dfda53.js";import"./Toast-23ad4e8a.js";const m=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],I=56,_=87,$=t=>{const a={};return(t==null?void 0:t.length)>0&&t.forEach(s=>{const r=s==null?void 0:s.additionDate;if(r){const n=y(r,"LLLL yyyy",{locale:N});a[n]||(a[n]=[]),a[n].push(s)}}),a},h=t=>y(t,"dd/MM/yyyy"),R=(t,a)=>{let s;switch(!0){case a:s=_;break;default:s=I;break}return t.length>s?`${t.slice(0,s)}...`:t},p=({handlePageChange:t,currentPage:a,label:s,position:r,iconClass:n})=>{const o=r<a,l="group inline-flex items-center gap-x-2 rounded-full p-2.5 transition-colors duration-500 hocus:bg-accentBase disabled:pointer-events-none disabled:opacity-50 dark:hocus:bg-accentBase dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600";return e.createElement("button",{type:"button",onClick:()=>t(o?a-1:a+1),disabled:a===r,className:`${l}`},e.createElement("span",{"aria-hidden":"true"},e.createElement(k,{svgName:"arrow",sizeKey:"xsIcon14",className:`${n} fill-accentBase group-hover:fill-whiteBase group-focus:fill-whiteBase dark:fill-whiteBase`})),e.createElement("span",{className:"sr-only"},s))},P=({handlePageChange:t,currentPage:a,totalPages:s})=>{const r="flex w-10 h-10 items-center justify-center rounded-full py-2.5 text-small text-darkBase transition-colors duration-500 hocus:bg-accentBase hocus:text-whiteBase dark:text-whiteBase dark:hocus:bg-accentBase lg:text-medium";return e.createElement("nav",{className:"flex items-center space-x-1 px-4 py-2"},e.createElement(p,{handlePageChange:t,currentPage:a,label:"Previous",position:1,iconClass:"rotate-90"}),Array.from({length:s},(n,o)=>e.createElement("button",{key:o,type:"button","aria-current":"page",className:`${r} ${a===o+1?"bg-accentBase text-whiteBase":"bg-transparent text-darkBase dark:text-whiteBase"}`,onClick:()=>t(o+1)},o+1)),e.createElement(p,{handlePageChange:t,currentPage:a,label:"Next",position:s,iconClass:"-rotate-90"}))},M=({displayedRows:t})=>{const{wideScreens:a}=B(),s="whitespace-nowrap px-6 text-small font-medium text-darkBase dark:text-whiteBase lg:text-medium";return e.createElement(w,{isOpen:!0,orientation:"horizontal"},e.createElement("table",{className:"mb-2.5 min-w-full divide-y divide-greyAlt/[.4] transition-colors duration-500 dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] transition-colors duration-500 dark:bg-greyBase/[.4]"},e.createElement("tr",null,m==null?void 0:m.map(({label:r})=>e.createElement("th",{key:r,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase transition-colors duration-500 dark:text-whiteBase md:text-small lg:text-xl"},r)))),e.createElement("tbody",{className:"divide-y divide-whiteBase transition-colors duration-500 dark:divide-gray-700"},Array.isArray(t)&&t.map(({title:r,newsUrl:n,category:o,additionDate:l,deletionDate:c})=>e.createElement("tr",{key:n,className:"group even:bg-greyAlt/[.1]"},e.createElement("td",{className:`${s}`},e.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer nofollow",className:"block py-4 transition-colors duration-500 focus:text-accentBase group-hover:text-accentBase lg:text-medium"},R(r,a))),e.createElement("td",{className:`${s}`},o),e.createElement("td",{className:`${s}`},h(l)),e.createElement("td",{className:`${s}`},h(c)))))))},u=7,H=t=>{const[a,s]=d.useState(""),[r,n]=d.useState(1),o=d.useMemo(()=>a?t.filter(i=>i.title.toLowerCase().includes(a.toLowerCase())):t,[t,a]),l=o.length,c=Math.ceil(l/u),g=(r-1)*u,f=g+u,E=o.slice(g,f),x=d.useCallback(i=>{const v=i.target.value;s(v),n(1)},[]),b=d.useCallback(i=>{i>=1&&i<=c&&n(i)},[c]);return{searchValue:a,currentPage:r,totalPages:c,displayedRows:E,handleSearchNews:x,handlePageChange:b}},V=({logData:t})=>{const{searchValue:a,currentPage:s,totalPages:r,displayedRows:n,handlePageChange:o,handleSearchNews:l}=H(t);return e.createElement("div",{className:"mb-6 flex flex-col overflow-hidden rounded-lg shadow-modal"},e.createElement("div",{className:"inline-block min-w-full align-middle"},e.createElement("div",{className:"divide-y divide-greyAlt/[.4] overflow-hidden rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},e.createElement("div",{className:"px-4 py-3 lg:px-6 lg:py-5"},e.createElement("div",{className:"relative w-[254px] md:max-w-xs"},e.createElement(C,{inputData:{name:"Deleted news",type:"text",value:a,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"search",onChange:c=>l(c),variant:L.FilterServiceBlock}))),e.createElement(M,{displayedRows:n}),e.createElement(P,{handlePageChange:o,currentPage:s,totalPages:r}))))},U=()=>{const{allArchive:t,archiveHistoryLog:a,getHistoryLog:s,getArchives:r}=S();d.useEffect(()=>{r(),s()},[r,s]);const n=$(t);return e.createElement(D,null,e.createElement(V,{logData:a}),Object.entries(n).reverse().map(([o,l])=>e.createElement(T,{key:o,dateSeparator:o,position:"archivePage"},e.createElement(A,{currentItems:l}))))};export{U as default};
