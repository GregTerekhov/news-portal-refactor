import{j as N,k as C,R as t,S as w,b as E,C as L,r as x,l as S,U as D,m as M,M as T,H as A,d as I,A as $}from"./index-fd2e1948.js";import{D as R,P as _,N as j}from"./PageTemplate-cc6723e9.js";import"./images-09e6b7e8.js";import"./Toast-cce1f41a.js";const y=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],O=56,U=87,F=a=>{const s={};return(a==null?void 0:a.length)>0&&a.forEach(e=>{const n=e==null?void 0:e.additionDate;if(n){const l=N(n,"LLLL yyyy",{locale:C});s[l]||(s[l]=[]),s[l].push(e)}}),s},B=a=>N(a,"dd/MM/yyyy"),H=(a,s)=>{let e;switch(!0){case s:e=U;break;default:e=O;break}return a.length>e?`${a.slice(0,e)}...`:a},k=({handlePageChange:a,currentPage:s,label:e,position:n,iconClass:l})=>{const r=n<s,c="group inline-flex items-center gap-x-2 rounded-full p-2.5 transition-colors duration-500 hocus:bg-accentBase disabled:pointer-events-none disabled:opacity-50 dark:hocus:bg-accentBase dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600";return t.createElement("button",{type:"button",onClick:()=>a(r?s-1:s+1),disabled:s===n,className:`${c}`},t.createElement("span",{"aria-hidden":"true"},t.createElement(w,{svgName:"arrow",sizeKey:"xsIcon14",className:`${l} fill-accentBase group-hover:fill-whiteBase group-focus:fill-whiteBase dark:fill-whiteBase`})),t.createElement("span",{className:"sr-only"},e))},V=({currentPage:a,handlePageChange:s,totalPages:e})=>{const{isMobile:n}=E(),l=()=>{const c=[],m=(o,b)=>o===b?"bg-accentBase text-whiteBase":"bg-transparent text-darkBase dark:text-whiteBase",i=(o,b)=>{for(let f=o;f<=b;f+=1)c.push(t.createElement("button",{key:f,type:"button","aria-current":"page",className:`${r} ${m(a,f)}`,onClick:()=>s(f)},f))},d=o=>{c.push(t.createElement("span",{key:`dots${o}`,className:"flex w-10 items-center justify-center text-darkBase dark:text-whiteBase"},"..."))},u=()=>{c.push(t.createElement("button",{key:e,type:"button","aria-current":"page",className:`${r} ${m(a,e)}`,onClick:()=>s(e)},e))},h=a+2===e||a+1===e||a===e,p=a+3===e||a+2===e||a+1===e||a===e;return n?e<=4?i(1,e):a===1?(i(1,2),d("next"),u()):h?(d("prev"),i(e-2,e)):a+2<e&&(d("prev"),i(a,a),d("next"),u()):e<=5?i(1,e):a===1?(i(1,3),d("next"),u()):p?(d("prev"),i(e-3,e)):a+3<e&&(d("prev"),i(a,a+1),d("next"),u()),c},r="flex w-10 h-10 items-center justify-center rounded-full py-2.5 text-small text-darkBase transition-colors duration-500 hocus:bg-accentBase hocus:text-whiteBase dark:text-whiteBase dark:hocus:bg-accentBase lg:text-medium";return t.createElement(t.Fragment,null,l())},W=({handlePageChange:a,currentPage:s,totalPages:e})=>t.createElement("nav",{className:"flex items-center space-x-1 py-2"},t.createElement(k,{handlePageChange:a,currentPage:s,label:"Previous",position:1,iconClass:"rotate-90"}),t.createElement(V,{currentPage:s,totalPages:e,handlePageChange:a}),t.createElement(k,{handlePageChange:a,currentPage:s,label:"Next",position:e,iconClass:"-rotate-90"})),z=({displayedRows:a})=>{const{wideScreens:s}=E(),e="whitespace-nowrap px-6 text-small font-medium text-darkBase dark:text-whiteBase lg:text-medium group-hover:text-whiteBase transition-colors duration-500";return t.createElement(L,{isOpen:!0,orientation:"horizontal"},t.createElement("table",{className:"mb-2.5 min-w-full divide-y divide-greyAlt/[.4] transition-colors duration-500 dark:divide-greyBase/[.4]"},t.createElement("thead",{className:"bg-accentBase/[.2] transition-colors duration-500 dark:bg-greyBase/[.4]"},t.createElement("tr",null,y==null?void 0:y.map(({label:n})=>t.createElement("th",{key:n,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase transition-colors duration-500 dark:text-whiteBase md:text-small lg:text-xl"},n)))),t.createElement("tbody",{className:"divide-y divide-whiteBase transition-colors duration-500 dark:divide-gray-700"},Array.isArray(a)&&a.map(({title:n,newsUrl:l,category:r,additionDate:c,deletionDate:m})=>t.createElement("tr",{key:l,className:"group transition-colors duration-500 even:bg-greyAlt/[.1] hover:bg-accentBase/65"},t.createElement("td",{className:`${e}`},t.createElement("a",{href:l,target:"_blank",rel:"noopener noreferrer nofollow",className:"block py-4 lg:text-medium"},H(n,s))),t.createElement("td",{className:`${e}`},r),t.createElement("td",{className:`${e}`},B(c)),t.createElement("td",{className:`${e}`},B(m)))))))},v=({toggleModal:a})=>{const{isNotMobile:s}=E(),e="group flex items-center gap-x-4 text-accentBase transition-colors duration-500 hocus:text-accentAlt dark:text-whiteBase dark:hocus:text-accentBase max-md:absolute max-md:right-0 max-md:top-0 max-md:h-10 max-md:w-10 max-md:justify-center",n="fill-accentBase group-hover:fill-accentAlt group-focus:fill-accentAlt dark:fill-whiteBase dark:group-hover:fill-accentBase dark:group-focus:fill-accentBase";return t.createElement("button",{type:"button",className:e,onClick:a},s?"Clear log":null,t.createElement(w,{svgName:"trash",sizeKey:"smIcon18",className:n}))},g=7,G=a=>{const[s,e]=x.useState(""),[n,l]=x.useState(1),r=x.useMemo(()=>s?a.filter(o=>o.title.toLowerCase().includes(s.toLowerCase())):a,[a,s]),c=r.length,m=Math.ceil(c/g),i=(n-1)*g,d=i+g,u=r.slice(i,d),h=x.useCallback(o=>{const b=o.target.value;e(b),l(1)},[]),p=x.useCallback(o=>{o>=1&&o<=m&&l(o)},[m]);return{searchValue:s,currentPage:n,totalPages:m,displayedRows:u,handleSearchNews:h,handlePageChange:p}},K=({logData:a})=>{const{isMobile:s,isNotMobile:e}=E(),{isOpenModal:n,toggleModal:l,popUpRef:r}=S(),{searchValue:c,currentPage:m,totalPages:i,displayedRows:d,handlePageChange:u,handleSearchNews:h}=G(a),p=o=>o?t.createElement(A,{label:"Clear deleted news log",side:"bottom",ariaLabel:"Button for clearing deleted news` log",sideOffset:0},t.createElement("div",null,t.createElement(v,{toggleModal:l}))):t.createElement(v,{toggleModal:l});return t.createElement(t.Fragment,null,t.createElement("div",{className:"mb-10 flex flex-col overflow-hidden rounded-lg shadow-modal"},t.createElement("div",{className:"inline-block min-w-full align-middle"},t.createElement("div",{className:"divide-y divide-greyAlt/[.4] overflow-hidden rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},t.createElement("div",{className:"px-4 py-3 lg:px-6 lg:py-5"},t.createElement("div",{className:"relative max-md:w-[254px] md:flex  md:flex-row-reverse md:items-center md:justify-between"},s?p(s):null,t.createElement("h3",{className:"mb-4 text-2xl font-medium text-darkBase dark:text-whiteBase"},"Deleted news"),t.createElement(D,{inputData:{name:"Deleted news",type:"text",value:c,placeholder:"Title"},hasIcon:!0,svgName:"search",onChange:o=>h(o),variant:M.FilterServiceBlock}))),t.createElement(z,{displayedRows:d}),t.createElement("div",{className:"flex justify-between px-4 lg:px-6"},t.createElement(W,{handlePageChange:u,currentPage:m,totalPages:i}),e?p(s):null)))),n&&t.createElement(T,{closeModal:l,modalRef:r},t.createElement(R,{title:"Clear log",agreementText:"clear the log of deleted news",onClose:o=>l(o),isDeleteModal:!1})))},Z=()=>{const{allArchive:a,archiveHistoryLog:s,getHistoryLog:e,getArchives:n}=I();x.useEffect(()=>{n(),e()},[n,e]);const l=F(a);return t.createElement(_,null,(s==null?void 0:s.length)>0?t.createElement(K,{logData:s}):null,Object.entries(l).reverse().map(([r,c])=>t.createElement($,{key:r,dateSeparator:r,position:"archivePage"},t.createElement(j,{currentItems:c}))))};export{Z as default};
