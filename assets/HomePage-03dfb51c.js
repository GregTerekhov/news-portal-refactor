import{u as k,a as F,b as L,r as g,R as o,P,V as R,I as D,c as U,d as M,e as G,f as H,g as K,h as W,L as $,T as N}from"./index-ae61bed5.js";import{P as Q,N as Y}from"./NewsList-9fce0821.js";import"./images-d3b49ae8.js";const x=1,V=3,j=6,q=(t,e,a)=>{const s=[e];let c=t-e;for(;c>0;)s.push(a),c-=a;return s},z=(t,e)=>{const a=t&&t.slice(0,-1).reduce((c,l)=>c+l,0);return e-a},Z=(t,e,a)=>q(t,e,a),b=(t,e)=>{try{return z(t,e)}catch(a){return console.error(a.message)}},J=(t,e,a,s,c)=>{const l=e.length,r=t-1,h=t+1,i=a?j:V,n=[];if(l<=i)for(let p=x;p<=l;p+=1)n.push(s(p));else t===x?(n.push(s(t)),n.push(s(h)),n.push(c("next")),n.push(s(l))):t===l?(n.push(s(x)),n.push(c("prev")),n.push(s(r)),n.push(s(t))):t>x&&t<l&&(t===2&&(n.push(c("prev")),n.push(s(t)),n.push(s(h)),n.push(c("next")),n.push(s(l))),t-1>x&&t+1!==l&&(n.push(c("prev")),n.push(s(r)),n.push(s(t)),n.push(s(h)),n.push(c("next"))),t+1===l&&(n.push(c("prev")),n.push(s(r)),n.push(s(t)),n.push(s(l))));return n},X=4,tt=7,et=8,st=5,nt=8,at=9,ot=t=>{const{isMobile:e,isTablet:a}=k(),{popularNews:s,newsByKeyword:c,newsByCategory:l,newsByDate:r}=F(),{filteredNews:h}=L(),[i,n]=g.useState(1),[p,m]=g.useState([]),u=t&&(t==null?void 0:t.length)||0,T=w(),I=y(),O=Z(u,T,I),f=O[i-1]||0,_=b(O,u);g.useEffect(()=>{if(t&&(t==null?void 0:t.length)>0){const B=i*f-1>=u;let E,v;i===1?(E=i*f,v=E-f):i>1&&B&&_?(E=u,v=u-_):(E=i*f-1,v=E-f);const S=t.slice(v,E);m(S)}},[s,c,l,r,h,i]);function w(){return e?X:a?tt:et}function y(){return e?st:a?nt:at}const A=Math.ceil(i!==1&&e?u/f+1:u/f),C=Array.from({length:A},(B,E)=>E+1);return{currentItems:p,pageNumbers:C,currentPage:i,setCurrentPage:n}},d=({direction:t,currentPage:e,pageNumbers:a,handlePrevClick:s,handleNextClick:c})=>{const{isNotMobile:l}=k(),r=e-1===0,h=e===(a==null?void 0:a.length);return o.createElement(P,{id:`${t} page button`,variant:R.Other,onHandleClick:t==="Prev"?s:c,width:"w-32",disabled:t==="Prev"?r:h,hasIcon:!0,svgName:"icon-arrow",svgSize:D.xsIcon14,classNameIcon:`${t==="Prev"?"rotate-90":"-rotate-90"}  fill-whiteBase`,classNameButton:t==="Prev"?"flex-row-reverse":""},l?o.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},t):null)},ct=({pageNumber:t,currentPage:e,onClick:a})=>o.createElement("li",{key:t,onClick:()=>a(t)},o.createElement(P,{"aria-label":`Page ${t.toString()} button`,classNameButton:`h-10 border-accentBase font-medium transition-colors duration-500 ${t===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:R.Small},t)),lt=({pageNumbers:t,currentPage:e,setCurrentPage:a})=>{const{isNotMobile:s}=k();window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"});const c=m=>o.createElement("li",{key:m,className:"ellipsis"},o.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"...")),l=m=>{a(m)},r=()=>{e>1&&a(e-1)},h=()=>{e<t.length&&a(e+1)},p=J(e,t,s,m=>o.createElement(ct,{pageNumber:m,currentPage:e,onClick:l}),c).map((m,u)=>o.createElement(o.Fragment,{key:u},m));return o.createElement("div",{className:"flex items-center justify-center gap-2"},o.createElement(d,{direction:"Prev",currentPage:e,handlePrevClick:r}),o.createElement("ul",{id:"page-numbers",className:"flex gap-2"},p),o.createElement(d,{direction:"Next",pageNumbers:t,currentPage:e,handleNextClick:h}))},it=1,ut=()=>{const{isLoadingAPIData:t,errorAPI:e,headline:a,newsByCategory:s,newsByDate:c,newsByKeyword:l,fetchPopular:r}=F(),{isLoadingDBData:h,getSavedNews:i}=U(),{isAuthenticated:n,authError:p}=M(),{setOpenToast:m}=G(),u=H(),{rebuildedNews:T}=K({activeLinks:u}),{hasResults:I}=L(),{currentItems:O,currentPage:f,pageNumbers:_,setCurrentPage:w}=ot(T??[]),y=e==null?void 0:e.toString().includes("429"),A=W();g.useEffect(()=>{e&&e>=500&&A("/serverError")},[e]),g.useEffect(()=>{r(it),n&&i()},[r,i,n]),g.useEffect(()=>{(l||s||c)&&m(!0)},[l,s,c]);const C=t||h||I==="loading",B=(T==null?void 0:T.length)===0||I==="empty",E=l&&l.length>0||s&&s.length>0||c&&c.length>0,v=!C&&E,S=p||e;return o.createElement(o.Fragment,null,C?o.createElement($,{variant:"generalSection"}):o.createElement(o.Fragment,null,B||y?o.createElement(Q,{variant:"page"}):o.createElement(o.Fragment,null,a&&o.createElement("h2",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},a),o.createElement(Y,{currentItems:O,currentPage:f}),o.createElement(lt,{pageNumbers:_,currentPage:f,setCurrentPage:w}))),S?o.createElement(N,{variant:"interactive",status:"error"}):null,v?o.createElement(N,{variant:"non-interactive",status:"info"}):null)};export{ut as default};
