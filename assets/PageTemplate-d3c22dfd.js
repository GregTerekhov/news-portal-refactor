import{o as M,p as re,r as E,q as me,s as de,u as R,f as v,t as ue,R as t,l as Z,v as ge,P as _,V,w as z,S as B,b as j,H as $,x as W,L as q,d as L,k as ee,y as pe,z as he,B as fe,e as K,D as xe,E as ye,m as be,M as Ee,a as X,g as te}from"./index-c914540b.js";import{p as we,u as Se}from"./images-92ff7b35.js";import{T as ve}from"./Toast-de510eda.js";const Ae=e=>e.weather.isLoading,Ce=e=>e.weather.data,Te=e=>e.weather.weatherByHour,Ie=e=>e.weather.hasError,F=()=>{const e=M(Ae),s=M(Ce),a=M(Te),i=M(Ie),o=re(),n=E.useCallback(c=>o(me(c)),[o]),l=E.useCallback(c=>o(de(c)),[o]);return{isWeatherLoading:e,currentWeather:s,hourlyWeather:a,weatherError:i,getCurrentWeather:n,getHourlyWeather:l}},Be="text-center text-2xl font-bold tracking-smallTight text-darkBase transition-colors dark:text-whiteBase md:w-548px md:text-5xl md:tracking-tighter",ke=(e,s)=>s&&e?"It seems you have been send too much requests then its needed":"We haven’t found news from this category",se=({variant:e})=>{const{errorAPI:s}=R(),{isHomeActive:a}=v(),i=s==null?void 0:s.toString().includes("429"),o=window.devicePixelRatio||1,{width:n,height:l,src:c}=ue(we,o,window.innerWidth),r=Se(c||"");return t.createElement(t.Fragment,null,e==="page"?t.createElement("div",{className:"flex flex-col items-center justify-center space-y-10"},t.createElement("p",{className:Be},ke(a,i)),t.createElement("img",{src:r,alt:i&&a?"Too much requests":"No found news",width:n,height:l})):t.createElement("img",{src:r,alt:"No found an image for news",width:n,height:l}))},He=e=>{let s="",a="";switch(e){case"Delete news":s="Cancel deletion the news",a="Delete selected news";break;case"Clear log":s="Cancel clearing log",a="Clear deleted news log";break}return{cancelButtonId:s,deleteButtonId:a}},De=e=>{switch(e){case"Delete news":return"delete this";case"Clear log":return"clear the log of deleted";default:return""}},Pe=({handleClose:e,handleDelete:s,title:a})=>{const{isOpenModal:i}=Z(),{cancelButtonId:o,deleteButtonId:n}=He(a),l=De(a),c=[{onClick:r=>e(r,!0),id:o,label:"Cancel",icon:"reset"},{onClick:s,id:n,label:"Delete",icon:"trash"}];return t.createElement(ge,{enabled:i},t.createElement("div",null,t.createElement("h3",{className:"mb-4 text-2xl text-darkBase dark:text-whiteBase md:mb-6 md:text-4xl"},a),t.createElement("p",{className:"mb-6 text-medium text-darkBase dark:text-whiteBase md:mb-10 md:text-xl"},`Are you sure you want to ${l} news?`),t.createElement("ul",{className:"max-md:space-y-4 md:flex md:items-center md:justify-between md:gap-8"},Array.isArray(c)&&c.map(({onClick:r,id:m,label:d,icon:g})=>t.createElement("li",{key:d,className:"w-full"},t.createElement(_,{variant:V.Primary,onHandleClick:r,hasIcon:!0,id:m,svgName:g,svgSize:"smIcon18",classNameIcon:"fill-whiteBase",classNameButton:"md:text-xl border border-whiteBase"},d))))))},ae=()=>{const[e,s]=E.useState(!0),[a,i]=E.useState(!1),[o,n]=E.useState(null),[l,c]=E.useState(!1),{getCurrentWeather:r,getHourlyWeather:m}=F(),d="geolocation"in navigator;E.useEffect(()=>{z("get","geolocationPermission")&&(c(!0),n("granted"))},[o]);const g=p=>{switch(c(!1),n("denied"),p.code){case p.PERMISSION_DENIED:console.error("User denied access to geolocation");break;case p.POSITION_UNAVAILABLE:console.error("Geolocation information is unavailable");break;case p.TIMEOUT:console.error("Geolocation access request timed out");break;default:console.error("An unknown error occurred while getting geolocation");break}};return{isCelsius:e,flippingCard:a?"rotate-y-180":"rotate-y-0",statePermission:o,hasGeolocationPermission:l,requestGeolocationPermission:()=>{d&&navigator.permissions.query({name:"geolocation"}).then(p=>{p.state==="granted"?(n("granted"),c(!0),z("set","geolocationPermission","granted"),navigator.geolocation.getCurrentPosition(({coords:f})=>{const{latitude:w,longitude:k}=f,A={lat:w,lon:k};r(A),m(A)})):p.state==="prompt"?(n("prompt"),navigator.geolocation.getCurrentPosition(({coords:f})=>{c(!0),z("set","geolocationPermission","granted");const{latitude:w,longitude:k}=f,A={lat:w,lon:k};r(A),m(A)},g)):(c(!1),n("denied"),z("remove","geolocationPermission"))})},toggleTemperatureScale:()=>{s(!e)},flipWeatherDetails:()=>{i(!a)},showButtonText:()=>{switch(!0){case o==="prompt":return"Give permission for your geolocation";case l:return"Get the weather for your region";case o==="denied":return"Permission denied";default:return"Give permission for your geolocation"}}}},Le=({showError:e})=>{const{requestGeolocationPermission:s,showButtonText:a}=ae(),i=e?"Server error. Please try again later when you reload the page":"What a pity, this could be your weather";return t.createElement(t.Fragment,null,t.createElement("h2",{className:"text-medium text-whiteBase md:text-2xl lg:text-4xl"},i),t.createElement("div",{className:`my-auto ${e?"flex justify-center":""}`},t.createElement(B,{svgName:"moon",sizeKey:"ultraIcon156",className:"fill-transparent stroke-greyBase"})),!e&&t.createElement(_,{id:"Geolocation permission button",variant:V.Primary,onHandleClick:s,classNameButton:"border border-solid border-whiteBase"},a()))},Re={"-43200":"-12:00","-39600":"-11:00","-36000":"-10:00","-34200":"-09:30","-32400":"-09:00","-28800":"-08:00","-25200":"-07:00","-21600":"-06:00","-18000":"-05:00","-16200":"-04:30","-14400":"-04:00","-12600":"-03:30","-10800":"-03:00","-7200":"-02:00","-3600":"-01:00",0:"00:00",3600:"+01:00",7200:"+02:00",10800:"+03:00",12600:"+03:30",14400:"+04:00",16200:"+04:30",18e3:"+05:00",19800:"+05:30",20700:"+05:45",21600:"+06:00",23400:"+06:30",25200:"+07:00",28800:"+08:00",32400:"+09:00",34200:"+09:30",36e3:"+10:00",37800:"+10:30",39600:"+11:00",41400:"+11:30",43200:"+12:00",45900:"+12:45",46800:"+13:00",50400:"+14:00"},Fe=[{min:0,max:.2,scale:"0"},{min:.3,max:1.5,scale:"1"},{min:1.6,max:3.3,scale:"2"},{min:3.4,max:5.4,scale:"3"},{min:5.5,max:7.9,scale:"4"},{min:8,max:10.7,scale:"5"},{min:10.8,max:13.8,scale:"6"},{min:13.9,max:17.1,scale:"7"},{min:17.2,max:20.7,scale:"8"},{min:20.8,max:24.4,scale:"9"},{min:24.5,max:28.4,scale:"10"},{min:28.5,max:32.6,scale:"11"},{min:32.7,max:Number.MAX_SAFE_INTEGER,scale:"12"}],Me={Sun:"Sunday",Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday"};function ze(e){const s=String(e);return Re[s]}function $e(e){return e/1e3}function je(e){let s;return e&&(s=Fe.find(a=>e>=a.min&&e<=a.max)),s?s==null?void 0:s.scale:""}const Q=e=>e<10?`0${e}`:e.toString();function Oe(){const e=new Date,s=e.getHours(),a=e.getMinutes(),i=Q(s),o=Q(a);return`${i}:${o}`}function G(e){const s=new Date(e*1e3),a=s.getHours(),i=s.getMinutes(),o=String(a).padStart(2,"0"),n=String(i).padStart(2,"0");return`${o}:${n}`}function oe(e){const s=e*.75006;return Math.floor(s)}const P=(e,s)=>s&&e?Math.round(e)+"°":Math.round(e*9/5+32)+"°";function Ne(){const e=new Date,s=Me[e.toDateString().slice(0,3)],a=Oe(),i=e.toDateString().slice(4).slice(0,4),o=e.toDateString().slice(8).slice(0,2),n=e.toDateString().slice(11),l=`${a} | ${o} ${i} ${n}`;return{days:s,dateNow:l}}function Y(e,s){var a,i,o,n,l,c,r,m,d,g,x,b,h,y,u,p,f;return{currentTemperature:s?P((a=e==null?void 0:e.main)==null?void 0:a.temp,!0):P((i=e==null?void 0:e.main)==null?void 0:i.temp,!1),feelsLike:s?`${P((o=e==null?void 0:e.main)==null?void 0:o.feels_like,!0)} C`:`${P((n=e==null?void 0:e.main)==null?void 0:n.feels_like,!1)} F`,prevailingWeather:((c=(l=e==null?void 0:e.weather)==null?void 0:l[0])==null?void 0:c.main)??"",location:(e==null?void 0:e.name)??"",timezone:ze(e==null?void 0:e.timezone),iconWeather:(m=(r=e==null?void 0:e.weather)==null?void 0:r[0])==null?void 0:m.icon,iconAlt:(g=(d=e==null?void 0:e.weather)==null?void 0:d[0])==null?void 0:g.description,humidityPercent:(x=e==null?void 0:e.main)==null?void 0:x.humidity,pressureMmHg:oe((b=e==null?void 0:e.main)==null?void 0:b.pressure),pressureHpa:(h=e==null?void 0:e.main)==null?void 0:h.pressure,sunriseTime:G((y=e==null?void 0:e.sys)==null?void 0:y.sunrise),sunsetTime:G((u=e==null?void 0:e.sys)==null?void 0:u.sunset),visibility:$e(e==null?void 0:e.visibility),windSpeed:(p=e==null?void 0:e.wind)==null?void 0:p.speed,beaufortScale:je((f=e==null?void 0:e.wind)==null?void 0:f.speed)}}function I(e,s){var a,i,o,n,l,c,r,m,d;return{timeScale:e==null?void 0:e.dt,convertedTimeScale:G(e==null?void 0:e.dt),mainTemperature:s?`${P((a=e==null?void 0:e.main)==null?void 0:a.temp,!0)} C`:`${P((i=e==null?void 0:e.main)==null?void 0:i.temp,!1)} F`,iconWeather:(n=(o=e==null?void 0:e.weather)==null?void 0:o[0])==null?void 0:n.icon,iconAlt:(c=(l=e==null?void 0:e.weather)==null?void 0:l[0])==null?void 0:c.description,humidityPercent:(r=e==null?void 0:e.main)==null?void 0:r.humidity,pressureMmHg:oe((m=e==null?void 0:e.main)==null?void 0:m.pressure),windSpeed:(d=e==null?void 0:e.wind)==null?void 0:d.speed}}const Ue=(e,s)=>{const{timezone:a,humidityPercent:i,pressureHpa:o,pressureMmHg:n,sunriseTime:l,sunsetTime:c,visibility:r,windSpeed:m,beaufortScale:d}=Y(s);return[{icon:"earth",iconSize:e?"xsIcon16":"mdIcon24",value:a??"",label:"Greenwich mean time",hint:"GMT time",justifyItemClass:"justify-start",subTextValue:"UTC"},{icon:"humidity",iconSize:e?"smIcon18":"lgIcon30",value:i,label:"Humidity in percent",hint:"Humidity (%)",justifyItemClass:"justify-end",subTextValue:"%"},{icon:"pressure",iconSize:e?"smIcon18":"lgIcon30",value:n,label:"Atmospheric pressure in mm Hg",hint:"Atmospheric pressure (mm.Hg)",justifyItemClass:"justify-start",subTextValue:"mm.Hg"},{icon:"pressure",iconSize:e?"smIcon18":"lgIcon30",value:o,label:"Atmospheric pressure in hPa",hint:"Atmospheric pressure (HPa)",justifyItemClass:"justify-end",subTextValue:"hPa"},{icon:"sunrise",iconSize:e?"smIcon20":"lgIcon30",value:l,label:"Sunrise time",hint:"Sunrise time",justifyItemClass:"justify-start",subTextValue:"AM"},{icon:"sunset",iconSize:e?"smIcon20":"lgIcon30",value:c,label:"Sunset time",hint:"Sunset time",justifyItemClass:"justify-end",subTextValue:"PM"},{icon:"eye-opened",iconSize:e?"smIcon20":"lgIcon30",value:r,label:"Road visibility",hint:"Road visibility",justifyItemClass:"justify-start",subTextValue:"km"},{icon:"weather-wind",iconSize:e?"smIcon20":"lgIcon30",value:m,label:"Wind speed in metre per seconds",hint:`Wind speed (m/s). (${d} on the Beaufort scale)`,justifyItemClass:"justify-end",subTextValue:"m/s"}]},Ge=e=>[{label:`Temperature in °${e?"C":"F"}`,icon:"thermometer",iconSize:"mdIcon24",iconColorStyles:"fill-whiteBase",renderCell:Ke},{label:"Precipitation and weather",icon:"sun",iconSize:"mdIcon24",iconColorStyles:"stroke-whiteBase fill-transparent",renderCell:Xe},{label:"Humidity (%)",icon:"humidity",iconSize:"mdIcon28",iconColorStyles:"fill-whiteBase",renderCell:Ye},{label:"Pressure (mm.Hg)",icon:"pressure",iconSize:"mdIcon24",iconColorStyles:"fill-whiteBase",renderCell:Je},{label:"Wind speed (m/s)",icon:"weather-wind",iconSize:"mdIcon24",iconColorStyles:"fill-whiteBase",renderCell:Qe}],_e=({toggleTemperatureScale:e,currentWeather:s,isCelsius:a})=>{const{isSmallScreens:i}=j(),{currentTemperature:o,prevailingWeather:n,feelsLike:l,location:c}=Y(s,a);return t.createElement("div",{className:"mx-auto flex cursor-pointer items-center justify-evenly gap-5",onClick:e},t.createElement("div",{className:'relative w-83px text-center after:absolute after:-right-2 after:top-0 after:h-full after:w-px after:bg-white after:content-[""] md:w-96px'},t.createElement("p",{className:"font-weather text-monstrous text-contrastWhite  md:text-[64px]"},o)),t.createElement("div",{className:"space-y-2.5"},t.createElement("div",null,t.createElement("p",{className:"font-weather text-3xl text-contrastWhite md:text-4.5xl"},n),t.createElement("p",{className:"font-weather text-base text-contrastWhite md:text-2xl"},"Feels like ",l)),t.createElement("div",{className:"flex items-center gap-1 rounded-lg bg-weatherForeground px-2 py-[9px] text-contrastWhite md:gap-2 md:pb-[9px] md:pl-[7px] md:pr-[17px] md:pt-[10px]"},t.createElement(B,{svgName:"location",sizeKey:i?"smIcon20":"mdIcon27",className:"fill-whiteBase"}),t.createElement("p",{className:"font-weather text-base text-contrastWhite md:text-medium"},c))))},Ve=({isCelsius:e})=>{const{hourlyWeather:s}=F(),{isSmallScreens:a}=j(),i=Ge(e);return t.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full bg-accentBase duration-500 ease-in backface-hidden rotate-y-180"},t.createElement("table",{className:"h-full min-w-full border-separate border border-transparent bg-accentBase"},t.createElement("thead",{className:"h-10"},t.createElement($,{label:"Time",side:"top",sideOffset:0,ariaLabel:"Time interval (3 hours)"},t.createElement("tr",null,t.createElement("th",{className:"w-10 pr-2"},t.createElement(B,{svgName:"time",sizeKey:a?"smIcon20":"mdIcon24",className:"fill-whiteBase"})),Array.isArray(s)&&(s==null?void 0:s.map(o=>t.createElement("th",{key:I(o).timeScale,scope:"col",className:"-rotate-90 whitespace-nowrap text-center text-small text-whiteBase md:text-base hg:text-xl"},I(o).convertedTimeScale)))))),t.createElement("tbody",null,i.map(({label:o,icon:n,iconColorStyles:l,iconSize:c,renderCell:r})=>t.createElement($,{key:n,label:o,side:"top",sideOffset:0,ariaLabel:`Info about ${o} by time interval`},t.createElement("tr",null,t.createElement("th",{scope:"row",className:"w-10 pr-2"},t.createElement(B,{svgName:n,sizeKey:a?"smIcon20":c,className:l})),s&&Array.isArray(s)&&s.map(m=>t.createElement(t.Fragment,{key:I(m).timeScale},r(m,e)))))))))},qe=()=>{const{currentWeather:e}=F(),{isSmallScreens:s}=j(),{days:a,dateNow:i}=Ne(),o=Ue(s,e);return t.createElement("div",{className:"rows-[1/1] col-[1/1] flex h-full w-full flex-col justify-between gap-3 backface-hidden"},t.createElement("div",{className:"mb-3 text-center hg:mb-5"},t.createElement("span",{className:"font-weather text-3.5xl text-contrastWhite md:text-4.5xl hg:text-5xl"},a),t.createElement("p",{className:"text-2.5xl font-weather text-contrastWhite md:text-3.5xl"},i)),t.createElement("ul",{className:"grid grid-cols-2 grid-rows-2 gap-y-3.5"},Array.isArray(o)&&o.map(({icon:n,iconSize:l,value:c,label:r,hint:m,justifyItemClass:d,subTextValue:g})=>t.createElement("li",{key:r},t.createElement($,{label:m,side:"top",align:d==="justify-end"?"end":"start",sideOffset:4,ariaLabel:`Info about ${r} for current time`},t.createElement("div",{className:`flex items-center gap-3 text-base text-contrastWhite md:text-medium hg:text-2xl ${d}`},t.createElement("div",{className:d==="justify-end"?"order-last":"order-1"},t.createElement(B,{svgName:n,sizeKey:l,className:"fill-whiteBase"})),t.createElement("p",{className:"flex items-baseline gap-x-1 even:order-1"},c,t.createElement("span",{className:"text-xs hg:text-small"},g))))))))},O="py-1.5 text-center text-small text-whiteBase md:py-4 md:text-base hg:text-medium",Ke=(e,s)=>{const{mainTemperature:a}=I(e,s);return t.createElement("td",{className:O},a)},Xe=e=>{const{iconWeather:s,iconAlt:a}=I(e);return t.createElement("td",{className:"h-35px"},t.createElement("img",{className:"cover",src:`${W.WEATHER_ICON_URL}/${s}@2x.png`,alt:a}))},Ye=e=>{const{humidityPercent:s}=I(e);return t.createElement("td",{className:O},s)},Je=e=>{const{pressureMmHg:s}=I(e);return t.createElement("td",{className:O},s)},Qe=e=>{const{windSpeed:s}=I(e);return t.createElement("td",{className:O},s)},Ze=()=>{const{hasGeolocationPermission:e,isCelsius:s,flippingCard:a,toggleTemperatureScale:i,flipWeatherDetails:o}=ae(),{isWeatherLoading:n,currentWeather:l,weatherError:c}=F(),r=l&&Object.keys(l).length===0,m=c&&c,d=!n&&r||!!m,g=n&&e,x=!n&&!r&&e,{iconWeather:b,iconAlt:h}=Y(l),u=`${(()=>{switch(!0){case(!n&&r&&!m):return"flex flex-col items-center justify-between px-6 py-10 text-center md:px-10";case!!m:return"px-6 py-10 text-center md:px-10";default:return"px-5 py-8 md:px-8 md:pt-10 hg:pt-8"}})()} h-[515px] md:h-700px flex flex-col justify-between w-full bg-accentBase hg:w-442px`;return t.createElement("div",{className:u},d&&t.createElement(Le,{showError:m}),g&&t.createElement(q,{variant:"element"}),x&&t.createElement(t.Fragment,null,t.createElement(_e,{toggleTemperatureScale:i,currentWeather:l,isCelsius:s}),b&&t.createElement("img",{className:"m-auto h-32 w-32 md:h-165px md:w-165px hg:h-180px hg:w-180px",src:`${W.WEATHER_ICON_URL}/${b}@2x.png`,alt:h}),t.createElement("div",{className:"h-56 w-full cursor-pointer perspective-10 md:h-[314px]",onClick:o},t.createElement("div",{className:`grid h-full w-full grid-cols-1 grid-rows-1 transition-transform transform-style-3d ${a}`},t.createElement(qe,null),t.createElement(Ve,{isCelsius:s})))))},We=({myButtonRef:e,handleOpenConfirm:s})=>t.createElement($,{label:"Delete news from archive",side:"bottom",sideOffset:16,ariaLabel:"Button for deleting news from archive"},t.createElement("div",null,t.createElement(_,{ref:e,onHandleClick:s,variant:V.Small,hasIcon:!0,svgName:"close",svgSize:"mdIcon24",classNameIcon:"stroke-whiteBase",ariaLabel:"Delete news from archive button",classNameButton:"absolute z-40 top-3 right-3 bg-accentBase/[.8] py-1.5"}))),et=({liveNews:e})=>{const{isWideScreens:s}=j();return t.createElement("div",{className:"mt-4 px-4"},t.createElement("p",{className:"mb-2 line-clamp-1 text-end text-small leading-tight text-darkBase dark:text-whiteBase lg:text-base hg:text-medium"},e!=null&&e.author?`By ${e==null?void 0:e.author}`:`${e==null?void 0:e.materialType}`),t.createElement("h2",{className:"mb-4 line-clamp-3 h-100px text-3xl font-bold leading-tight tracking-mediumTight dark:text-whiteBase md:h-132px md:text-4xl md:tracking-tighter hg:h-[120px] hg:text-3.5xl"},e==null?void 0:e.title),t.createElement("p",{className:"mb-4 line-clamp-3 h-57px text-base leading-tight text-darkBase dark:text-whiteBase md:h-66px md:text-medium hg:h-[72px] hg:text-xl"},e==null?void 0:e.description),t.createElement("div",{className:"flex justify-between"},t.createElement("p",{className:"text-base text-greyAlt md:text-medium hg:text-xl"},e==null?void 0:e.publishDate),t.createElement("div",{className:"flex translate-x-full items-center gap-2 rounded-2xl bg-accentAlt pr-2 transition-all group-hover:translate-x-0 group-hover:bg-accentAlt dark:bg-transparent"},t.createElement(B,{svgName:"triangle-double",sizeKey:s?"smIcon20":"xsIcon16",className:"fill-whiteBase"}),t.createElement("p",{className:"text-base text-whiteBase transition-colors md:text-medium hg:py-px hg:text-xl"},"Click for read more..."))))},tt=({liveNews:e,isFavourite:s,setIsFavourite:a,setHasRead:i,getNewsState:o})=>{const[n,l]=E.useState(!1),{savedNews:c,updateSavedNews:r,addVotedNews:m,removeNews:d,removeFavouriteNews:g}=L(),{showToast:x}=ee(),{setIsScrollDisabled:b}=pe(),{isArchiveActive:h,isFavoriteActive:y}=v();E.useEffect(()=>{(async()=>{n&&(await m(c),l(!1),y&&(e!=null&&e.newsUrl)&&g(e.newsUrl))})()},[n,m,y]);const u=e&&(e==null?void 0:e.newsUrl)!==void 0&&!h,{savedFavourite:p,savedRead:f,savedAdditionDate:w}=o(),k=S=>{if(S.stopPropagation(),S.preventDefault(),u){a(!s),l(!0);const H=fe({liveNews:e,savedFavourite:p,savedRead:f,savedAdditionDate:w});H&&r(H)}},A=E.useCallback(()=>{if(u&&!f){i(!0),l(!0);const S=he({liveNews:e,savedFavourite:p,savedRead:f,savedAdditionDate:w});S&&r(S)}},[u,c,r]);return{handleChangeFavourites:k,handleReadNews:A,handleDeleteNews:async(S,H)=>{S.stopPropagation(),S.preventDefault();try{const D=await d(H);x(D.meta.requestStatus)}catch(D){console.error("Error during removeNews: ",D)}finally{b(!1)}}}},ne=({liveNews:e})=>{const{savedNews:s,allArchive:a}=L(),{isArchiveActive:i}=v(),{savedFavourite:o,savedRead:n}=h(),[l,c]=E.useState(o??!1),[r,m]=E.useState(n??!1),{isAuthenticated:d}=K();E.useEffect(()=>{d&&h()&&(c(o??!1),m(n??!1))},[h,d,e]);const{handleChangeFavourites:g,handleReadNews:x,handleDeleteNews:b}=tt({liveNews:e,isFavourite:l,setIsFavourite:c,setHasRead:m,getNewsState:h});function h(){const y=i?a:s,u=y==null?void 0:y.find(p=>p.newsUrl===(e==null?void 0:e.newsUrl));return{savedFavourite:u==null?void 0:u.isFavourite,savedRead:u==null?void 0:u.hasRead,savedAdditionDate:u==null?void 0:u.additionDate}}return{isFavourite:l,hasRead:r,handleChangeFavourites:g,handleReadNews:x,handleDeleteNews:b}},st=({liveNews:e,isFavourite:s,buttonData:a})=>{const[i,o]=E.useState(!1),{handleChangeFavourites:n}=ne({liveNews:e}),{isArchiveActive:l}=v(),c=xe(l,s),r=ye(s,i,l),m=`absolute bottom-3 right-2 z-20 flex items-center gap-x-1 rounded-3xl bg-contrastWhite px-3 py-1.5 text-small font-medium text-darkBase transition-colors duration-500 lg:text-medium ${l?"":"group hocus:bg-accentBase hocus:text-whiteBase"}`;return t.createElement("button",{id:a==null?void 0:a.id,type:"button",className:m,onClick:n,onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1)},c,t.createElement(B,{svgName:"heart",sizeKey:"xsIcon16",className:r}))},at=({liveNews:e={}})=>{const s=t.createRef(),{isAuthenticated:a}=K(),{isOpenModal:i,modalType:o}=Z(),{toggleModal:n,popUpRef:l,isOpenModalForItem:c}=be(),{isHomeActive:r,isArchiveActive:m,isFavoriteActive:d}=v(),{isFavourite:g,hasRead:x,handleReadNews:b,handleDeleteNews:h}=ne({liveNews:e}),y=async(f,w)=>{w&&(n(),await h(f,w))},u=a&&x&&(r||m||d),p=i&&c&&a&&o==="deleteNews"&&(e==null?void 0:e._id);return t.createElement(t.Fragment,null,(e==null?void 0:e.newsUrl)&&t.createElement("a",{rel:"noopener noreferrer nofollow",className:"group block transition-all",href:e.newsUrl,target:"_blank",onClick:a?b:void 0,"aria-label":"Click to read current news"},t.createElement("div",{className:`${u?"absolute z-20 h-full w-full bg-whiteBase/[.4]":"hidden"}`}),m?t.createElement(We,{myButtonRef:s,handleOpenConfirm:f=>n(f,!0,"deleteNews")}):null,t.createElement("p",{className:"absolute left-0 top-10 z-20 rounded-r bg-accentBase/[.7] px-2 py-1 text-small font-medium text-contrastWhite hg:text-medium"},e==null?void 0:e.category," / ",e==null?void 0:e.materialType),u?t.createElement("p",{className:"absolute right-14 top-3.5 z-10 flex items-center gap-1 text-base font-bold text-readBase md:top-5"},"Already read",t.createElement(B,{svgName:"check",sizeKey:"smIcon18",className:"fill-readBase"})):null,t.createElement("div",{className:"relative flex h-395px items-center justify-center overflow-hidden rounded-[10px]"},t.createElement("p",{className:"absolute bottom-3 left-3 z-10 text-whiteBase opacity-0 drop-shadow-lg transition-opacity group-hover:opacity-100"},e==null?void 0:e.edition),e&&(e!=null&&e.imgLink)?t.createElement("img",{loading:"lazy",className:"absolute h-full max-w-none rounded-xl object-cover",src:e==null?void 0:e.imgLink,alt:e!=null&&e.imgAlt?e==null?void 0:e.imgAlt:"plug image"}):t.createElement(se,{variant:"card"}),a&&t.createElement(st,{liveNews:e,isFavourite:g,buttonData:{id:`Add ${e==null?void 0:e.title} to favourites or remove from them`}})),t.createElement(et,{liveNews:e})),p&&t.createElement(Ee,{closeModal:n,modalRef:l},t.createElement(Pe,{handleClose:f=>n(f),handleDelete:f=>y(f,e._id),title:"Delete news"})))},ot=0,nt=1,ce="overflow-hidden rounded-[10px] shadow-card transition-colors dark:shadow-darkCard",ct=e=>`${e?"mb-0":"mb-10 md:mb-12 lg:mb-[60px]"} max-md:space-y-7 md:grid md:grid-cols-2 md:gap-[30px] lg:grid-cols-3 lg:gap-x-8 lg:gap-y-10 hg:gap-10`,it=e=>{let s="";switch(e){case ot:s="md:col-start-1 md:row-start-1 lg:col-start-1";break;case nt:s="lg:col-start-2 lg:row-start-1";break}return`${ce} ${s} relative h-655px w-72 md:h-700px md:w-353px lg:w-395px hg:w-442px`},ht=({currentItems:e,currentPage:s})=>{const{isWeatherLoading:a}=F(),{isFavoriteActive:i}=v(),o=ct(i);return t.createElement("ul",{className:o},s&&s===1&&t.createElement("li",{className:`${ce} max-md:h-515px md:col-start-2 lg:col-start-3`},a?t.createElement(q,{variant:"element"}):t.createElement(Ze,null)),Array.isArray(e)&&(e==null?void 0:e.map((n,l)=>t.createElement("li",{key:n.newsUrl,className:it(l)},t.createElement(at,{liveNews:n})))))},lt=()=>{const{headline:e}=R(),{isHomeActive:s,isFavoriteActive:a,isReadActive:i,isArchiveActive:o}=v();return{getHeadline:()=>{switch(!0){case(e&&s):return e;case a:return"Favourite news";case i:return"Read news";case o:return"Archive news";default:return""}}}},N=()=>{const{hasResults:e}=X(),{isLoadingAPIData:s}=R(),{isLoadingDBData:a}=L(),{isHomeActive:i,isFavoriteActive:o,isReadActive:n,isArchiveActive:l}=v(),c=a||e==="loading",r=s||c;return{commonDBLoader:c,isHomeLoader:r,shouldShowLoader:i&&r||(o||n)&&c||l&&a}},ie=()=>{const{hasResults:e}=X(),{errorAPI:s,hasRequestResults:a}=R(),{allArchive:i,archiveHistoryLog:o,isLoadingDBData:n}=L(),l=v(),{rebuiltNews:c}=te(l),{isHomeLoader:r}=N(),{isHomeActive:m,isFavoriteActive:d,isReadActive:g,isArchiveActive:x}=l,b=s==null?void 0:s.toString().includes("429"),h=(c==null?void 0:c.length)===0||a==="empty"||e==="empty",y=h||b,u=i.length===0&&o.length===0;return{isHomePlug:y,commonPlug:h,shouldShowPlug:m&&y&&!r||(d||g)&&h&&!n||x&&u&&!n}},rt=()=>{const{allArchive:e,isLoadingDBData:s}=L(),{isArchiveActive:a,isFavoriteActive:i,isHomeActive:o,isReadActive:n}=v(),{isHomeLoader:l,commonDBLoader:c}=N(),{isHomePlug:r,commonPlug:m}=ie(),d=o&&!l&&!r,g=(i||n)&&!c&&!m,x=a&&!s&&(e==null?void 0:e.length)>0;return{shouldShowContent:d||g||x}},mt=()=>{const{filteredNews:e}=X(),{errorAPI:s,newsByKeyword:a,newsByCategory:i,newsByDate:o}=R(),{authError:n,statusMessage:l}=K(),{allFavourites:c,allReads:r,dbSuccessMessage:m}=L(),{setOpenToast:d}=ee(),g=v(),{rebuiltNews:x}=te(g),{isHomeLoader:b,commonDBLoader:h}=N(),{isArchiveActive:y,isFavoriteActive:u,isHomeActive:p,isReadActive:f}=g;E.useEffect(()=>{(u||f)&&(x==null?void 0:x.length)>0&&d(!0)},[]);const w=a&&a.length>0||i&&i.length>0||o&&o.length>0,A=["Email sent successfully","Password has successfully changed","User sign-in success","Your saved password has been successfully retrieved","Sign-out success"].includes(l),U=typeof n=="string"||typeof s=="number",S=!b&&w||(e==null?void 0:e.length)>0,H=u&&!h&&(c==null?void 0:c.length)>0,D=f&&!h&&(r==null?void 0:r.length)>0,J=y&&(m==="Remove news success"||m==="Your History Log news feed has been successfully cleared")&&!h,le=p&&(U||A||S)||H||D||J;let C,T;switch(!0){case(p&&A):C="success",T="non-interactive";break;case(p&&U):C="error",T="interactive";break;case(p&&S):C="info",T="non-interactive";break;case H:C="info",T="non-interactive";break;case D:C="info",T="non-interactive";break;case J:C="success",T="interactive";break;default:C="info",T="non-interactive";break}return{shouldShowToast:le,statusToast:C,toastType:T}},ft=({children:e})=>{const{shouldShowLoader:s}=N(),{shouldShowPlug:a}=ie(),{shouldShowContent:i}=rt(),{shouldShowToast:o,statusToast:n,toastType:l}=mt(),{getHeadline:c}=lt();return t.createElement(t.Fragment,null,s&&t.createElement(q,{variant:"generalSection"}),o&&t.createElement(ve,{variant:l,status:n}),a&&t.createElement(se,{variant:"page"}),i&&t.createElement("h1",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},c()),i&&e)};export{Pe as D,ht as N,ft as P};
