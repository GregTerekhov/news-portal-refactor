import{r as P,u as v,a as y,b as x,c as p,R as l,P as w,V as N,d as F,e as L,f as G,g as H}from"./index-c05404ce.js";import{P as D,N as M}from"./PageTemplate-6ba6c8c4.js";import"./images-1667f645.js";import"./Toast-26291f4d.js";const f={FIRST_MOBILE_PAGE_COUNT:4,FIRST_TABLET_PAGE_COUNT:7,FIRST_DESKTOP_PAGE_COUNT:8,OTHER_MOBILE_PAGE_COUNT:5,OTHER_TABLET_PAGE_COUNT:8,OTHER_DESKTOP_PAGE_COUNT:9},T=1,g={DESKTOP_BUTTONS_QUANTITY:3,MOBILE_BUTTONS_QUANTITY:6},K=(t,s,n)=>{const e=[s];let o=t-s;for(;o>0;)e.push(n),o-=n;return e},Q=(t,s)=>{const n=t&&t.slice(0,-1).reduce((o,c)=>o+c,0);return s-n},Y=(t,s,n)=>K(t,s,n),b=(t,s)=>{try{return Q(t,s)}catch(n){return console.error(n.message)}};function W(t,s){switch(!0){case t:return f.FIRST_DESKTOP_PAGE_COUNT;case s:return f.FIRST_TABLET_PAGE_COUNT;default:return f.FIRST_MOBILE_PAGE_COUNT}}function $(t,s){switch(!0){case t:return f.OTHER_DESKTOP_PAGE_COUNT;case s:return f.OTHER_TABLET_PAGE_COUNT;default:return f.OTHER_MOBILE_PAGE_COUNT}}function V(t,s,n){return Y(t,W(s,n),$(s,n))}const j=(t,s,n,e,o)=>{const c=s.length,i=t-1,u=t+1,O=n?g.MOBILE_BUTTONS_QUANTITY:g.DESKTOP_BUTTONS_QUANTITY,a=[];if(c<=O)for(let m=T;m<=c;m+=1)a.push(e(m));else t===T?(a.push(e(t)),a.push(e(u)),a.push(o("next")),a.push(e(c))):t===c?(a.push(e(T)),a.push(o("prev")),a.push(e(i)),a.push(e(t))):t>T&&t<c&&(t===2&&(a.push(o("prev")),a.push(e(t)),a.push(e(u)),a.push(o("next")),a.push(e(c))),t-1>T&&t+1!==c&&(a.push(o("prev")),a.push(e(i)),a.push(e(t)),a.push(e(u)),a.push(o("next"))),t+1===c&&(a.push(o("prev")),a.push(e(i)),a.push(e(t)),a.push(e(c))));return a},z=t=>{const[s,n]=P.useState([]),{popularNews:e,newsByKeyword:o,newsByCategory:c,newsByDate:i}=v(),{filteredNews:u}=y(),{isMobile:O,isTablet:a,wideScreens:m}=x(),{currentPage:r}=p(),E=t&&(t==null?void 0:t.length)||0,A=V(E,m,a),h=A[r-1]||0,S=b(A,E);P.useEffect(()=>{if(t&&(t==null?void 0:t.length)>0){const I=r*h-T>=E,C=r>T&&I&&!!S;let _,d;switch(!0){case r===T:_=r*h,d=_-h;break;case C:_=r*h,d=_-h;break;default:_=r*h-T,d=_-h;break}const R=t.slice(d,_);n(R)}},[e,o,c,i,u,r]);const U=Math.ceil(r!==1&&O?E/h+1:E/h),k=Array.from({length:U},(I,C)=>C+1);return{currentItems:s,pageNumbers:k}},B=({direction:t,pageNumbers:s,handlePrevClick:n,handleNextClick:e})=>{const{isNotMobile:o}=x(),{currentPage:c}=p(),i=c-1===0,u=c===(s==null?void 0:s.length);return l.createElement(w,{id:`${t} page button`,variant:N.Other,onHandleClick:t==="Prev"?n:e,width:"w-32",disabled:t==="Prev"?i:u,hasIcon:!0,svgName:"arrow",svgSize:"xsIcon14",classNameIcon:`${t==="Prev"?"rotate-90":"-rotate-90"}  fill-whiteBase`,classNameButton:t==="Prev"?"flex-row-reverse":""},o?l.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},t):null)},q=({pageNumber:t,onClick:s})=>{const{currentPage:n}=p(),e=`h-10 border-accentBase dark:border-whiteBase font-medium transition-colors duration-500 ${t===n?"bg-accentBase text-contrastWhite hocus:bg-accentAlt":"text-darkBase dark:text-whiteBase"}`;return l.createElement("li",{key:t,onClick:()=>s(t)},l.createElement(w,{"aria-label":`Page ${t.toString()} button`,classNameButton:`${e}`,variant:N.Small},t))},J=({pageNumbers:t})=>{const{isNotMobile:s}=x(),{currentPage:n,setCurrentPage:e}=p(),o=r=>l.createElement("li",{key:r,className:"text-darkBase dark:text-whiteBase"},"..."),c=r=>{e(r),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},i=()=>{n>1&&(e(n-1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))},u=()=>{n<t.length&&(e(n+1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))},m=j(n,t,s,r=>l.createElement(q,{pageNumber:r,onClick:c}),o).map((r,E)=>l.createElement(l.Fragment,{key:E},r));return l.createElement("div",{className:"flex items-center justify-center gap-2"},l.createElement(B,{direction:"Prev",handlePrevClick:i}),l.createElement("ul",{id:"page-numbers",className:"flex items-center gap-2"},m),l.createElement(B,{direction:"Next",pageNumbers:t,handleNextClick:u}))},X=1,nt=()=>{const{fetchPopular:t}=v(),{getSavedNews:s}=F(),{isAuthenticated:n}=L(),{currentPage:e}=p(),o=G(),{rebuiltNews:c}=H(o),{currentItems:i,pageNumbers:u}=z(c??[]);return P.useEffect(()=>{t({period:X}),n&&s()},[t,s,n]),l.createElement(D,null,l.createElement(M,{currentItems:i,currentPage:e}),l.createElement(J,{pageNumbers:u}))};export{nt as default};
