import{k as y,l as w,r as v,R as e,U as B,m as b,S as f,c as L,d as S,e as C,L as D,A,N as P}from"./index-51ed7a5c.js";import{N as I,P as M}from"./NewsList-368ef4a4.js";import"./images-65945855.js";const R=s=>{const a={};return s&&(s==null?void 0:s.length)>0&&s.forEach(r=>{const l=r==null?void 0:r.additionDate;if(l){const n=y(l,"LLLL yyyy",{locale:w});a[n]||(a[n]=[]),a[n].push(r)}}),a},F=({logData:s})=>{const[a,r]=v.useState(""),[l,n]=v.useState(1),o=a?s.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())):s,i=7,p=o.length,u=Math.ceil(p/i),g=(l-1)*i,x=g+i,d=o.slice(g,x),h=t=>{const c=t.target.value;r(c),n(1)},m=t=>{t>=1&&t<=u&&n(t)};return e.createElement("div",{className:"flex flex-col mb-6 rounded-lg shadow-modal overflow-hidden"},e.createElement("div",{className:"-m-1.5 overflow-x-auto"},e.createElement("div",{className:"p-1.5 min-w-full inline-block align-middle"},e.createElement("div",{className:"border rounded-lg divide-y divide-greyAlt/[.4] dark:border-greyBase/[.4] dark:divide-greyBase/[.4]"},e.createElement("div",{className:"py-3 px-4"},e.createElement("div",{className:"relative max-w-xs"},e.createElement(B,{inputData:{name:"Deleted news",type:"text",value:a,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"icon-search",onChange:t=>h(t),variant:b.FilterServiceBlock}))),e.createElement("div",{className:"overflow-hidden"},e.createElement("table",{className:"min-w-full divide-y divide-greyAlt/[.4] dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] dark:bg-greyBase/[.4]"},e.createElement("tr",null,e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs md:text-small font-medium text-greyBase dark:text-whiteBase uppercase"},"Title"),e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs md:text-small font-medium text-greyBase dark:text-whiteBase uppercase"},"Category"),e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs  md:text-small font-medium text-greyBase dark:text-whiteBase uppercase"},"Addition Date"),e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs md:text-small font-medium text-greyBase dark:text-whiteBase uppercase"},"Deletion Date"))),e.createElement("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700"},d&&d.map(({title:t,newsUrl:c,category:E,additionDate:N,deletionDate:k})=>e.createElement("tr",{key:c,className:"even:bg-greyAlt/[.1] group"},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-darkBase dark:text-whiteBase"},e.createElement("a",{href:c,target:"_blank",className:" group-hover:text-accentBase transition-colors duration-500"},t.length>60?`${t.slice(0,65)}...`:t)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-darkBase dark:text-whiteBase"},E),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-darkBase dark:text-whiteBase"},y(N,"dd/MM/yyyy")),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-darkBase dark:text-whiteBase"},y(k,"dd/MM/yyyy"))))))),e.createElement("div",{className:"py-1 px-4"},e.createElement("nav",{className:"flex items-center space-x-1"},e.createElement("button",{type:"button",onClick:()=>m(l-1),className:"p-2.5 inline-flex items-center gap-x-2 rounded-full hover:bg-greyAlt/[.2] disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:hover:bg-whiteBase/[.2] dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{"aria-hidden":"true"},e.createElement(f,{svgName:"icon-arrow-left",size:20,className:"fill-accentBase dark:fill-whiteBase"})),e.createElement("span",{className:"sr-only"},"Previous")),Array.from({length:u},(t,c)=>e.createElement("button",{key:c,type:"button","aria-current":"page",className:"min-w-[40px] flex justify-center items-center text-gray-800 hover:bg-greyAlt/[.2] py-2.5 text-sm rounded-full dark:text-white dark:hover:bg-whiteBase/[.2]",onClick:()=>m(c+1)},c+1)),e.createElement("button",{type:"button",onClick:()=>m(l+1),className:"p-2.5 inline-flex items-center gap-x-2 text-sm rounded-full text-gray-800 hover:bg-greyAlt/[.2] disabled:opacity-50 disabled:pointer-events-none  dark:hover:bg-whiteBase/[.2] dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{className:"sr-only"},"Next"),e.createElement("span",{"aria-hidden":"true"},e.createElement(f,{svgName:"icon-arrow-left",size:20,className:"fill-accentBase dark:fill-whiteBase rotate-180"})))))))))},j=()=>{const{dbSuccessMessage:s,isLoadingDBData:a,allArchive:r,archiveHistoryLog:l,getHistoryLog:n,getArchives:o}=L(),{isAuthenticated:i}=S(),{openToast:p,setOpenToast:u}=C();v.useEffect(()=>{o(),n()},[o,n]);const g=R(r),x=a,d=!a&&r.length!==0;return i&&e.createElement(e.Fragment,null,x&&e.createElement(D,{variant:"generalSection"}),d&&e.createElement(e.Fragment,null,e.createElement(F,{logData:l}),Object.entries(g).reverse().map(([h,m])=>e.createElement(A,{key:h,dateSeparator:h,position:"archivePage"},e.createElement(I,{currentItems:m})))),!x&&!d&&e.createElement(M,{variant:"page"}),p&&s==="Remove news success"&&e.createElement(P,{variant:"non-interactive",openToast:p,setOpenToast:u,title:"Delete news",description:"News has been successfully deleted"}))};export{j as default};
