import{l as v,m as B,r as x,R as e,U as b,n as S,S as f,I as E,c as L,d as C,e as D,i as I,L as A,A as P,N as M}from"./index-6fd93497.js";import{N as R,P as F}from"./NewsList-857f8111.js";import"./images-175067f1.js";const H=s=>{const a={};return s&&(s==null?void 0:s.length)>0&&s.forEach(l=>{const c=l==null?void 0:l.additionDate;if(c){const r=v(c,"LLLL yyyy",{locale:B});a[r]||(a[r]=[]),a[r].push(l)}}),a},O=({logData:s})=>{const[a,l]=x.useState(""),[c,r]=x.useState(1),d=a?s.filter(t=>t.title.toLowerCase().includes(a.toLowerCase())):s,o=7,h=d.length,m=Math.ceil(h/o),p=(c-1)*o,y=p+o,u=d.slice(p,y),g=t=>{const n=t.target.value;l(n),r(1)},i=t=>{t>=1&&t<=m&&r(t)};return e.createElement("div",{className:"mb-6 flex flex-col overflow-hidden rounded-lg shadow-modal"},e.createElement("div",{className:"-m-1.5 overflow-x-auto"},e.createElement("div",{className:"inline-block min-w-full p-1.5 align-middle"},e.createElement("div",{className:"divide-y divide-greyAlt/[.4] rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},e.createElement("div",{className:"px-4 py-3"},e.createElement("div",{className:"relative max-w-xs"},e.createElement(b,{inputData:{name:"Deleted news",type:"text",value:a,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"icon-search",onChange:t=>g(t),variant:S.FilterServiceBlock}))),e.createElement("div",{className:"overflow-hidden"},e.createElement("table",{className:"min-w-full divide-y divide-greyAlt/[.4] dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] dark:bg-greyBase/[.4]"},e.createElement("tr",null,e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase dark:text-whiteBase md:text-small"},"Title"),e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase dark:text-whiteBase md:text-small"},"Category"),e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs  font-medium uppercase text-greyBase dark:text-whiteBase md:text-small"},"Addition Date"),e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase dark:text-whiteBase md:text-small"},"Deletion Date"))),e.createElement("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700"},u&&u.map(({title:t,newsUrl:n,category:N,additionDate:k,deletionDate:w})=>e.createElement("tr",{key:n,className:"group even:bg-greyAlt/[.1]"},e.createElement("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-darkBase dark:text-whiteBase"},e.createElement("a",{href:n,target:"_blank",className:" transition-colors duration-500 group-hover:text-accentBase"},t.length>60?`${t.slice(0,65)}...`:t)),e.createElement("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-darkBase dark:text-whiteBase"},N),e.createElement("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-darkBase dark:text-whiteBase"},v(k,"dd/MM/yyyy")),e.createElement("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-darkBase dark:text-whiteBase"},v(w,"dd/MM/yyyy"))))))),e.createElement("div",{className:"px-4 py-1"},e.createElement("nav",{className:"flex items-center space-x-1"},e.createElement("button",{type:"button",onClick:()=>i(c-1),className:"inline-flex items-center gap-x-2 rounded-full p-2.5 hover:bg-greyAlt/[.2] disabled:pointer-events-none disabled:opacity-50 dark:text-white dark:hover:bg-whiteBase/[.2] dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{"aria-hidden":"true"},e.createElement(f,{svgName:"icon-arrow-left",size:E.smIcon20,className:"fill-accentBase dark:fill-whiteBase"})),e.createElement("span",{className:"sr-only"},"Previous")),Array.from({length:m},(t,n)=>e.createElement("button",{key:n,type:"button","aria-current":"page",className:"flex min-w-[40px] items-center justify-center rounded-full py-2.5 text-sm text-gray-800 hover:bg-greyAlt/[.2] dark:text-white dark:hover:bg-whiteBase/[.2]",onClick:()=>i(n+1)},n+1)),e.createElement("button",{type:"button",onClick:()=>i(c+1),className:"inline-flex items-center gap-x-2 rounded-full p-2.5 text-sm text-gray-800 hover:bg-greyAlt/[.2] disabled:pointer-events-none disabled:opacity-50  dark:hover:bg-whiteBase/[.2] dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{className:"sr-only"},"Next"),e.createElement("span",{"aria-hidden":"true"},e.createElement(f,{svgName:"icon-arrow-left",size:E.smIcon20,className:"rotate-180 fill-accentBase dark:fill-whiteBase"})))))))))},j=()=>{const{dbSuccessMessage:s,isLoadingDBData:a,allArchive:l,archiveHistoryLog:c,errorDB:r,getHistoryLog:d,getArchives:o}=L(),{isAuthenticated:h}=C(),{openToast:m,setOpenToast:p}=D(),y=I();x.useEffect(()=>{r&&r>=500&&y("/serverError")},[r]),x.useEffect(()=>{o(),d()},[o,d]);const u=H(l),g=a,i=!a&&l.length!==0;return h&&e.createElement(e.Fragment,null,g&&e.createElement(A,{variant:"generalSection"}),i&&e.createElement(e.Fragment,null,e.createElement(O,{logData:c}),Object.entries(u).reverse().map(([t,n])=>e.createElement(P,{key:t,dateSeparator:t,position:"archivePage"},e.createElement(R,{currentItems:n})))),!g&&!i&&e.createElement(F,{variant:"page"}),m&&s==="Remove news success"&&e.createElement(M,{variant:"non-interactive",openToast:m,setOpenToast:p,title:"Delete news",description:"News has been successfully deleted"}))};export{j as default};
