import{x as y,y as A,z as E,B as f,D as T,e as w,s as P,E as x,F as b,R as t,A as I,G as v,I as S,P as B,V as k,J as C}from"./index-bd383d04.js";import{T as R}from"./Toast-a6c48281.js";const U=({newPassword:s,confirmPassword:n,password:a,errors:e})=>{var i,l,d,r,u;const c=[{placeholder:"Enter new password",fieldValue:s,errors:(i=e==null?void 0:e.newPassword)==null?void 0:i.message,label:"newPassword",ariaInvalid:!!(e!=null&&e.newPassword)},{placeholder:"Confirm new password",fieldValue:n,errors:(l=e==null?void 0:e.confirmPassword)==null?void 0:l.message,label:"confirmPassword",ariaInvalid:!!(e!=null&&e.confirmPassword)}];return s&&n&&!((d=e==null?void 0:e.newPassword)!=null&&d.message)&&!((r=e==null?void 0:e.confirmPassword)!=null&&r.message)&&s.length!==0&&n.length!==0&&c.push({placeholder:"Enter your current password",fieldValue:a,errors:(u=e==null?void 0:e.password)==null?void 0:u.message,label:"password",ariaInvalid:!!(e&&(e!=null&&e.password))}),c},F=({email:s,password:n,errors:a})=>{var o,i,l;const e=[{type:"email",placeholder:"Enter new email",fieldValue:s,errors:(o=a==null?void 0:a.email)==null?void 0:o.message,label:"email",iconName:"envelop",ariaInvalid:!!(a!=null&&a.email),autofill:"email"}];return s&&!((i=a==null?void 0:a.email)!=null&&i.message)&&s.length!==0&&e.push({type:"password",placeholder:"Enter your current password",fieldValue:n,errors:(l=a==null?void 0:a.password)==null?void 0:l.message,label:"password",iconName:"password",ariaInvalid:!!(a!=null&&a.password)}),e},H=y({email:A(),password:E()}),M=y({newPassword:f(),confirmPassword:T(f()),password:E()}),D=()=>{const{updateEmail:s}=w(),{showToast:n}=P(),{handleSubmit:a,register:e,watch:c,reset:o,getValues:i,formState:{errors:l}}=x({resolver:b(H),defaultValues:{email:"",password:""}}),[d,r]=c(["email","password"]),u=async h=>{try{const p=await s(h);n(p.meta.requestStatus)}catch(p){console.error("Error during updateEmail:",p)}finally{o({...i,email:"",password:""})}},m=F({email:d,password:r,errors:l});return{emailSubmit:a,updateEmailRegister:e,errors:l,email:d,handleEmailSubmitHandler:u,emailInputs:m}},q=()=>{const{updatePassword:s}=w(),{showToast:n}=P(),{handleSubmit:a,register:e,watch:c,reset:o,getValues:i,formState:{errors:l}}=x({resolver:b(M),defaultValues:{newPassword:"",confirmPassword:"",password:""}}),[d,r,u]=c(["newPassword","confirmPassword","password"]),m=async p=>{try{const{newPassword:g,password:N}=p,V=await s({password:N,newPassword:g});n(V.meta.requestStatus)}catch(g){console.error("Error during updatePassword:",g)}finally{o({...i,newPassword:"",confirmPassword:"",password:""})}},h=U({newPassword:d,confirmPassword:r,password:u,errors:l});return{passwordSubmit:a,updatePasswordRegister:e,handlePasswordSubmitHandler:m,passwordInputs:h}},G=()=>{const{isRefreshingUser:s}=w(),{emailSubmit:n,updateEmailRegister:a,emailInputs:e,handleEmailSubmitHandler:c}=D();return t.createElement(I,{position:"accountManagePage",filtersBlock:"Change your email"},t.createElement("form",{className:"space-y-4 pt-4 lg:space-y-8",onSubmit:n(c)},t.createElement("ul",{className:"space-y-4 lg:space-y-8"},Array.isArray(e)&&e.map(({type:o,placeholder:i,fieldValue:l,errors:d,label:r,iconName:u,ariaInvalid:m})=>t.createElement("li",{key:r},t.createElement(v,{inputData:{type:o,placeholder:i,fieldValue:l},errors:d,register:a,label:r,svgName:u,hasIcon:!0,variant:S.Account,ariaInvalid:m})))),t.createElement("p",{className:"text-small text-darkBase dark:text-whiteBase lg:text-medium hg:text-xl"},"To change your current email, enter the new email and confirm by inputting your current password in the new field. If all information is entered correctly, you will receive a notification confirming the successful update of your email."),t.createElement(B,{type:"submit",width:"w-28 lg:w-40",id:"Button for applying change your email",variant:k.Other,disabled:!!s},"Apply")))},O=()=>{const{passwordSubmit:s,updatePasswordRegister:n,handlePasswordSubmitHandler:a,passwordInputs:e}=q();return t.createElement(I,{position:"accountManagePage",filtersBlock:"Change your password"},t.createElement("form",{className:"space-y-4 pt-4 lg:space-y-8",onSubmit:s(a)},t.createElement("ul",{className:"space-y-4 lg:space-y-8"},Array.isArray(e)&&e.map(({placeholder:c,fieldValue:o,errors:i,label:l,ariaInvalid:d})=>t.createElement("li",{key:l},t.createElement(v,{inputData:{type:"password",placeholder:c,fieldValue:o},errors:i,register:n,label:l,svgName:"password",hasIcon:!0,variant:S.Account,ariaInvalid:d})))),t.createElement("p",{className:"text-small text-darkBase dark:text-whiteBase lg:text-medium hg:text-xl"},"To change your current password, enter the new password in the first field and repeat the entry in the second field. In the third field, confirm the change by inputting your current password. If all information is entered correctly, you will receive a notification confirming the successful update of your password."),t.createElement(B,{type:"submit",width:"w-28 lg:w-40",id:"Button for applying change and confirm your new password",variant:k.Other},"Apply")))},L=()=>{const{authError:s,statusMessage:n,isThirdPartyRegister:a}=w(),e=n==="Email is successfully updated"||n==="Password is successfully updated"||n.includes("linking"),o=e||s&&typeof s=="string";return t.createElement("div",null,t.createElement("h2",{className:"mb-14 text-end text-3xl leading-tighter text-darkBase dark:text-whiteBase hg:text-5xl"},"Account settings"),t.createElement("div",{className:"flex items-center justify-end"},t.createElement("div",{className:"w-52 space-y-2 md:w-80 md:space-y-6 lg:w-600px"},!a&&t.createElement(t.Fragment,null,t.createElement(G,null),t.createElement(O,null)),t.createElement("h3",{className:"text-darkBase dark:text-whiteBase md:text-2xl lg:mb-4 hg:text-3xl"},"Connected accounts"),t.createElement("p",{className:"text-small leading-normal text-darkBase dark:text-whiteBase lg:text-medium hg:text-xl"},"You can connect or disconnect your News account to Google, Facebook, or Apple to log in using this account. We will never send messages to your contacts without your permission."),t.createElement("hr",{className:"!border-greyAlt dark:!border-whiteBase"}),t.createElement(C,null))),o?t.createElement(R,{variant:"interactive",status:e?"success":"error"}):null)};export{L as default};
