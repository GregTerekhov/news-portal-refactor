import{u as N,a as O,R as i,P as v,b as B,V as S,I as R,c as y,r as I,d as w,e as F,f as L,g as G,h as D,T as H}from"./index-bbedbc49.js";import{P as M,N as K}from"./PageTemplate-899fb8b8.js";import{P as E}from"./pagination-b5779b30.js";import"./Toast-9151dc6f.js";const A=({direction:e,pageNumbers:t,handlePrevClick:a,handleNextClick:s})=>{const{isNotMobile:o}=N(),{currentPage:c}=O(),r=c-1===0,m=c===(t==null?void 0:t.length),P=()=>o?i.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},e):null;return i.createElement(v,{id:e==="Prev"?B.PreviousPage:B.NextPage,variant:S.Other,onHandleClick:e==="Prev"?a:s,width:"w-32",disabled:e==="Prev"?r:m,hasIcon:!0,svgName:R.Arrow,svgSize:y.xsIcon14,classNameIcon:`${e==="Prev"?"rotate-90":"-rotate-90"} fill-whiteBase`,classNameButton:e==="Prev"?"flex-row-reverse":""},P())},Q=({pageNumber:e,onClick:t})=>{const{currentPage:a}=O(),s=`h-10 font-medium ring-whiteBase border-accentBase dark:ring-darkBase ring-2 ${e===a?"bg-accentBase text-contrastWhite hocus:bg-accentAlt  dark:border-whiteBase":"text-darkBase dark:text-whiteBase dark:border-greyBase"}`;return i.createElement("li",{key:e,onClick:()=>t(e)},i.createElement(v,{"aria-current":"page","aria-label":`Page ${e.toString()} button`,classNameButton:s,variant:S.Small},e))},Y={FIRST_MOBILE_PAGE_COUNT:4,FIRST_TABLET_PAGE_COUNT:7,FIRST_DESKTOP_PAGE_COUNT:8,OTHER_MOBILE_PAGE_COUNT:5,OTHER_TABLET_PAGE_COUNT:8,OTHER_DESKTOP_PAGE_COUNT:9},l=1,W={DESKTOP_BUTTONS_QUANTITY:3,MOBILE_BUTTONS_QUANTITY:5},{FIRST_DESKTOP_PAGE_COUNT:$,FIRST_MOBILE_PAGE_COUNT:b,FIRST_TABLET_PAGE_COUNT:z,OTHER_DESKTOP_PAGE_COUNT:V,OTHER_MOBILE_PAGE_COUNT:j,OTHER_TABLET_PAGE_COUNT:q}=Y,{DESKTOP_BUTTONS_QUANTITY:J,MOBILE_BUTTONS_QUANTITY:X}=W,Z=(e,t,a)=>{const s=[t];let o=e-t;for(;o>0;)s.push(a),o-=a;return s},ee=(e,t)=>{const a=e&&e.slice(0,-1).reduce((s,o)=>s+o,0);return t-a},te=(e,t,a)=>Z(e,t,a);function se(e,t){switch(!0){case e:return b;case t:return z;default:return $}}function ne(e,t){switch(!0){case e:return j;case t:return q;default:return V}}const ae=(e,t)=>ee(e,t);function oe(e,t,a){return te(e,se(t,a),ne(t,a))}const ce=(e,t,a,s,o)=>{const c=t.length,r=e-l,m=e+l,P=a?X:J,p=e===l,u=e===c,h=e+l===c,_=e-l>l&&e+l!==c,T=e>l&&e<c,n=[];if(c<=P)for(let f=l;f<=c;f+=1)n.push(s(f));else p?(n.push(s(e)),n.push(s(m)),n.push(o(E.Next)),n.push(s(c))):u?(n.push(s(l)),n.push(o(E.Previous)),n.push(s(r)),n.push(s(e))):T&&(e===2&&(n.push(o(E.Previous)),n.push(s(e)),n.push(s(m)),n.push(o(E.Next)),n.push(s(c))),_&&(n.push(o(E.Previous)),n.push(s(r)),n.push(s(e)),n.push(s(m)),n.push(o(E.Next))),h&&(n.push(o(E.Previous)),n.push(s(r)),n.push(s(e)),n.push(s(c))));return n},le=(e,t,a)=>({handlePageNumberClick:r=>{e(r),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},handlePrevClick:()=>{t>=1&&(e(t-1),setTimeout(()=>{window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},100))},handleNextClick:()=>{t<=a.length&&(e(t+1),setTimeout(()=>{window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},100))}}),ie=e=>{const[t,a]=I.useState([]),{popularNews:s,newsByKeyword:o,newsByCategory:c,newsByDate:r}=w(),{filteredNews:m}=F(),{isSmallScreens:P,isTablet:p}=N(),{currentPage:u}=O(),h=e&&(e==null?void 0:e.length)||0,_=oe(h,P,p),T=_[u-l]||0,n=ae(_,h);I.useEffect(()=>{if(e&&(e==null?void 0:e.length)>0){const x=u*T-l>=h,C=u>l&&x&&!!n;let d,g;u===l?(d=u*T,g=d-T):C?(d=u*T,g=d-T-l):(d=u*T-l,g=d-T);const U=e.slice(g,d);a(U)}},[s,o,c,r,m,u]);const f=Math.ceil(u!==l&&P?h/T+l:h/T),k=Array.from({length:f},(x,C)=>C+l);return{currentItems:t,pageNumbers:k}},re=({pageNumbers:e})=>{const{isNotMobile:t}=N(),{currentPage:a,setCurrentPage:s}=O(),{handlePageNumberClick:o,handleNextClick:c,handlePrevClick:r}=le(s,a,e),u=ce(a,e,t,h=>i.createElement(Q,{pageNumber:h,onClick:o}),h=>i.createElement("li",{key:h,className:"text-darkBase dark:text-whiteBase"},"...")).map((h,_)=>i.createElement(i.Fragment,{key:_},h));return i.createElement("div",{className:"flex items-center justify-center gap-2"},i.createElement(A,{direction:"Prev",handlePrevClick:r}),i.createElement("ul",{id:"page-numbers",className:"flex items-center gap-2"},u),i.createElement(A,{direction:"Next",pageNumbers:e,handleNextClick:c}))},Pe=()=>{const{fetchPopular:e}=w(),{getSavedNews:t}=L(),{isAuthenticated:a}=G(),{currentPage:s}=O(),{rebuiltNews:o}=D(),{currentItems:c,pageNumbers:r}=ie(o??[]);return I.useEffect(()=>{e({period:H.Today}),a&&t()},[e,t,a]),i.createElement(M,null,i.createElement(K,{currentItems:c,currentPage:s}),i.createElement(re,{pageNumbers:r}))};export{Pe as default};
