import{v as y,w as k,x as E,y as C,z as T,d as w,e as P,B as v,D as I,R as t,A as b,E as S,F as x,P as V,V as N,G as U,T as g}from"./index-1d3f652f.js";const q=({newPassword:s,confirmPassword:n,password:a,errors:e})=>{var i,l,d,u,r;const o=[{placeholder:"Enter new password",fieldValue:s,errors:(i=e==null?void 0:e.newPassword)==null?void 0:i.message,label:"newPassword",ariaInvalid:!!(e!=null&&e.newPassword)},{placeholder:"Confirm new password",fieldValue:n,errors:(l=e==null?void 0:e.confirmPassword)==null?void 0:l.message,label:"confirmPassword",ariaInvalid:!!(e!=null&&e.confirmPassword)}];return s&&n&&!((d=e==null?void 0:e.newPassword)!=null&&d.message)&&!((u=e==null?void 0:e.confirmPassword)!=null&&u.message)&&s.length!==0&&n.length!==0&&o.push({placeholder:"Enter your current password",fieldValue:a,errors:(r=e==null?void 0:e.password)==null?void 0:r.message,label:"password",ariaInvalid:!!(e&&(e!=null&&e.password))}),o},H=({email:s,password:n,errors:a})=>{var c,i,l;const e=[{type:"email",placeholder:"Enter new email",fieldValue:s,errors:(c=a==null?void 0:a.email)==null?void 0:c.message,label:"email",iconName:"icon-envelop",ariaInvalid:!!(a!=null&&a.email),autofill:"email"}];return s&&!((i=a==null?void 0:a.email)!=null&&i.message)&&s.length!==0&&e.push({type:"password",placeholder:"Enter your current password",fieldValue:n,errors:(l=a==null?void 0:a.password)==null?void 0:l.message,label:"password",iconName:"icon-password",ariaInvalid:!!(a!=null&&a.password)}),e},M=y({email:k(),password:E()}),D=y({newPassword:C(),confirmPassword:T().required("Confirm password is required").test("passwords-match","Passwords do not match",function(s){return s===this.parent.newPassword}).trim(),password:E()}),R=()=>{const{updateEmail:s}=w(),{showToast:n}=P(),{handleSubmit:a,register:e,watch:o,reset:c,getValues:i,formState:{errors:l}}=v({resolver:I(M),defaultValues:{email:"",password:""}}),[d,u]=o(["email","password"]),r=async f=>{try{const p=await s(f);n(p.meta.requestStatus)}catch(p){console.error("Error during updateEmail:",p)}c({...i,email:"",password:""})},m=H({email:d,password:u,errors:l});return{handleSubmit:a,register:e,errors:l,email:d,handleEmailSubmitHandler:r,emailInputs:m}},F=()=>{const{updatePassword:s}=w(),{showToast:n}=P(),{handleSubmit:a,register:e,watch:o,reset:c,getValues:i,formState:{errors:l}}=v({resolver:I(D),defaultValues:{newPassword:"",confirmPassword:"",password:""}}),[d,u,r]=o(["newPassword","confirmPassword","password"]),m=async p=>{try{const{newPassword:h,password:A}=p,B=await s({password:A,newPassword:h});n(B.meta.requestStatus)}catch(h){console.error("Error during updatePassword:",h)}c({...i,newPassword:"",confirmPassword:"",password:""})},f=q({newPassword:d,confirmPassword:u,password:r,errors:l});return{handleSubmit:a,register:e,handlePasswordSubmitHandler:m,passwordInputs:f}},O=({})=>{const{isRefreshingUser:s}=w(),{handleSubmit:n,register:a,emailInputs:e,handleEmailSubmitHandler:o}=R();return t.createElement(b,{position:"accountManagePage",filtersBlock:"Change your email"},t.createElement("form",{className:"space-y-4 pt-4 lg:space-y-8",onSubmit:n(o)},t.createElement("ul",{className:"space-y-4 lg:space-y-8"},Array.isArray(e)&&e.map(({type:c,placeholder:i,fieldValue:l,errors:d,label:u,iconName:r,ariaInvalid:m})=>t.createElement("li",{key:u},t.createElement(S,{inputData:{type:c,placeholder:i,fieldValue:l},errors:d,register:a,label:u,svgName:r,className:"fill-accentBase",hasIcon:!0,variant:x.Account,ariaInvalid:m})))),t.createElement("p",{className:" text-small text-darkBase dark:text-whiteBase lg:text-medium"},"To change your current email, enter the new email and confirm by inputting your current password in the new field. If all information is entered correctly, you will receive a notification confirming the successful update of your email."),t.createElement(V,{type:"submit",width:"w-28 lg:w-40",id:"Button for applying change your email ",variant:N.Other,disabled:!!s},"Apply")))},$=()=>{const{handleSubmit:s,register:n,handlePasswordSubmitHandler:a,passwordInputs:e}=F();return t.createElement(b,{position:"accountManagePage",filtersBlock:"Change your password"},t.createElement("form",{className:"space-y-4 pt-4 lg:space-y-8",onSubmit:s(a)},t.createElement("ul",{className:"space-y-4 lg:space-y-8"},Array.isArray(e)&&e.map(({placeholder:o,fieldValue:c,errors:i,label:l,ariaInvalid:d})=>t.createElement("li",{key:l},t.createElement(S,{inputData:{type:"password",placeholder:o,fieldValue:c},errors:i,register:n,label:l,svgName:"icon-password",hasIcon:!0,variant:x.Account,ariaInvalid:d})))),t.createElement("p",{className:" text-small text-darkBase dark:text-whiteBase lg:text-medium"},"To change your current password, enter the new password in the first field and repeat the entry in the second field. In the third field, confirm the change by inputting your current password. If all information is entered correctly, you will receive a notification confirming the successful update of your password."),t.createElement(V,{type:"submit",width:"w-28 lg:w-40",id:"Button for applying change and confirm your new password",variant:N.Other},"Apply")))},G=()=>{const{authError:s,statusMessage:n}=w(),a=n==="Email is successfully updated"||n==="Password is successfully updated",e=s&&(s==null?void 0:s.message);return t.createElement("div",null,t.createElement("h2",{className:"mb-14 text-end text-3xl leading-tighter text-darkBase dark:text-whiteBase"},"Account settings"),t.createElement("div",{className:"flex items-center justify-end"},t.createElement("div",{className:"lg:w-600px w-52 space-y-2 md:w-80 md:space-y-6"},t.createElement(O,null),t.createElement($,null),t.createElement(U,null))),e&&t.createElement(g,{variant:"interactive",status:"error"}),a&&t.createElement(g,{variant:"interactive",status:"success"}))};export{G as default};
