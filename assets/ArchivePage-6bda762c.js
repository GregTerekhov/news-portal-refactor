import{j as L,k as A,R as e,S,b as E,C as I,r as h,l as M,m as $,P as R,V as j,d as T,n as _,o as H,U as O,p as V,M as U,H as z,A as F}from"./index-d30e8942.js";import{P as W,N as G}from"./PageTemplate-8550d78c.js";import"./images-cf488c82.js";import"./Toast-4b4f8b33.js";const B=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],q=56,K=87,J=a=>{const s={};return(a==null?void 0:a.length)>0&&a.forEach(t=>{const l=t==null?void 0:t.additionDate;if(l){const n=L(l,"LLLL yyyy",{locale:A});s[n]||(s[n]=[]),s[n].push(t)}}),s},N=a=>L(a,"dd/MM/yyyy"),Q=(a,s)=>{let t;switch(!0){case s:t=K;break;default:t=q;break}return a.length>t?`${a.slice(0,t)}...`:a},v=({handlePageChange:a,currentPage:s,label:t,position:l,iconClass:n})=>{const c=l<s,o="group inline-flex items-center gap-x-2 rounded-full p-2.5 transition-colors duration-500 hocus:bg-accentBase disabled:pointer-events-none disabled:opacity-50 dark:hocus:bg-accentBase dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600";return e.createElement("button",{type:"button",onClick:()=>a(c?s-1:s+1),disabled:s===l,className:`${o}`},e.createElement("span",{"aria-hidden":"true"},e.createElement(S,{svgName:"arrow",sizeKey:"xsIcon14",className:`${n} fill-accentBase group-hover:fill-whiteBase group-focus:fill-whiteBase dark:fill-whiteBase`})),e.createElement("span",{className:"sr-only"},t))},X=({currentPage:a,handlePageChange:s,totalPages:t})=>{const{isMobile:l}=E(),n=()=>{const o=[],d=(i,f)=>i===f?"bg-accentBase text-whiteBase":"bg-transparent text-darkBase dark:text-whiteBase",r=(i,f)=>{for(let x=i;x<=f;x+=1)o.push(e.createElement("button",{key:x,type:"button","aria-current":"page",className:`${c} ${d(a,x)}`,onClick:()=>s(x)},x))},m=i=>{o.push(e.createElement("span",{key:`dots${i}`,className:"flex w-10 items-center justify-center text-darkBase dark:text-whiteBase"},"..."))},p=()=>{o.push(e.createElement("button",{key:t,type:"button","aria-current":"page",className:`${c} ${d(a,t)}`,onClick:()=>s(t)},t))},g=a+2===t||a+1===t||a===t,b=a+3===t||a+2===t||a+1===t||a===t;return l?t<=4?r(1,t):a===1?(r(1,2),m("next"),p()):g?(m("prev"),r(t-2,t)):a+2<t&&(m("prev"),r(a,a),m("next"),p()):t<=5?r(1,t):a===1?(r(1,3),m("next"),p()):b?(m("prev"),r(t-3,t)):a+3<t&&(m("prev"),r(a,a+1),m("next"),p()),o},c="flex w-10 h-10 items-center justify-center rounded-full py-2.5 text-small text-darkBase transition-colors duration-500 hocus:bg-accentBase hocus:text-whiteBase dark:text-whiteBase dark:hocus:bg-accentBase lg:text-medium";return e.createElement(e.Fragment,null,n())},Z=({handlePageChange:a,currentPage:s,totalPages:t})=>e.createElement("nav",{className:"flex items-center space-x-1 py-2"},e.createElement(v,{handlePageChange:a,currentPage:s,label:"Previous",position:1,iconClass:"rotate-90"}),e.createElement(X,{currentPage:s,totalPages:t,handlePageChange:a}),e.createElement(v,{handlePageChange:a,currentPage:s,label:"Next",position:t,iconClass:"-rotate-90"})),Y=({displayedRows:a})=>{const{wideScreens:s}=E(),t="whitespace-nowrap px-6 text-small font-medium text-darkBase dark:text-whiteBase lg:text-medium group-hover:text-whiteBase transition-colors duration-500";return e.createElement(I,{isOpen:!0,orientation:"horizontal"},e.createElement("table",{className:"mb-2.5 min-w-full divide-y divide-greyAlt/[.4] transition-colors duration-500 dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] transition-colors duration-500 dark:bg-greyBase/[.4]"},e.createElement("tr",null,B==null?void 0:B.map(({label:l})=>e.createElement("th",{key:l,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase transition-colors duration-500 dark:text-whiteBase md:text-small lg:text-xl"},l)))),e.createElement("tbody",{className:"divide-y divide-whiteBase transition-colors duration-500 dark:divide-gray-700"},Array.isArray(a)&&a.map(({title:l,newsUrl:n,category:c,additionDate:o,deletionDate:d})=>e.createElement("tr",{key:n,className:"group transition-colors duration-500 even:bg-greyAlt/[.1] hover:bg-accentBase/65"},e.createElement("td",{className:`${t}`},e.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer nofollow",className:"block py-4 lg:text-medium"},Q(l,s))),e.createElement("td",{className:`${t}`},c),e.createElement("td",{className:`${t}`},N(o)),e.createElement("td",{className:`${t}`},N(d)))))))},C=({toggleModal:a})=>{const{isNotMobile:s}=E(),t="group flex items-center gap-x-4 text-accentBase transition-colors duration-500 hocus:text-accentAlt dark:text-whiteBase dark:hocus:text-accentBase max-md:absolute max-md:right-0 max-md:top-0 max-md:h-10 max-md:w-10 max-md:justify-center",l="fill-accentBase group-hover:fill-accentAlt group-focus:fill-accentAlt dark:fill-whiteBase dark:group-hover:fill-accentBase dark:group-focus:fill-accentBase";return e.createElement("button",{type:"button",className:t,onClick:a},s?"Clear log":null,e.createElement(S,{svgName:"trash",sizeKey:"smIcon18",className:l}))},k=7,P=a=>{const[s,t]=h.useState(""),[l,n]=h.useState(1),c=h.useMemo(()=>s?a.filter(i=>i.title.toLowerCase().includes(s.toLowerCase())):a,[a,s]),o=c.length,d=Math.ceil(o/k),r=(l-1)*k,m=r+k,p=c.slice(r,m),g=h.useCallback(i=>{const f=i.target.value;t(f),n(1)},[]),b=h.useCallback(i=>{i>=1&&i<=d&&n(i)},[d]);return{searchValue:s,currentPage:l,totalPages:d,displayedRows:p,handleSearchNews:g,handlePageChange:b}},ee=({handleClearing:a,handleClose:s})=>{const{isOpenModal:t}=M(),l=[{onClick:n=>s(n,!0),id:"Cancel clearing log",label:"Cancel",icon:"reset"},{onClick:a,id:"Clear deleted news log",label:"Delete",icon:"trash"}];return e.createElement($,{enabled:t},e.createElement("div",null,e.createElement("h3",{className:"mb-4 text-2xl text-darkBase dark:text-whiteBase md:mb-6 md:text-4xl"},"Clear log"),e.createElement("p",{className:"mb-6 text-medium text-darkBase dark:text-whiteBase md:mb-10 md:text-xl"},"Are you sure you want to clear the log of deleted news?"),e.createElement("ul",{className:"max-md:space-y-4 md:flex md:items-center md:justify-between md:gap-8"},l.map(({onClick:n,id:c,label:o,icon:d})=>e.createElement("li",{key:o,className:"w-full"},e.createElement(R,{variant:j.Primary,onHandleClick:n,hasIcon:!0,id:c,svgName:d,svgSize:"smIcon18",classNameIcon:"fill-whiteBase",classNameButton:"md:text-xl border border-whiteBase"},o))))))},te=({logData:a})=>{const{clearLog:s,getHistoryLog:t}=T(),{showToast:l}=_(),{isMobile:n,isNotMobile:c}=E(),{isOpenModal:o,modalType:d}=M(),{toggleModal:r,popUpRef:m}=H(),{searchValue:p,currentPage:g,totalPages:b,displayedRows:i,handlePageChange:f,handleSearchNews:x}=P(a),D=async()=>{try{const u=await s();await t(),l(u.meta.requestStatus)}catch(u){console.error("Error during clearLog:",u)}r()},w=u=>u?e.createElement(z,{label:"Clear deleted news log",side:"bottom",ariaLabel:"Button for clearing deleted news` log",sideOffset:0},e.createElement("div",null,e.createElement(C,{toggleModal:y=>r(y,!0,"clearLog")}))):e.createElement(C,{toggleModal:y=>r(y,!0,"clearLog")});return e.createElement(e.Fragment,null,e.createElement("div",{className:"mb-10 flex flex-col overflow-hidden rounded-lg shadow-modal"},e.createElement("div",{className:"inline-block min-w-full align-middle"},e.createElement("div",{className:"divide-y divide-greyAlt/[.4] overflow-hidden rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},e.createElement("div",{className:"px-4 py-3 lg:px-6 lg:py-5"},e.createElement("div",{className:"relative max-md:w-[254px] md:flex md:flex-row-reverse md:items-center md:justify-between"},n?w(n):null,e.createElement("h3",{className:"mb-4 text-2xl font-medium text-darkBase dark:text-whiteBase"},"Deleted news"),e.createElement("div",null,e.createElement(O,{inputData:{name:"Deleted news",type:"text",value:p,placeholder:"Title"},hasIcon:!0,svgName:"search",onChange:u=>x(u),variant:V.FilterServiceBlock})))),e.createElement(Y,{displayedRows:i}),e.createElement("div",{className:"flex justify-between px-4 lg:px-6"},e.createElement(Z,{handlePageChange:f,currentPage:g,totalPages:b}),c?w(n):null)))),o&&d==="clearLog"&&e.createElement(U,{closeModal:r,modalRef:m},e.createElement(ee,{handleClose:u=>r(u),handleClearing:D})))},oe=()=>{const{allArchive:a,archiveHistoryLog:s,getHistoryLog:t,getArchives:l}=T();h.useEffect(()=>{l(),t()},[l,t]);const n=J(a);return e.createElement(W,null,(s==null?void 0:s.length)>0?e.createElement(te,{logData:s}):null,Object.entries(n).reverse().map(([c,o])=>e.createElement(F,{key:c,dateSeparator:c,position:"archivePage"},e.createElement(G,{currentItems:o}))))};export{oe as default};
