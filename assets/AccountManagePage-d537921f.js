import{n as p,o as m,d as h,p as f,q as P,R as t,A as g,V as y,P as E,s as x}from"./index-d0821141.js";const S=({newPassword:s,confirmPassword:d,oldPassword:a,errors:e})=>{var l,n,o,u,r;const i=[{placeholder:"Enter new password",fieldValue:s,errors:(l=e==null?void 0:e.newPassword)==null?void 0:l.message,label:"newPassword",ariaInvalid:!!(e!=null&&e.newPassword)},{placeholder:"Confirm new password",fieldValue:d,errors:(n=e==null?void 0:e.confirmPassword)==null?void 0:n.message,label:"confirmPassword",ariaInvalid:!!(e!=null&&e.confirmPassword)}];return s&&d&&!((o=e==null?void 0:e.newPassword)!=null&&o.message)&&!((u=e==null?void 0:e.confirmPassword)!=null&&u.message)&&s.length!==0&&d.length!==0&&i.push({placeholder:"Enter your current password",fieldValue:a,errors:(r=e==null?void 0:e.oldPassword)==null?void 0:r.message,label:"oldPassword",ariaInvalid:!!(e&&(e!=null&&e.oldPassword))}),i},N=({updatedEmail:s,currentPassword:d,errors:a})=>{var c,l,n;const e=[{type:"email",placeholder:"Enter new email",fieldValue:s,errors:(c=a==null?void 0:a.updatedEmail)==null?void 0:c.message,label:"updatedEmail",iconName:"icon-envelop",ariaInvalid:!!(a!=null&&a.updatedEmail)}];return s&&!((l=a==null?void 0:a.updatedEmail)!=null&&l.message)&&s.length!==0&&e.push({type:"password",placeholder:"Enter your current password",fieldValue:d,errors:(n=a==null?void 0:a.currentPassword)==null?void 0:n.message,label:"updatedEmail",iconName:"icon-envelop",ariaInvalid:!!(a!=null&&a.currentPassword)}),e},A=p({updatedEmail:m().required("Email is required").matches(/^[^\s@]+@[^\s@]+\.[^\s@]+$/,"Invalid email format").trim(),currentPassword:m().required("Please enter your current password to confirm changes").trim()}),B=p({newPassword:m().required("New password is required").min(8,"Password must be at least 8 characters").matches(/^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,"Password must contain at least one uppercase letter, one number, and one special character").trim(),confirmPassword:m().required("Confirm password is required").test("passwords-match","Passwords do not match",function(s){return s===this.parent.newPassword}).trim(),oldPassword:m().required("Please enter your current password to confirm changes").trim()}),k=()=>{const{updateEmail:s}=h(),{handleSubmit:d,register:a,watch:e,reset:i,getValues:c,formState:{errors:l}}=f({resolver:P(A),defaultValues:{updatedEmail:"",currentPassword:""}}),[n,o]=e(["updatedEmail","currentPassword"]),u=async w=>{await s(w),i({...c,updatedEmail:"",currentPassword:""})},r=N({updatedEmail:n,currentPassword:o,errors:l});return{handleSubmit:d,register:a,errors:l,updatedEmail:n,handleEmailSubmitHandler:u,emailInputs:r}},V=()=>{const{updatePassword:s}=h(),{handleSubmit:d,register:a,watch:e,reset:i,getValues:c,formState:{errors:l}}=f({resolver:P(B),defaultValues:{newPassword:"",confirmPassword:"",oldPassword:""}}),[n,o,u]=e(["newPassword","confirmPassword","oldPassword"]),r=async I=>{const{newPassword:b,oldPassword:v}=I;await s({newPassword:b,oldPassword:v}),i({...c,newPassword:"",confirmPassword:"",oldPassword:""})},w=S({newPassword:n,confirmPassword:o,oldPassword:u,errors:l});return{handleSubmit:d,register:a,handlePasswordSubmitHandler:r,passwordInputs:w}},q=({})=>{const{handleSubmit:s,register:d,emailInputs:a,handleEmailSubmitHandler:e}=k();return t.createElement(g,{position:"accountManagePage",filtersBlock:"Change your email"},t.createElement("form",{className:"pt-4 space-y-4 lg:space-y-8",onSubmit:s(e)},t.createElement("ul",{className:"space-y-4 lg:space-y-8"},Array.isArray(a)&&a.map(({type:i,placeholder:c,fieldValue:l,errors:n,label:o,iconName:u,ariaInvalid:r})=>t.createElement("li",{key:o},t.createElement(y,{inputData:{type:i,placeholder:c,fieldValue:l},errors:n,register:d,label:o,svgName:u,className:"fill-accentBase",hasIcon:!0,variant:"accountPage",ariaInvalid:r})))),t.createElement("p",{className:" text-darkBase text-small lg:text-medium dark:text-whiteBase"},"To change your current email, enter the new email and confirm by inputting your current password in the new field. If all information is entered correctly, you will receive a notification confirming the successful update of your email."),t.createElement(E,{buttonData:{type:"submit"},width:"w-28 lg:w-40",id:"Button for applying change your email ",variant:"OtherButton"},"Apply")))},C=()=>{const{handleSubmit:s,register:d,handlePasswordSubmitHandler:a,passwordInputs:e}=V();return t.createElement(g,{position:"accountManagePage",filtersBlock:"Change your password"},t.createElement("form",{className:"pt-4 space-y-4 lg:space-y-8",onSubmit:s(a)},t.createElement("ul",{className:"space-y-4 lg:space-y-8"},Array.isArray(e)&&e.map(({placeholder:i,fieldValue:c,errors:l,label:n,ariaInvalid:o})=>t.createElement("li",{key:n},t.createElement(y,{inputData:{type:"password",placeholder:i,fieldValue:c},errors:l,register:d,label:n,svgName:"icon-password",hasIcon:!0,variant:"accountPage",ariaInvalid:o})))),t.createElement("p",{className:" text-darkBase text-small lg:text-medium dark:text-whiteBase"},"To change your current password, enter the new password in the first field and repeat the entry in the second field. In the third field, confirm the change by inputting your current password. If all information is entered correctly, you will receive a notification confirming the successful update of your password."),t.createElement(E,{buttonData:{type:"submit"},width:"w-28 lg:w-40",id:"Button for applying change and confirm your new password",variant:"OtherButton"},"Apply")))},H=()=>t.createElement("div",null,t.createElement("h2",{className:"text-darkBase dark:text-whiteBase text-3xl leading-tighter text-end mb-14"},"Account settings"),t.createElement("div",{className:"flex items-center justify-end"},t.createElement("div",{className:"space-y-2 md:space-y-6 w-52 md:w-80 lg:w-[600px]"},t.createElement(q,null),t.createElement(C,null),t.createElement(x,null))));export{H as default};
