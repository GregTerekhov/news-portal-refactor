import{u as v,a as B,b as R,r as _,R as l,P as A,V as S,I as L,c as U,d as H,e as D,f as M}from"./index-e52ee009.js";import{P as G,N as W}from"./PageTemplate-fe8b770c.js";import"./images-75e30e2e.js";const E=1,$=3,b=6,K=(t,e,n)=>{const s=[e];let a=t-e;for(;a>0;)s.push(n),a-=n;return s},Q=(t,e)=>{const n=t&&t.slice(0,-1).reduce((a,c)=>a+c,0);return e-n},Y=(t,e,n)=>K(t,e,n),V=(t,e)=>{try{return Q(t,e)}catch(n){return console.error(n.message)}},j=(t,e,n,s,a)=>{const c=e.length,r=t-1,h=t+1,i=n?b:$,o=[];if(c<=i)for(let p=E;p<=c;p+=1)o.push(s(p));else t===E?(o.push(s(t)),o.push(s(h)),o.push(a("next")),o.push(s(c))):t===c?(o.push(s(E)),o.push(a("prev")),o.push(s(r)),o.push(s(t))):t>E&&t<c&&(t===2&&(o.push(a("prev")),o.push(s(t)),o.push(s(h)),o.push(a("next")),o.push(s(c))),t-1>E&&t+1!==c&&(o.push(a("prev")),o.push(s(r)),o.push(s(t)),o.push(s(h)),o.push(a("next"))),t+1===c&&(o.push(a("prev")),o.push(s(r)),o.push(s(t)),o.push(s(c))));return o},z=4,Z=7,q=8,J=5,X=8,tt=9,et=t=>{const{isMobile:e,isTablet:n}=v(),{popularNews:s,newsByKeyword:a,newsByCategory:c,newsByDate:r}=B(),{filteredNews:h}=R(),[i,o]=_.useState(1),[p,m]=_.useState([]),u=t&&(t==null?void 0:t.length)||0,k=N(),d=y(),O=Y(u,k,d),T=O[i-1]||0,C=V(O,u);_.useEffect(()=>{if(t&&(t==null?void 0:t.length)>0){const I=i*T-1>=u;let f,x;i===1?(f=i*T,x=f-T):i>1&&I&&C?(f=u,x=u-C):(f=i*T-1,x=f-T);const P=t.slice(x,f);m(P)}},[s,a,c,r,h,i]);function N(){return e?z:n?Z:q}function y(){return e?J:n?X:tt}const g=Math.ceil(i!==1&&e?u/T+1:u/T),F=Array.from({length:g},(I,f)=>f+1);return{currentItems:p,pageNumbers:F,currentPage:i,setCurrentPage:o}},w=({direction:t,currentPage:e,pageNumbers:n,handlePrevClick:s,handleNextClick:a})=>{const{isNotMobile:c}=v(),r=e-1===0,h=e===(n==null?void 0:n.length);return l.createElement(A,{id:`${t} page button`,variant:S.Other,onHandleClick:t==="Prev"?s:a,width:"w-32",disabled:t==="Prev"?r:h,hasIcon:!0,svgName:"arrow",svgSize:L.xsIcon14,classNameIcon:`${t==="Prev"?"rotate-90":"-rotate-90"}  fill-whiteBase`,classNameButton:t==="Prev"?"flex-row-reverse":""},c?l.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},t):null)},st=({pageNumber:t,currentPage:e,onClick:n})=>{const s=`h-10 border-accentBase font-medium transition-colors duration-500 ${t===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`;return l.createElement("li",{key:t,onClick:()=>n(t)},l.createElement(A,{"aria-label":`Page ${t.toString()} button`,classNameButton:`${s}`,variant:S.Small},t))},ot=({pageNumbers:t,currentPage:e,setCurrentPage:n})=>{const{isNotMobile:s}=v(),a=m=>l.createElement("li",{key:m,className:"text-darkBase dark:text-whiteBase"},"..."),c=m=>{n(m),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},r=()=>{e>1&&(n(e-1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))},h=()=>{e<t.length&&(n(e+1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))},p=j(e,t,s,m=>l.createElement(st,{pageNumber:m,currentPage:e,onClick:c}),a).map((m,u)=>l.createElement(l.Fragment,{key:u},m));return l.createElement("div",{className:"flex items-center justify-center gap-2"},l.createElement(w,{direction:"Prev",currentPage:e,handlePrevClick:r}),l.createElement("ul",{id:"page-numbers",className:"flex items-center gap-2"},p),l.createElement(w,{direction:"Next",pageNumbers:t,currentPage:e,handleNextClick:h}))},nt=1,it=()=>{const{headline:t,fetchPopular:e}=B(),{getSavedNews:n}=U(),{isAuthenticated:s}=H(),a=D(),{rebuildedNews:c}=M(a),{currentItems:r,pageNumbers:h,currentPage:i,setCurrentPage:o}=et(c??[]);return _.useEffect(()=>{e({period:nt}),s&&n()},[e,n,s]),l.createElement(G,null,t&&l.createElement("h2",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},t),l.createElement(W,{currentItems:r,currentPage:i}),l.createElement(ot,{pageNumbers:h,currentPage:i,setCurrentPage:o}))};export{it as default};
