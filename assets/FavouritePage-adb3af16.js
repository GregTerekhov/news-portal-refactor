import{r as t,R as a,u as N,h as p,f as C}from"./index-bbedbc49.js";import{P as g,N as h}from"./PageTemplate-899fb8b8.js";import"./Toast-9151dc6f.js";const w=({onLoadMore:s})=>{const e=t.useRef(null);return t.useEffect(()=>{const r=new IntersectionObserver(o=>{o[0].isIntersecting&&s()},{threshold:1});return e.current&&r.observe(e.current),()=>{e.current&&r.unobserve(e.current)}},[s]),a.createElement("div",{ref:e})},l=5,i=6,I=()=>{const[s,e]=t.useState(0),[r,o]=t.useState(!1),{isSmallScreens:u}=N(),{rebuiltNews:n}=p();t.useEffect(()=>{(n==null?void 0:n.length)>0&&e(n.length)},[n]);const d=t.useMemo(()=>u?l:i,[]),[c,f]=t.useState(d),E=t.useMemo(()=>s>c,[s,c]),m=()=>{!E||r||(o(!0),f(S=>S+(u?l:i)),o(!1))};return{displayedNews:n==null?void 0:n.slice(0,c),handleLoadMore:m}},y=()=>{const{getFavourites:s,getSavedNews:e}=C(),{displayedNews:r,handleLoadMore:o}=I();return t.useEffect(()=>{s(),e()},[s,e]),a.createElement(g,null,a.createElement(h,{currentItems:r}),a.createElement(w,{onLoadMore:o}))};export{y as default};
