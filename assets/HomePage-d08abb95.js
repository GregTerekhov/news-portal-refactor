import{u as R,a as H,b as W,r as B,R as s,P as L,V as O,S as P,c as _,d as z,e as K,f as V,g as j,h as q,L as Q,N as D}from"./index-f9a9e13f.js";import{u as U}from"./useToast-f98f9431.js";import{P as Z,N as G}from"./NewsList-a41757ef.js";import"./images-833587c6.js";const J=(n,e,a)=>{const i=[e];let c=n-e;for(;c>0;)i.push(a),c-=a;return i},X=(n,e)=>{const a=n&&n.slice(0,-1).reduce((c,p)=>c+p,0);return e-a},Y=(n,e,a)=>J(n,e,a),F=(n,e)=>{try{return X(n,e)}catch(a){return console.error(a.message)}},b=n=>{const{breakpointsForMarkup:e}=R()||{breakpointsForMarkup:null},{popularNews:a,newsByKeyword:i,newsByCategory:c,newsByDate:p}=H(),{filteredNews:E}=W(),[m,t]=B.useState(1),[h,u]=B.useState([]),r=n&&(n==null?void 0:n.length)||0,x=(e==null?void 0:e.isNothing)||(e==null?void 0:e.isMobile),o=y(),d=N(),w=Y(r,o,d),f=w[m-1]||0,l=F(w,r);B.useEffect(()=>{if(n&&(n==null?void 0:n.length)>0){const I=m*f-1>=r;let g,v;m===1?(g=m*f,v=g-f):m>1&&I&&l?(g=r,v=r-l):(g=m*f-1,v=g-f);const $=n.slice(v,g);u($)}},[a,i,c,p,E,m]);function y(){return e!=null&&e.isNothing||e!=null&&e.isMobile?4:e!=null&&e.isTablet?7:8}function N(){return x?5:e!=null&&e.isTablet?8:9}const T=Math.ceil(m!==1&&x?r/f+1:r/f),C=Array.from({length:T},(I,g)=>g+1);return{currentItems:h,pageNumbers:C,currentPage:m,setCurrentPage:t}},A="w-32",S=24,k=({pageNumbers:n,currentPage:e,setCurrentPage:a})=>{const{breakpointsForMarkup:i}=R()??{breakpointsForMarkup:null},c=(i==null?void 0:i.isTablet)||(i==null?void 0:i.isDesktop),p=n.length,E=window.innerHeight,m=c?6:3,t=[],h=1,u=p,r=e-1,x=e+1,o=l=>s.createElement("li",{key:l,className:`${l===e?"active":""}`,onClick:()=>{a(l),window.scrollTo({top:0+E,left:0})}},s.createElement(L,{"aria-label":l.toString(),classNameButton:`h-10 border-accentBase font-medium transition-colors duration-500 ${l===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:O.Small},l)),d=l=>s.createElement("li",{key:l,className:"ellipsis"},s.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"..."));if(p<=m)for(let l=h;l<=u;l+=1)t.push(o(l));else e===h?(t.push(o(e)),t.push(o(x)),t.push(d("next")),t.push(o(u))):e===u?(t.push(o(h)),t.push(d("prev")),t.push(o(r)),t.push(o(e))):e>h&&e<u&&(e===2&&(t.push(d("prev")),t.push(o(e)),t.push(o(x)),t.push(d("next")),t.push(o(u))),e-1>h&&e+1!==u&&(t.push(d("prev")),t.push(o(r)),t.push(o(e)),t.push(o(x)),t.push(d("next"))),e+1===u&&(t.push(d("prev")),t.push(o(r)),t.push(o(e)),t.push(o(u))));const w=()=>{e>1&&(a(e-1),window.scrollTo({top:0+E,left:0}))},f=()=>{e<n.length&&(a(e+1),window.scrollTo({top:0+E,left:0}))};return s.createElement("div",{className:"flex justify-center items-center gap-2"},s.createElement(L,{id:"Previous page button",variant:O.Other,onHandleClick:w,width:A,disabled:e-1===0},s.createElement(P,{svgName:"icon-arrow-left",size:S,className:"fill-whiteBase"}),c?s.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Prev"):null),s.createElement("ul",{id:"page-numbers",className:"flex gap-2"},t),s.createElement(L,{id:"Next page button",variant:O.Other,onHandleClick:f,width:A,disabled:e===u},c?s.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Next"):null,s.createElement(P,{svgName:"icon-arrow-left",size:S,className:"fill-whiteBase rotate-180"})))},ne=()=>{const{isLoadingAPIData:n,headline:e,newsByCategory:a,newsByDate:i,newsByKeyword:c,fetchPopular:p}=H(),{isLoadingDBData:E,getSavedNews:m}=_(),{isAuthenticated:t,authError:h}=z(),{openToast:u,setOpenToast:r}=K(),{showErrorToast:x}=U(),o=V(),d=j(o),{rebuildedNews:w}=q({activeLinks:d}),{hasResults:f}=W(),{currentItems:l,currentPage:y,pageNumbers:N,setCurrentPage:T}=b(w??[]);B.useEffect(()=>{p("1"),t&&m()},[p,m,t]),B.useEffect(()=>{(c||a||i)&&r(!0)},[c,a,i]);const C=n||E||f==="loading",I=w&&w.length===0||f==="empty",g=c&&c.length>0||a&&a.length>0||i&&i.length>0,v=!C&&g;return s.createElement(s.Fragment,null,C?s.createElement(Q,{variant:"generalSection"}):s.createElement(s.Fragment,null,I?s.createElement(Z,{variant:"page"}):s.createElement(s.Fragment,null,e&&s.createElement("h2",{className:"dark:text-whiteBase text-giant font-bold mb-6"},e),s.createElement(G,{currentItems:l,currentPage:y}),s.createElement(k,{pageNumbers:N,currentPage:y,setCurrentPage:T}))),h&&h.message&&s.createElement(D,{openToast:u,setOpenToast:r,title:`${(h==null?void 0:h.message)&&"Authorisation error"}`,description:h.message?x():""}),v&&s.createElement(D,{variant:"non-interactive",openToast:u,setOpenToast:r,title:"Found news",description:`There are ${w.length} news has been found`}))};export{ne as default};
