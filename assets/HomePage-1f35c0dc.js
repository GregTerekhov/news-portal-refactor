import{u as W,a as U,b as K,r as w,R as a,P as A,V as D,S as L,I as _,c as Q,d as Y,e as z,f as V,g as $,h as j,L as q,T as H}from"./index-99dd5365.js";import{P as G,N as Z}from"./NewsList-36cf354b.js";import"./images-483e4af2.js";const v=1,J=3,P=6,X=(e,t,l)=>{const s=[t];let c=e-t;for(;c>0;)s.push(l),c-=l;return s},F=(e,t)=>{const l=e&&e.slice(0,-1).reduce((c,o)=>c+o,0);return t-l},M=(e,t,l)=>X(e,t,l),b=(e,t)=>{try{return F(e,t)}catch(l){return console.error(l.message)}},k=(e,t,l,s,c)=>{const o=t.length,g=e-1,i=e+1,E=l?P:J,n=[];if(o<=E)for(let h=v;h<=o;h+=1)n.push(s(h));else e===v?(n.push(s(e)),n.push(s(i)),n.push(c("next")),n.push(s(o))):e===o?(n.push(s(v)),n.push(c("prev")),n.push(s(g)),n.push(s(e))):e>v&&e<o&&(e===2&&(n.push(c("prev")),n.push(s(e)),n.push(s(i)),n.push(c("next")),n.push(s(o))),e-1>v&&e+1!==o&&(n.push(c("prev")),n.push(s(g)),n.push(s(e)),n.push(s(i)),n.push(c("next"))),e+1===o&&(n.push(c("prev")),n.push(s(g)),n.push(s(e)),n.push(s(o))));return n},tt=e=>{const{breakpointsForMarkup:t}=W(),{popularNews:l,newsByKeyword:s,newsByCategory:c,newsByDate:o}=U(),{filteredNews:g}=K(),[i,E]=w.useState(1),[n,h]=w.useState([]),m=e&&(e==null?void 0:e.length)||0,r=(t==null?void 0:t.isNothing)||(t==null?void 0:t.isMobile),x=N(),T=B(),I=M(m,x,T),f=I[i-1]||0,p=b(I,m);w.useEffect(()=>{if(e&&(e==null?void 0:e.length)>0){const C=i*f-1>=m;let u,d;i===1?(u=i*f,d=u-f):i>1&&C&&p?(u=m,d=m-p):(u=i*f-1,d=u-f);const S=e.slice(d,u);h(S)}},[l,s,c,o,g,i]);function N(){return t!=null&&t.isNothing||t!=null&&t.isMobile?4:t!=null&&t.isTablet?7:8}function B(){return r?5:t!=null&&t.isTablet?8:9}const O=Math.ceil(i!==1&&r?m/f+1:m/f),y=Array.from({length:O},(C,u)=>u+1);return{currentItems:n,pageNumbers:y,currentPage:i,setCurrentPage:E}},et=({pageNumber:e,currentPage:t,setCurrentPage:l})=>{const s=window.innerHeight;return a.createElement("li",{key:e,className:`${e===t?"active":""}`,onClick:()=>{l(e),window.scrollTo({top:0+s,left:0})}},a.createElement(A,{"aria-label":e.toString(),classNameButton:`h-10 border-accentBase font-medium transition-colors duration-500 ${e===t?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:D.Small},e))},R="w-32",st=({pageNumbers:e,currentPage:t,setCurrentPage:l})=>{const{breakpointsForMarkup:s}=W(),c=(s==null?void 0:s.isTablet)||(s==null?void 0:s.isDesktop),o=window.innerHeight,n=k(t,e,c,r=>a.createElement(et,{pageNumber:r,currentPage:t,setCurrentPage:l}),r=>a.createElement("li",{key:r,className:"ellipsis"},a.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"..."))).map((r,x)=>a.createElement(a.Fragment,{key:x},r)),h=()=>{t>1&&(l(t-1),window.scrollTo({top:0+o,left:0}))},m=()=>{t<e.length&&(l(t+1),window.scrollTo({top:0+o,left:0}))};return a.createElement("div",{className:"flex items-center justify-center gap-2"},a.createElement(A,{id:"Previous page button",variant:D.Other,onHandleClick:h,width:R,disabled:t-1===0},a.createElement(L,{svgName:"icon-arrow",size:_.xsIcon14,className:"rotate-90 fill-whiteBase"}),c?a.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium"},"Prev"):null),a.createElement("ul",{id:"page-numbers",className:"flex gap-2"},n),a.createElement(A,{id:"Next page button",variant:D.Other,onHandleClick:m,width:R,disabled:t===e.length},c?a.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium"},"Next"):null,a.createElement(L,{svgName:"icon-arrow",size:_.xsIcon14,className:"-rotate-90 fill-whiteBase"})))},nt=1,ot=()=>{const{isLoadingAPIData:e,errorAPI:t,headline:l,newsByCategory:s,newsByDate:c,newsByKeyword:o,fetchPopular:g}=U(),{isLoadingDBData:i,getSavedNews:E}=Q(),{isAuthenticated:n,authError:h}=Y(),{setOpenToast:m}=z(),r=V(),{rebuildedNews:x}=$({activeLinks:r}),{hasResults:T}=K(),{currentItems:I,currentPage:f,pageNumbers:p,setCurrentPage:N}=tt(x??[]),B=t==null?void 0:t.toString().includes("429"),O=j();w.useEffect(()=>{t&&t>=500&&O("/serverError")},[t]),w.useEffect(()=>{g(nt),n&&E()},[g,E,n]),w.useEffect(()=>{(o||s||c)&&m(!0)},[o,s,c]);const y=e||i||T==="loading",C=x&&x.length===0||T==="empty",u=o&&o.length>0||s&&s.length>0||c&&c.length>0,d=!y&&u,S=h&&h.message||t;return a.createElement(a.Fragment,null,y?a.createElement(q,{variant:"generalSection"}):a.createElement(a.Fragment,null,C||B?a.createElement(G,{variant:"page"}):a.createElement(a.Fragment,null,l&&a.createElement("h2",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},l),a.createElement(Z,{currentItems:I,currentPage:f}),a.createElement(st,{pageNumbers:p,currentPage:f,setCurrentPage:N}))),S&&a.createElement(H,{variant:"interactive",status:"error"}),d&&a.createElement(H,{variant:"non-interactive",status:"info"}))};export{ot as default};
