import{u as d,a as P,b as R,r as O,R as o,P as p,V as U,I as H,c as G,d as W,e as K,f as $,g as Q,h as Y,L as V,T as D}from"./index-66d32a12.js";import{P as j,N as q}from"./NewsList-259c1d8c.js";import"./images-53a26353.js";const I=1,z=3,Z=6,J=(t,e,c)=>{const s=[e];let l=t-e;for(;l>0;)s.push(c),l-=c;return s},X=(t,e)=>{const c=t&&t.slice(0,-1).reduce((l,a)=>l+a,0);return e-c},F=(t,e,c)=>J(t,e,c),M=(t,e)=>{try{return X(t,e)}catch(c){return console.error(c.message)}},b=(t,e,c,s,l)=>{const a=e.length,h=t-1,i=t+1,f=c?Z:z,n=[];if(a<=f)for(let g=I;g<=a;g+=1)n.push(s(g));else t===I?(n.push(s(t)),n.push(s(i)),n.push(l("next")),n.push(s(a))):t===a?(n.push(s(I)),n.push(l("prev")),n.push(s(h)),n.push(s(t))):t>I&&t<a&&(t===2&&(n.push(l("prev")),n.push(s(t)),n.push(s(i)),n.push(l("next")),n.push(s(a))),t-1>I&&t+1!==a&&(n.push(l("prev")),n.push(s(h)),n.push(s(t)),n.push(s(i)),n.push(l("next"))),t+1===a&&(n.push(l("prev")),n.push(s(h)),n.push(s(t)),n.push(s(a))));return n},k=4,tt=7,et=8,st=5,nt=8,at=9,ct=t=>{const{breakpointsForMarkup:e}=d(),{popularNews:c,newsByKeyword:s,newsByCategory:l,newsByDate:a}=P(),{filteredNews:h}=R(),[i,f]=O.useState(1),[n,g]=O.useState([]),r=t&&(t==null?void 0:t.length)||0,m=(e==null?void 0:e.isNothing)||(e==null?void 0:e.isMobile),T=A(),x=y(),_=F(r,T,x),u=_[i-1]||0,C=M(_,r);O.useEffect(()=>{if(t&&(t==null?void 0:t.length)>0){const w=i*u-1>=r;let E,v;i===1?(E=i*u,v=E-u):i>1&&w&&C?(E=r,v=r-C):(E=i*u-1,v=E-u);const N=t.slice(v,E);g(N)}},[c,s,l,a,h,i]);function A(){return e!=null&&e.isNothing||e!=null&&e.isMobile?k:e!=null&&e.isTablet?tt:et}function y(){return m?st:e!=null&&e.isTablet?nt:at}const S=Math.ceil(i!==1&&m?r/u+1:r/u),B=Array.from({length:S},(w,E)=>E+1);return{currentItems:n,pageNumbers:B,currentPage:i,setCurrentPage:f}},ot="w-32",L=({direction:t,currentPage:e,pageNumbers:c,handlePrevClick:s,handleNextClick:l})=>{const{breakpointsForMarkup:a}=d(),h=(a==null?void 0:a.isTablet)||(a==null?void 0:a.isDesktop),i=e-1===0,f=e===(c==null?void 0:c.length);return o.createElement(p,{id:`${t} page button`,variant:U.Other,onHandleClick:t==="Prev"?s:l,width:ot,disabled:t==="Prev"?i:f,hasIcon:!0,svgName:"icon-arrow",svgSize:H.xsIcon14,classNameIcon:`${t==="Prev"?"rotate-90":"-rotate-90"}  fill-whiteBase`,classNameButton:t==="Prev"?"flex-row-reverse":""},h?o.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium"},t):null)},lt=({pageNumber:t,currentPage:e,onClick:c})=>o.createElement("li",{key:t,onClick:()=>c(t)},o.createElement(p,{"aria-label":`Page ${t.toString()} button`,classNameButton:`h-10 border-accentBase font-medium transition-colors duration-500 ${t===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:U.Small},t)),it=({pageNumbers:t,currentPage:e,setCurrentPage:c})=>{const{breakpointsForMarkup:s}=d(),l=(s==null?void 0:s.isTablet)||(s==null?void 0:s.isDesktop);window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"});const a=m=>o.createElement("li",{key:m,className:"ellipsis"},o.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"...")),h=m=>{c(m)},i=()=>{e>1&&c(e-1)},f=()=>{e<t.length&&c(e+1)},r=b(e,t,l,m=>o.createElement(lt,{pageNumber:m,currentPage:e,onClick:h}),a).map((m,T)=>o.createElement(o.Fragment,{key:T},m));return o.createElement("div",{className:"flex items-center justify-center gap-2"},o.createElement(L,{direction:"Prev",currentPage:e,handlePrevClick:i}),o.createElement("ul",{id:"page-numbers",className:"flex gap-2"},r),o.createElement(L,{direction:"Next",pageNumbers:t,currentPage:e,handleNextClick:f}))},ht=1,ut=()=>{const{isLoadingAPIData:t,errorAPI:e,headline:c,newsByCategory:s,newsByDate:l,newsByKeyword:a,fetchPopular:h}=P(),{isLoadingDBData:i,getSavedNews:f}=G(),{isAuthenticated:n,authError:g}=W(),{setOpenToast:r}=K(),m=$(),{rebuildedNews:T}=Q({activeLinks:m}),{hasResults:x}=R(),{currentItems:_,currentPage:u,pageNumbers:C,setCurrentPage:A}=ct(T??[]),y=e==null?void 0:e.toString().includes("429"),S=Y();O.useEffect(()=>{e&&e>=500&&S("/serverError")},[e]),O.useEffect(()=>{h(ht),n&&f()},[h,f,n]),O.useEffect(()=>{(a||s||l)&&r(!0)},[a,s,l]);const B=t||i||x==="loading",w=(T==null?void 0:T.length)===0||x==="empty";console.log("hasResults",x);const E=a&&a.length>0||s&&s.length>0||l&&l.length>0,v=!B&&E,N=g||e;return console.log("rebuildedNews HOME_PAGE",T),o.createElement(o.Fragment,null,B?o.createElement(V,{variant:"generalSection"}):o.createElement(o.Fragment,null,w||y?o.createElement(j,{variant:"page"}):o.createElement(o.Fragment,null,c&&o.createElement("h2",{className:"mb-6 text-giant font-bold dark:text-whiteBase"},c),o.createElement(q,{currentItems:_,currentPage:u}),o.createElement(it,{pageNumbers:C,currentPage:u,setCurrentPage:A}))),N?o.createElement(D,{variant:"interactive",status:"error"}):null,v?o.createElement(D,{variant:"non-interactive",status:"info"}):null)};export{ut as default};
