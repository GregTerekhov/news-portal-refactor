import{F as E,G as A,I as b,J as y,K as C,e as g,m as x,N as I,O as S,R as s,A as T,Q as $,T as R,P as H,V as M,W as U}from"./index-12147d6d.js";import{T as D}from"./Toast-409430d9.js";const F=({newPassword:a,confirmPassword:n,password:t,errors:e})=>{var i,o,c,m,r;const l=[{type:"password",placeholder:"Enter new password",fieldValue:a,errors:(i=e==null?void 0:e.newPassword)==null?void 0:i.message,label:"newPassword",ariaInvalid:!!(e!=null&&e.newPassword),iconName:"password"},{type:"password",placeholder:"Confirm new password",fieldValue:n,errors:(o=e==null?void 0:e.confirmPassword)==null?void 0:o.message,label:"confirmPassword",ariaInvalid:!!(e!=null&&e.confirmPassword),iconName:"password"}];return a&&n&&!((c=e==null?void 0:e.newPassword)!=null&&c.message)&&!((m=e==null?void 0:e.confirmPassword)!=null&&m.message)&&a.length!==0&&n.length!==0&&l.push({type:"password",placeholder:"Enter your current password",fieldValue:t,errors:(r=e==null?void 0:e.password)==null?void 0:r.message,label:"password",ariaInvalid:!!(e&&(e!=null&&e.password)),iconName:"password"}),l},q=({email:a,password:n,errors:t})=>{var d,i,o;const e=[{type:"email",placeholder:"Enter new email",fieldValue:a,errors:(d=t==null?void 0:t.email)==null?void 0:d.message,label:"email",iconName:"envelop",ariaInvalid:!!(t!=null&&t.email),autofill:"email"}];return a&&!((i=t==null?void 0:t.email)!=null&&i.message)&&a.length!==0&&e.push({type:"password",placeholder:"Enter your current password",fieldValue:n,errors:(o=t==null?void 0:t.password)==null?void 0:o.message,label:"password",iconName:"password",ariaInvalid:!!(t!=null&&t.password)}),e},G=E({email:A(),password:b()}),O=E({newPassword:y(),confirmPassword:C(y()),password:b()}),W=()=>{const{updateEmail:a}=g(),{showToast:n}=x(),{handleSubmit:t,register:e,watch:l,reset:d,getValues:i,formState:{errors:o}}=I({resolver:S(G),defaultValues:{email:"",password:""}}),[c,m]=l(["email","password"]);return{emailSubmit:t,updateEmailRegister:e,errors:o,email:c,handleEmailSubmitHandler:async w=>{try{const u=await a(w);localStorage.removeItem("rememberMe"),localStorage.removeItem("userId"),n(u.meta.requestStatus)}catch(u){console.error("Error during updateEmail:",u)}finally{d({...i,email:"",password:""})}},emailInputs:q({email:c,password:m,errors:o})}},j=()=>{const{updatePassword:a}=g(),{showToast:n}=x(),{handleSubmit:t,register:e,watch:l,reset:d,getValues:i,formState:{errors:o}}=I({resolver:S(O),defaultValues:{newPassword:"",confirmPassword:"",password:""}}),[c,m,r]=l(["newPassword","confirmPassword","password"]);return{passwordSubmit:t,updatePasswordRegister:e,handlePasswordSubmitHandler:async u=>{try{const{newPassword:p,password:h}=u,f=await a({password:h,newPassword:p});localStorage.removeItem("rememberMe"),localStorage.removeItem("userId"),n(f.meta.requestStatus)}catch(p){console.error("Error during updatePassword:",p)}finally{d({...i,newPassword:"",confirmPassword:"",password:""})}},passwordInputs:F({newPassword:c,confirmPassword:m,password:r,errors:o})}},P=({field:a})=>{const{isRefreshingUser:n}=g(),{emailSubmit:t,updateEmailRegister:e,emailInputs:l,handleEmailSubmitHandler:d}=W(),{passwordSubmit:i,updatePasswordRegister:o,handlePasswordSubmitHandler:c,passwordInputs:m}=j(),r=a==="email"?l:m,w=`and confirm by inputting your current ${a} in the new field.`,u=`in the first field and repeat the entry in the second field. In the third field, confirm the change by inputting your current ${a}.`,p=a==="email"?w:u;return s.createElement(T,{position:"accountManagePage",blockDefinition:`Change your ${a}`},s.createElement("form",{className:"space-y-4 pt-4 lg:space-y-8",onSubmit:a==="email"?t(d):i(c)},s.createElement("ul",{className:"space-y-4 lg:space-y-8"},Array.isArray(r)&&r.map(({label:h,type:f,placeholder:v,fieldValue:N,errors:V,iconName:k,ariaInvalid:B})=>s.createElement("li",{key:h},s.createElement($,{inputData:{type:f,placeholder:v,fieldValue:N},errors:V,register:a==="email"?e:o,label:h,hasIcon:!0,svgName:k,variant:R.Account,ariaInvalid:B})))),s.createElement("p",{className:"text-small text-darkBase dark:text-whiteBase lg:text-medium hg:text-xl"},`To change your current ${a}, enter the new ${a} ${p} If all information is entered correctly, you will receive a
          notification confirming the successful update of your ${a}.`),s.createElement(H,{type:"submit",width:"w-28 lg:w-40",id:`Button for applying change ${a==="password"?"and confirm ":""}your new ${a}`,variant:M.Other,disabled:!!(a==="email"&&n)},"Apply")))},L=()=>{const{authError:a,statusMessage:n,isThirdPartyRegister:t}=g(),e=n==="Email is successfully updated"||n==="Password is successfully updated"||n.includes("linking"),l=e||typeof a=="string";return s.createElement("div",null,s.createElement("h2",{className:"mb-14 text-end text-3xl leading-tighter text-darkBase dark:text-whiteBase hg:text-5xl"},"Account settings"),s.createElement("div",{className:"flex items-center justify-end"},s.createElement("div",{className:"w-52 space-y-2 md:w-80 md:space-y-6 lg:w-600px"},!t&&s.createElement(s.Fragment,null,s.createElement(P,{field:"email"}),s.createElement(P,{field:"password"})),s.createElement("h3",{className:"text-darkBase dark:text-whiteBase md:text-2xl lg:mb-4 hg:text-3xl"},"Connected accounts"),s.createElement("p",{className:"text-small leading-normal text-darkBase dark:text-whiteBase lg:text-medium hg:text-xl"},"You can connect or disconnect your News account to Google, Facebook, or Apple to log in using this account. We will never send messages to your contacts without your permission."),s.createElement("hr",{className:"!border-greyAlt dark:!border-whiteBase"}),s.createElement(U,null))),l?s.createElement(D,{variant:"interactive",status:e?"success":"error"}):null)};export{L as default};
