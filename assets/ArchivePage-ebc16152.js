import{k as E,l as N,R as e,S as b,I as B,r as h,C as k,U as w,m as L,c as D,d as S,h as C,L as I,A,T}from"./index-ae61bed5.js";import{N as M,P as R}from"./NewsList-9fce0821.js";import"./images-d3b49ae8.js";const p=[{label:"Title"},{label:"Category"},{label:"Addition Date"},{label:"Deletion Date"}],_=s=>{const t={};return s&&(s==null?void 0:s.length)>0&&s.forEach(r=>{const n=r==null?void 0:r.additionDate;if(n){const a=E(n,"LLLL yyyy",{locale:N});t[a]||(t[a]=[]),t[a].push(r)}}),t},f=({handlePageChange:s,currentPage:t,label:r,position:n,iconClass:a})=>{const l=n<t;return e.createElement("button",{type:"button",onClick:()=>s(l?t-1:t+1),disabled:t===n,className:"group inline-flex items-center gap-x-2 rounded-full p-2.5 transition-colors duration-500 hover:bg-accentBase disabled:pointer-events-none disabled:opacity-50 dark:hover:bg-accentBase dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{"aria-hidden":"true"},e.createElement(b,{svgName:"icon-arrow",size:B.xsIcon14,className:`${a} fill-accentBase group-hover:fill-whiteBase dark:fill-whiteBase`})),e.createElement("span",{className:"sr-only"},r))},$=({handlePageChange:s,currentPage:t,totalPages:r})=>e.createElement("nav",{className:"flex items-center space-x-1"},e.createElement(f,{handlePageChange:s,currentPage:t,label:"Previous",position:1,iconClass:"rotate-90"}),Array.from({length:r},(n,a)=>e.createElement("button",{key:a,type:"button","aria-current":"page",className:"flex min-w-10 items-center justify-center rounded-full py-2.5 text-small text-darkBase transition-colors duration-500 hover:bg-accentBase hover:text-whiteBase dark:text-whiteBase dark:hover:bg-accentBase lg:text-medium",onClick:()=>s(a+1)},a+1)),e.createElement(f,{handlePageChange:s,currentPage:t,label:"Next",position:r,iconClass:"-rotate-90"})),O=60,P=({displayedRows:s})=>{const t="whitespace-nowrap px-6 py-4 text-small font-medium text-darkBase dark:text-whiteBase lg:text-medium";return e.createElement("table",{className:"min-w-full divide-y divide-greyAlt/[.4] transition-colors duration-500 dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-accentBase/[.2] transition-colors duration-500 dark:bg-greyBase/[.4]"},e.createElement("tr",null,p&&(p==null?void 0:p.map(({label:r})=>e.createElement("th",{key:r,scope:"col",className:"px-6 py-3 text-start text-xs font-medium uppercase text-greyBase transition-colors duration-500 dark:text-whiteBase md:text-small lg:text-xl"},r))))),e.createElement("tbody",{className:"divide-y divide-whiteBase transition-colors duration-500 dark:divide-gray-700"},Array.isArray(s)&&s.map(r=>{const{title:n,newsUrl:a,category:l,additionDate:c,deletionDate:i}=r,d=E(c,"dd/MM/yyyy"),m=E(i,"dd/MM/yyyy");return e.createElement("tr",{key:a,className:"group even:bg-greyAlt/[.1]"},e.createElement("td",{className:`${t}`},e.createElement("a",{href:a,target:"_blank",className:"transition-colors duration-500 group-hover:text-accentBase lg:text-medium"},n.length>O?`${n.slice(0,65)}...`:n)),e.createElement("td",{className:`${t}`},l),e.createElement("td",{className:`${t}`},d),e.createElement("td",{className:`${t}`},m))})))},y=7,U=({logData:s})=>{const[t,r]=h.useState(""),[n,a]=h.useState(1),l=t?s.filter(o=>o.title.toLowerCase().includes(t.toLowerCase())):s,c=l.length,i=Math.ceil(c/y),d=(n-1)*y,m=d+y,u=l.slice(d,m),g=o=>{const x=o.target.value;r(x),a(1)},v=o=>{o>=1&&o<=i&&a(o)};return e.createElement("div",{className:"mb-6 flex flex-col overflow-hidden rounded-lg shadow-modal"},e.createElement(k,{isOpen:!0,orientation:"horizontal"},e.createElement("div",{className:"-m-1.5"},e.createElement("div",{className:"inline-block min-w-full py-1.5 align-middle"},e.createElement("div",{className:"divide-y divide-greyAlt/[.4] overflow-hidden rounded-lg border dark:divide-greyBase/[.4] dark:border-greyBase/[.4]"},e.createElement("div",{className:"px-4 py-3 lg:px-6 lg:py-5"},e.createElement("div",{className:"relative w-[254px] md:max-w-xs"},e.createElement(w,{inputData:{name:"Deleted news",type:"text",value:t,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"icon-search",onChange:o=>g(o),variant:L.FilterServiceBlock}))),e.createElement(P,{displayedRows:u}),e.createElement("div",{className:"mb-3 px-4 py-1"},e.createElement($,{handlePageChange:v,currentPage:n,totalPages:i})))))))},j=()=>{const{dbSuccessMessage:s,isLoadingDBData:t,allArchive:r,archiveHistoryLog:n,errorDB:a,getHistoryLog:l,getArchives:c}=D(),{isAuthenticated:i}=S(),d=C();h.useEffect(()=>{a&&typeof a=="number"&&a>=500&&d("/serverError")},[a]),h.useEffect(()=>{c(),l()},[c,l]);const m=_(r),u=t,g=!t&&r.length!==0;return i&&e.createElement(e.Fragment,null,u&&e.createElement(I,{variant:"generalSection"}),g&&e.createElement(e.Fragment,null,e.createElement(U,{logData:n}),Object.entries(m).reverse().map(([v,o])=>e.createElement(A,{key:v,dateSeparator:v,position:"archivePage"},e.createElement(M,{currentItems:o})))),!u&&!g&&e.createElement(R,{variant:"page"}),s==="Remove news success"&&e.createElement(T,{variant:"interactive",status:"success"}))};export{j as default};
