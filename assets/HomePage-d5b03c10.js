import{u as O,R as n,P as C,S as y,a as L,b as P,r as B,c as R,d as _,e as z,f as $,g as j,h as K,L as Q,N as U}from"./index-ffd66035.js";import{P as V,N as Y}from"./NewsList-8cc6d146.js";import"./images-f5805423.js";const I="w-32",T=24,Z=({pageNumbers:s,currentPage:e,setCurrentPage:i})=>{const{breakpointsForMarkup:c}=O()??{breakpointsForMarkup:null},m=(c==null?void 0:c.isTablet)||(c==null?void 0:c.isDesktop),d=s.length,E=window.innerHeight,h=m?6:3,t=[],g=1,l=d,r=e-1,u=e+1,a=o=>n.createElement("li",{key:o,className:`${o===e?"active":""}`,onClick:()=>{i(o),window.scrollTo({top:0+E,left:0})}},n.createElement(C,{"aria-label":o.toString(),classNameButton:`h-10 border-accentBase font-medium transition-colors duration-500 ${o===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:"Small"},o)),f=o=>n.createElement("li",{key:o,className:"ellipsis"},n.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"..."));if(d<=h)for(let o=g;o<=l;o+=1)t.push(a(o));else e===g?(t.push(a(e)),t.push(a(u)),t.push(f("next")),t.push(a(l))):e===l?(t.push(a(g)),t.push(f("prev")),t.push(a(r)),t.push(a(e))):e>g&&e<l&&(e===2&&(t.push(f("prev")),t.push(a(e)),t.push(a(u)),t.push(f("next")),t.push(a(l))),e-1>g&&e+1!==l&&(t.push(f("prev")),t.push(a(r)),t.push(a(e)),t.push(a(u)),t.push(f("next"))),e+1===l&&(t.push(f("prev")),t.push(a(r)),t.push(a(e)),t.push(a(l))));const v=()=>{e>1&&(i(e-1),window.scrollTo({top:0+E,left:0}))},p=()=>{e<s.length&&(i(e+1),window.scrollTo({top:0+E,left:0}))};return n.createElement("div",{className:"flex justify-center items-center gap-2"},n.createElement(C,{id:"Previous page button",variant:"OtherButton",onHandleClick:v,width:I,disabled:e-1===0},n.createElement(y,{svgName:"icon-arrow-left",size:T,className:"fill-whiteBase"}),m?n.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Prev"):null),n.createElement("ul",{id:"page-numbers",className:"flex gap-2"},t),n.createElement(C,{id:"Next page button",variant:"OtherButton",onHandleClick:p,width:I,disabled:e===l},m?n.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Next"):null,n.createElement(y,{svgName:"icon-arrow-left",size:T,className:"fill-whiteBase rotate-180"})))},q=(s,e,i)=>{const c=[e];let m=s-e;for(;m>0;)c.push(i),m-=i;return c},G=(s,e)=>{const i=s&&s.slice(0,-1).reduce((m,d)=>m+d,0);return e-i},J=(s,e,i)=>q(s,e,i),X=(s,e)=>{try{return G(s,e)}catch(i){return console.error(i.message)}},F=s=>{const{breakpointsForMarkup:e}=O()||{breakpointsForMarkup:null},{popularNews:i,newsByKeyword:c,newsByCategory:m,newsByDate:d}=L(),{filteredNews:E}=P(),[h,t]=B.useState(1),[g,l]=B.useState([]),r=s&&(s==null?void 0:s.length)||0,u=(e==null?void 0:e.isNothing)||(e==null?void 0:e.isMobile),a=D(),f=S(),v=J(r,a,f),p=v[h-1]||0,o=X(v,r);B.useEffect(()=>{if(s&&(s==null?void 0:s.length)>0){const N=h*p-1>=r;let x,w;h===1?(x=h*p,w=x-p):h>1&&N&&o?(x=r,w=r-o):(x=h*p-1,w=x-p);const H=s.slice(w,x);l(H)}},[i,c,m,d,E,h]);function D(){return e!=null&&e.isNothing||e!=null&&e.isMobile?4:e!=null&&e.isTablet?7:8}function S(){return u?5:e!=null&&e.isTablet?8:9}const A=Math.ceil(h!==1&&u?r/p+1:r/p),W=Array.from({length:A},(N,x)=>x+1);return{currentItems:g,pageNumbers:W,currentPage:h,setCurrentPage:t}},ee=()=>{const{isLoadingAPIData:s,headline:e,fetchPopular:i}=L(),{isLoadingDBData:c,getSavedNews:m}=R(),{isAuthenticated:d}=_(),{openToast:E,setOpenToast:h}=z(),t=$(),g=j(t),{rebuildedNews:l}=K({activeLinks:g}),{hasResults:r}=P(),{currentItems:u,currentPage:a,pageNumbers:f,setCurrentPage:v}=F(l??[]);return B.useEffect(()=>{i("1"),d&&m()},[i,m,d]),n.createElement("div",null,s||c&&l&&(u==null?void 0:u.length)===0||r==="loading"?n.createElement(Q,{variant:"generalSection"}):n.createElement(n.Fragment,null,l&&l.length===0||r==="empty"?n.createElement(V,{variant:"page"}):n.createElement(n.Fragment,null,e&&n.createElement("h2",{className:"dark:text-whiteBase text-giant font-bold mb-6"},e),n.createElement(Y,{currentItems:u,currentPage:a}),n.createElement(Z,{pageNumbers:f,currentPage:a,setCurrentPage:v}))),d&&n.createElement(U,{variant:"non-interactive",openToast:E,setOpenToast:h,title:"Welcome",description:"Welcome to New York Times News Viewer"}))};export{ee as default};
