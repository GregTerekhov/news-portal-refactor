import{u as R,R as n,P as A,S as W,a as $,b as Q,r as C,c as q,d as G,e as J,f as U,g as X,L as Y}from"./index-60faf16b.js";import{P as Z,N as _}from"./NewsList-eaced261.js";const b=({pageNumbers:i,currentPage:e,setCurrentPage:p})=>{const{breakpointsForMarkup:s}=R()??{breakpointsForMarkup:null},w=i.length,u=window.innerHeight;let x=0;s!=null&&s.isNothing||s!=null&&s.isMobile?x=3:x=6;const t=[],r=1,c=w,d=e-1,a=e+1,l=o=>n.createElement("li",{key:o,className:`${o===e?"active":""}`,onClick:()=>{p(o),window.scrollTo({top:0+u,left:0})}},n.createElement(A,{"aria-label":o.toString(),classNameButton:`h-10 border-accentBase font-medium ${o===e?"bg-accentBase text-contrastWhite":"text-darkBase dark:text-whiteBase dark:border-whiteBase"}`,variant:"Small",dataTooltipTarget:`tooltip-pagination-pages-${o.toString()}`,dataTooltipPlacement:"bottom",tooltipText:`Paginate news to page ${o.toString()}`},o)),f=o=>n.createElement("li",{key:o,className:"ellipsis"},n.createElement("span",{className:"text-darkBase dark:text-whiteBase"},"..."));if(w<=x)for(let o=r;o<=c;o+=1)t.push(l(o));else e===r?(t.push(l(e)),t.push(l(a)),t.push(f("next")),t.push(l(c))):e===c?(t.push(l(r)),t.push(f("prev")),t.push(l(d)),t.push(l(e))):e>r&&e<c&&(e===2&&(t.push(f("prev")),t.push(l(e)),t.push(l(a)),t.push(f("next")),t.push(l(c))),e-1>r&&e+1!==c&&(t.push(f("prev")),t.push(l(d)),t.push(l(e)),t.push(f("next")),t.push(l(c))),e+1===c&&(t.push(l(r)),t.push(f("prev")),t.push(l(e)),t.push(l(c))));const B=()=>{e>1&&(p(e-1),window.scrollTo({top:0+u,left:0}))},E=()=>{e<i.length&&(p(e+1),window.scrollTo({top:0+u,left:0}))};return n.createElement("div",{className:"flex justify-center items-center gap-2"},n.createElement(A,{id:"Previous page button",variant:"OtherButton",onHandleClick:B,width:"w-32"},n.createElement(W,{svgName:"icon-arrow-left",size:20,className:"fill-whiteBase"}),s!=null&&s.isTablet||s!=null&&s.isDesktop?n.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Prev"):null),n.createElement("ul",{id:"page-numbers",className:"flex gap-2"},t),n.createElement(A,{id:"Next page button",variant:"OtherButton",onHandleClick:E,width:"w-32"},s!=null&&s.isTablet||s!=null&&s.isDesktop?n.createElement("span",{className:"text-base md:text-medium font-medium text-contrastWhite"},"Next"):null,n.createElement(W,{svgName:"icon-arrow-right",size:20,className:"stroke-whiteBase"})))},F=i=>{const{breakpointsForMarkup:e}=R()||{breakpointsForMarkup:null},{popularNews:p,newsByKeyword:s,newsByCategory:w,newsByDate:u}=$(),{filteredNews:x}=Q(),[t,r]=C.useState(1),[c,d]=C.useState([]),a=i&&(i==null?void 0:i.length)||0,l=4,f=7,B=8,E=5,o=8,z=9,I=D(a,l,E),N=D(a,f,o),y=D(a,B,z);console.log("mobilePages",I),console.log("last",I[I.length-1]),console.log("tabletPages",N),console.log("desktopPages",y);const P=V(),L=j();console.log("currentCardsPerPage",P),C.useEffect(()=>{if(i&&(i==null?void 0:i.length)>0){console.log("rebuildedNews",i);const m=t*P-1>=a;let h,g;t===1?(h=t*P,g=h-P):t>1&&m&&L?(h=a,e!=null&&e.isNothing||e!=null&&e.isMobile?g=a-L.firstIndexForLastMobilePage:e!=null&&e.isTablet?g=a-L.firstIndexForLastTabletPage:g=a-L.firstIndexForLastDesktopPage):(h=t*P-1,g=h-P);const v=i.slice(g,h);d(v)}console.log("currentItems",c)},[p,s,w,u,x,t]);function D(m,h,g){const v=[h];let T=m-h;for(;T>0;)v.push(g),T-=g;return v}function V(){return e!=null&&e.isMobile||e!=null&&e.isNothing?I[t-1]||0:e!=null&&e.isTablet?N[t-1]||0:y[t-1]||0}function S(m,h){const g=m&&m.slice(0,-1).reduce((T,K)=>T+K,0);return h-g}function j(){try{let m=S(I,a),h=S(N,a),g=S(y,a);return{firstIndexForLastMobilePage:m,firstIndexForLastTabletPage:h,firstIndexForLastDesktopPage:g}}catch(m){return console.error(m.message)}}const O=[];let H;t>1?H=Math.ceil(a/P+1):H=Math.ceil(a/P);for(let m=1;m<=H;m++)O.push(m);return{currentItems:c,pageNumbers:O,currentPage:t,setCurrentPage:r}},ee=()=>{const{isLoadingAPIData:i,fetchPopular:e}=$(),{savedNews:p,isLoadingDBData:s,getSavedNews:w,addVotedNews:u}=q(),[x,t]=C.useState(!1),r=G(),c=J(r),{rebuildedNews:d}=U({activeLinks:c}),{currentItems:a,currentPage:l,pageNumbers:f,setCurrentPage:B}=F(d??[]),{isAuthenticated:E}=X();C.useEffect(()=>{e("1"),E&&w()},[e,w,E]),C.useLayoutEffect(()=>{x&&(u(p),t(!1))},[x,u]);const o=()=>{t(!0)};return n.createElement("div",null,i||s&&d&&(a==null?void 0:a.length)===0?n.createElement(Y,{variant:"page"}):n.createElement(n.Fragment,null,d&&d.length===0?n.createElement(Z,{variant:"page"}):n.createElement(n.Fragment,null,n.createElement("h2",{className:"dark:text-whiteBase text-giant font-bold mb-6"},"Popular News"),n.createElement(_,{currentItems:a,currentPage:l,onChange:o}),n.createElement(b,{pageNumbers:f,currentPage:l,setCurrentPage:B}))))};export{ee as default};
