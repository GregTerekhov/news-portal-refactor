import{r as x,u as I,a as R,b as P,c as p,R as i,P as g,V as v,d as y,e as L,f as F,g as G}from"./index-a82b227f.js";import{P as D,N as H}from"./PageTemplate-a9495069.js";import"./images-e5f9d343.js";import"./Toast-a10e91b5.js";const M=(e,t,a)=>({handlePageNumberClick:h=>{e(h),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},handlePrevClick:()=>{t>1&&(e(t-1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))},handleNextClick:()=>{t<a.length&&(e(t+1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))}}),d={FIRST_MOBILE_PAGE_COUNT:4,FIRST_TABLET_PAGE_COUNT:7,FIRST_DESKTOP_PAGE_COUNT:8,OTHER_MOBILE_PAGE_COUNT:5,OTHER_TABLET_PAGE_COUNT:8,OTHER_DESKTOP_PAGE_COUNT:9},l=1,B={DESKTOP_BUTTONS_QUANTITY:3,MOBILE_BUTTONS_QUANTITY:5},K=(e,t,a)=>{const s=[t];let c=e-t;for(;c>0;)s.push(a),c-=a;return s},Q=(e,t)=>{const a=e&&e.slice(0,-1).reduce((s,c)=>s+c,0);return t-a},Y=(e,t,a)=>K(e,t,a);function W(e,t){switch(!0){case e:return d.FIRST_MOBILE_PAGE_COUNT;case t:return d.FIRST_TABLET_PAGE_COUNT;default:return d.FIRST_DESKTOP_PAGE_COUNT}}function $(e,t){switch(!0){case e:return d.OTHER_MOBILE_PAGE_COUNT;case t:return d.OTHER_TABLET_PAGE_COUNT;default:return d.OTHER_DESKTOP_PAGE_COUNT}}const b=(e,t)=>Q(e,t);function V(e,t,a){return Y(e,W(t,a),$(t,a))}const j=(e,t,a,s,c)=>{const o=t.length,h=e-l,T=e+l,E=a?B.MOBILE_BUTTONS_QUANTITY:B.DESKTOP_BUTTONS_QUANTITY,n=[];if(o<=E)for(let r=l;r<=o;r+=1)n.push(s(r));else e===l?(n.push(s(e)),n.push(s(T)),n.push(c("next")),n.push(s(o))):e===o?(n.push(s(l)),n.push(c("prev")),n.push(s(h)),n.push(s(e))):e>l&&e<o&&(e===2&&(n.push(c("prev")),n.push(s(e)),n.push(s(T)),n.push(c("next")),n.push(s(o))),e-l>l&&e+l!==o&&(n.push(c("prev")),n.push(s(h)),n.push(s(e)),n.push(s(T)),n.push(c("next"))),e+l===o&&(n.push(c("prev")),n.push(s(h)),n.push(s(e)),n.push(s(o))));return n},z=e=>{const[t,a]=x.useState([]),{popularNews:s,newsByKeyword:c,newsByCategory:o,newsByDate:h}=I(),{filteredNews:T}=R(),{isMobile:E,isTablet:n}=P(),{currentPage:r}=p(),u=e&&(e==null?void 0:e.length)||0,f=V(u,E,n),m=f[r-l]||0,k=b(f,u);x.useEffect(()=>{if(e&&(e==null?void 0:e.length)>0){const A=r*m-l>=u,C=r>l&&A&&!!k;let _,O;r===l?(_=r*m,O=_-m):C?(_=r*m,O=_-m-l):(_=r*m-l,O=_-m);const U=e.slice(O,_);a(U)}},[s,c,o,h,T,r]);const w=Math.ceil(r!==l&&E?u/m+l:u/m),S=Array.from({length:w},(A,C)=>C+l);return{currentItems:t,pageNumbers:S}},N=({direction:e,pageNumbers:t,handlePrevClick:a,handleNextClick:s})=>{const{isNotMobile:c}=P(),{currentPage:o}=p(),h=o-1===0,T=o===(t==null?void 0:t.length),E=()=>c?i.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},e):null;return i.createElement(g,{id:`${e} page button`,variant:v.Other,onHandleClick:e==="Prev"?a:s,width:"w-32",disabled:e==="Prev"?h:T,hasIcon:!0,svgName:"arrow",svgSize:"xsIcon14",classNameIcon:`${e==="Prev"?"rotate-90":"-rotate-90"} fill-whiteBase`,classNameButton:e==="Prev"?"flex-row-reverse":""},E())},q=({pageNumber:e,onClick:t})=>{const{currentPage:a}=p(),s=`h-10 font-medium ring-whiteBase border-accentBase dark:ring-darkBase ring-2 ${e===a?"bg-accentBase text-contrastWhite hocus:bg-accentAlt  dark:border-whiteBase":"text-darkBase dark:text-whiteBase dark:border-greyBase"}`;return i.createElement("li",{key:e,onClick:()=>t(e)},i.createElement(g,{"aria-current":"page","aria-label":`Page ${e.toString()} button`,classNameButton:`${s}`,variant:v.Small},e))},J=({pageNumbers:e})=>{const{isNotMobile:t}=P(),{currentPage:a,setCurrentPage:s}=p(),{handlePageNumberClick:c,handleNextClick:o,handlePrevClick:h}=M(s,a,e),r=j(a,e,t,u=>i.createElement(q,{pageNumber:u,onClick:c}),u=>i.createElement("li",{key:u,className:"text-darkBase dark:text-whiteBase"},"...")).map((u,f)=>i.createElement(i.Fragment,{key:f},u));return i.createElement("div",{className:"flex items-center justify-center gap-2"},i.createElement(N,{direction:"Prev",handlePrevClick:h}),i.createElement("ul",{id:"page-numbers",className:"flex items-center gap-2"},r),i.createElement(N,{direction:"Next",pageNumbers:e,handleNextClick:o}))},X=1,ne=()=>{const{fetchPopular:e}=I(),{getSavedNews:t}=y(),{isAuthenticated:a}=L(),{currentPage:s}=p(),c=F(),{rebuiltNews:o}=G(c),{currentItems:h,pageNumbers:T}=z(o??[]);return x.useEffect(()=>{e({period:X}),a&&t()},[e,t,a]),i.createElement(D,null,i.createElement(H,{currentItems:h,currentPage:s}),i.createElement(J,{pageNumbers:T}))};export{ne as default};
