import{r as g,u as I,a as R,b as x,c as f,R as i,P as v,V as S,d as L,e as y,f as F,g as G}from"./index-c914540b.js";import{P as D,N as H}from"./PageTemplate-d3c22dfd.js";import"./images-92ff7b35.js";import"./Toast-de510eda.js";const M=(e,t,a)=>({handlePageNumberClick:r=>{e(r),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},handlePrevClick:()=>{t>=1&&(e(t-1),setTimeout(()=>{window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},100))},handleNextClick:()=>{t<=a.length&&(e(t+1),setTimeout(()=>{window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},100))}}),d={FIRST_MOBILE_PAGE_COUNT:4,FIRST_TABLET_PAGE_COUNT:7,FIRST_DESKTOP_PAGE_COUNT:8,OTHER_MOBILE_PAGE_COUNT:5,OTHER_TABLET_PAGE_COUNT:8,OTHER_DESKTOP_PAGE_COUNT:9},l=1,B={DESKTOP_BUTTONS_QUANTITY:3,MOBILE_BUTTONS_QUANTITY:5},K=(e,t,a)=>{const n=[t];let c=e-t;for(;c>0;)n.push(a),c-=a;return n},Q=(e,t)=>{const a=e&&e.slice(0,-1).reduce((n,c)=>n+c,0);return t-a},Y=(e,t,a)=>K(e,t,a);function W(e,t){switch(!0){case e:return d.FIRST_MOBILE_PAGE_COUNT;case t:return d.FIRST_TABLET_PAGE_COUNT;default:return d.FIRST_DESKTOP_PAGE_COUNT}}function $(e,t){switch(!0){case e:return d.OTHER_MOBILE_PAGE_COUNT;case t:return d.OTHER_TABLET_PAGE_COUNT;default:return d.OTHER_DESKTOP_PAGE_COUNT}}const b=(e,t)=>Q(e,t);function V(e,t,a){return Y(e,W(t,a),$(t,a))}const j=(e,t,a,n,c)=>{const o=t.length,r=e-l,T=e+l,m=a?B.MOBILE_BUTTONS_QUANTITY:B.DESKTOP_BUTTONS_QUANTITY,O=e===l,u=e===o,h=e+l===o,_=e-l>l&&e+l!==o,s=[];if(o<=m)for(let p=l;p<=o;p+=1)s.push(n(p));else O?(s.push(n(e)),s.push(n(T)),s.push(c("next")),s.push(n(o))):u?(s.push(n(l)),s.push(c("prev")),s.push(n(r)),s.push(n(e))):e>l&&e<o&&(e===2&&(s.push(c("prev")),s.push(n(e)),s.push(n(T)),s.push(c("next")),s.push(n(o))),_&&(s.push(c("prev")),s.push(n(r)),s.push(n(e)),s.push(n(T)),s.push(c("next"))),h&&(s.push(c("prev")),s.push(n(r)),s.push(n(e)),s.push(n(o))));return s},z=e=>{const[t,a]=g.useState([]),{popularNews:n,newsByKeyword:c,newsByCategory:o,newsByDate:r}=I(),{filteredNews:T}=R(),{isSmallScreens:m,isTablet:O}=x(),{currentPage:u}=f(),h=e&&(e==null?void 0:e.length)||0,_=V(h,m,O),s=_[u-l]||0,p=b(_,h);g.useEffect(()=>{if(e&&(e==null?void 0:e.length)>0){const A=u*s-l>=h,P=u>l&&A&&!!p;let E,C;u===l?(E=u*s,C=E-s):P?(E=u*s,C=E-s-l):(E=u*s-l,C=E-s);const U=e.slice(C,E);a(U)}},[n,c,o,r,T,u]);const k=Math.ceil(u!==l&&m?h/s+l:h/s),w=Array.from({length:k},(A,P)=>P+l);return{currentItems:t,pageNumbers:w}},N=({direction:e,pageNumbers:t,handlePrevClick:a,handleNextClick:n})=>{const{isNotMobile:c}=x(),{currentPage:o}=f(),r=o-1===0,T=o===(t==null?void 0:t.length),m=()=>c?i.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},e):null;return i.createElement(v,{id:`${e} page button`,variant:S.Other,onHandleClick:e==="Prev"?a:n,width:"w-32",disabled:e==="Prev"?r:T,hasIcon:!0,svgName:"arrow",svgSize:"xsIcon14",classNameIcon:`${e==="Prev"?"rotate-90":"-rotate-90"} fill-whiteBase`,classNameButton:e==="Prev"?"flex-row-reverse":""},m())},q=({pageNumber:e,onClick:t})=>{const{currentPage:a}=f(),n=`h-10 font-medium ring-whiteBase border-accentBase dark:ring-darkBase ring-2 ${e===a?"bg-accentBase text-contrastWhite hocus:bg-accentAlt  dark:border-whiteBase":"text-darkBase dark:text-whiteBase dark:border-greyBase"}`;return i.createElement("li",{key:e,onClick:()=>t(e)},i.createElement(v,{"aria-current":"page","aria-label":`Page ${e.toString()} button`,classNameButton:n,variant:S.Small},e))},J=({pageNumbers:e})=>{const{isNotMobile:t}=x(),{currentPage:a,setCurrentPage:n}=f(),{handlePageNumberClick:c,handleNextClick:o,handlePrevClick:r}=M(n,a,e),u=j(a,e,t,h=>i.createElement(q,{pageNumber:h,onClick:c}),h=>i.createElement("li",{key:h,className:"text-darkBase dark:text-whiteBase"},"...")).map((h,_)=>i.createElement(i.Fragment,{key:_},h));return i.createElement("div",{className:"flex items-center justify-center gap-2"},i.createElement(N,{direction:"Prev",handlePrevClick:r}),i.createElement("ul",{id:"page-numbers",className:"flex items-center gap-2"},u),i.createElement(N,{direction:"Next",pageNumbers:e,handleNextClick:o}))},X=1,ne=()=>{const{fetchPopular:e}=I(),{getSavedNews:t}=L(),{isAuthenticated:a}=y(),{currentPage:n}=f(),c=F(),{rebuiltNews:o}=G(c),{currentItems:r,pageNumbers:T}=z(o??[]);return g.useEffect(()=>{e({period:X}),a&&t()},[e,t,a]),i.createElement(D,null,i.createElement(H,{currentItems:r,currentPage:n}),i.createElement(J,{pageNumbers:T}))};export{ne as default};
