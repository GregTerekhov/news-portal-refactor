import{h as x,i as w,r as h,R as e,U as b,S as f,c as B,d as L,L as C,A as S}from"./index-f58fe3ec.js";import{N as D,P as A}from"./NewsList-cf1415d5.js";import"./images-8c61aa63.js";const P=a=>{const r={};return a&&(a==null?void 0:a.length)>0&&a.forEach(n=>{const s=n==null?void 0:n.additionDate;if(s){const l=x(s,"LLLL yyyy",{locale:w});r[l]||(r[l]=[]),r[l].push(n)}}),r},I=({logData:a})=>{const[r,n]=h.useState(""),[s,l]=h.useState(1),m=r?a.filter(t=>t.title.toLowerCase().includes(r.toLowerCase())):a,o=7,p=m.length,i=Math.ceil(p/o),d=(s-1)*o,g=d+o,y=m.slice(d,g),v=t=>{console.log(t.target.value);const c=t.target.value;n(c),l(1)},u=t=>{t>=1&&t<=i&&l(t)};return e.createElement("div",{className:"flex flex-col mb-6"},e.createElement("div",{className:"-m-1.5 overflow-x-auto"},e.createElement("div",{className:"p-1.5 min-w-full inline-block align-middle"},e.createElement("div",{className:"border rounded-lg divide-y divide-greyAlt dark:border-greyBase/[.4] dark:divide-greyBase/[.4] shadow-darkCard"},e.createElement("div",{className:"py-3 px-4"},e.createElement("div",{className:"relative max-w-xs"},e.createElement(b,{inputData:{name:"Deleted news",type:"text",value:r,placeholder:"Search for deleted news"},hasIcon:!0,svgName:"icon-search",onChange:t=>v(t),variant:"filterServiceBlock"}))),e.createElement("div",{className:"overflow-hidden"},e.createElement("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-greyBase/[.4]"},e.createElement("thead",{className:"bg-greyAlt dark:bg-greyBase/[.4]"},e.createElement("tr",null,e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs md:text-small font-medium text-greyAlt uppercase"},"Title"),e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs md:text-small font-medium text-greyAlt uppercase"},"Category"),e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs  md:text-small font-medium text-greyAlt uppercase"},"Addition Date"),e.createElement("th",{scope:"col",className:"px-6 py-3 text-start text-xs md:text-small font-medium text-greyAlt uppercase"},"Deletion Date"))),e.createElement("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700"},y&&y.map(({title:t,newsUrl:c,category:E,additionDate:N,deletionDate:k})=>e.createElement("tr",{key:c},e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-darkBase dark:text-whiteBase"},e.createElement("a",{href:c,target:"_blank",className:" hover:text-accentBase transition-colors duration-500"},t.length>60?`${t.slice(0,65)}...`:t)),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-darkBase dark:text-whiteBase"},E),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-darkBase dark:text-whiteBase"},x(N,"dd/MM/yyyy")),e.createElement("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-darkBase dark:text-whiteBase"},x(k,"dd/MM/yyyy"))))))),e.createElement("div",{className:"py-1 px-4"},e.createElement("nav",{className:"flex items-center space-x-1"},e.createElement("button",{type:"button",onClick:()=>u(s-1),className:"p-2.5 inline-flex items-center gap-x-2 text-sm rounded-full text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:hover:bg-white/10 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{"aria-hidden":"true"},e.createElement(f,{svgName:"icon-arrow-left",size:20,className:"fill-accentBase dark:fill-whiteBase"})),e.createElement("span",{className:"sr-only"},"Previous")),Array.from({length:i},(t,c)=>e.createElement("button",{key:c,type:"button","aria-current":"page",className:"min-w-[40px] flex justify-center items-center text-gray-800 hover:bg-gray-100 py-2.5 text-sm rounded-full disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:hover:bg-white/10",onClick:()=>u(c+1)},c+1)),e.createElement("button",{type:"button",onClick:()=>u(s+1),className:"p-2.5 inline-flex items-center gap-x-2 text-sm rounded-full text-gray-800 hover:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:hover:bg-white/10 dark:focus:outline-none dark:focus:ring-1 dark:focus:ring-gray-600"},e.createElement("span",{className:"sr-only"},"Next"),e.createElement("span",{"aria-hidden":"true"},e.createElement(f,{svgName:"icon-arrow-left",size:20,className:"fill-accentBase dark:fill-whiteBase rotate-180"})))))))))},j=()=>{const{isLoadingDBData:a,allArchive:r,archiveHistoryLog:n,getHistoryLog:s,getArchives:l}=B(),{isAuthenticated:m}=L();h.useEffect(()=>{l(),s()},[l,s]);const o=P(r),p=a,i=!a&&r.length!==0;return m&&e.createElement(e.Fragment,null,p&&e.createElement(C,{variant:"generalSection"}),i&&e.createElement(e.Fragment,null,e.createElement(I,{logData:n}),Object.entries(o).map(([d,g])=>e.createElement(S,{key:d,dateSeparator:d,position:"archivePage"},e.createElement(D,{currentItems:g})))),!p&&!i&&e.createElement(A,{variant:"page"}))};export{j as default};
