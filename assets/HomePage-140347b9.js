import{r as x,u as v,a as R,b as P,c as p,R as i,P as B,V as g,d as L,e as y,f as F,g as G}from"./index-563ab777.js";import{P as D,N as H}from"./PageTemplate-5b628750.js";import"./images-71fd4e16.js";import"./Toast-a272af09.js";const M=(t,e,o)=>({handlePageNumberClick:u=>{t(u),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"})},handlePrevClick:()=>{e>1&&(t(e-1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))},handleNextClick:()=>{e<o.length&&(t(e+1),window.scrollTo({top:0+window.innerHeight,left:0,behavior:"smooth"}))}}),f={FIRST_MOBILE_PAGE_COUNT:4,FIRST_TABLET_PAGE_COUNT:7,FIRST_DESKTOP_PAGE_COUNT:8,OTHER_MOBILE_PAGE_COUNT:5,OTHER_TABLET_PAGE_COUNT:8,OTHER_DESKTOP_PAGE_COUNT:9},r=1,N={DESKTOP_BUTTONS_QUANTITY:3,MOBILE_BUTTONS_QUANTITY:5},K=(t,e,o)=>{const s=[e];let c=t-e;for(;c>0;)s.push(o),c-=o;return s},Q=(t,e)=>{const o=t&&t.slice(0,-1).reduce((s,c)=>s+c,0);return e-o},Y=(t,e,o)=>K(t,e,o);function W(t,e){switch(!0){case t:return f.FIRST_MOBILE_PAGE_COUNT;case e:return f.FIRST_TABLET_PAGE_COUNT;default:return f.FIRST_DESKTOP_PAGE_COUNT}}function $(t,e){switch(!0){case t:return f.OTHER_MOBILE_PAGE_COUNT;case e:return f.OTHER_TABLET_PAGE_COUNT;default:return f.OTHER_DESKTOP_PAGE_COUNT}}const b=(t,e)=>Q(t,e);function V(t,e,o){return Y(t,W(e,o),$(e,o))}const j=(t,e,o,s,c)=>{const a=e.length,u=t-r,T=t+r,E=o?N.MOBILE_BUTTONS_QUANTITY:N.DESKTOP_BUTTONS_QUANTITY,n=[];if(a<=E)for(let l=r;l<=a;l+=1)n.push(s(l));else t===r?(n.push(s(t)),n.push(s(T)),n.push(c("next")),n.push(s(a))):t===a?(n.push(s(r)),n.push(c("prev")),n.push(s(u)),n.push(s(t))):t>r&&t<a&&(t===2&&(n.push(c("prev")),n.push(s(t)),n.push(s(T)),n.push(c("next")),n.push(s(a))),t-r>r&&t+r!==a&&(n.push(c("prev")),n.push(s(u)),n.push(s(t)),n.push(s(T)),n.push(c("next"))),t+r===a&&(n.push(c("prev")),n.push(s(u)),n.push(s(t)),n.push(s(a))));return n},z=t=>{const[e,o]=x.useState([]),{popularNews:s,newsByKeyword:c,newsByCategory:a,newsByDate:u}=v(),{filteredNews:T}=R(),{isMobile:E,isTablet:n}=P(),{currentPage:l}=p(),h=t&&(t==null?void 0:t.length)||0,O=V(h,E,n),m=O[l-1]||0,w=b(O,h);x.useEffect(()=>{if(t&&(t==null?void 0:t.length)>0){const A=l*m-r>=h,C=l>r&&A&&!!w;let _,d;l===r?(_=l*m,d=_-m):C?(_=l*m,d=_-m-r):(_=l*m-r,d=_-m);const U=t.slice(d,_);o(U)}},[s,c,a,u,T,l]);const S=Math.ceil(l!==1&&E?h/m+1:h/m),k=Array.from({length:S},(A,C)=>C+1);return{currentItems:e,pageNumbers:k}},I=({direction:t,pageNumbers:e,handlePrevClick:o,handleNextClick:s})=>{const{isNotMobile:c}=P(),{currentPage:a}=p(),u=a-1===0,T=a===(e==null?void 0:e.length),E=()=>c?i.createElement("span",{className:"text-base font-medium text-contrastWhite md:text-medium hg:text-xl"},t):null;return i.createElement(B,{id:`${t} page button`,variant:g.Other,onHandleClick:t==="Prev"?o:s,width:"w-32",disabled:t==="Prev"?u:T,hasIcon:!0,svgName:"arrow",svgSize:"xsIcon14",classNameIcon:`${t==="Prev"?"rotate-90":"-rotate-90"} fill-whiteBase`,classNameButton:t==="Prev"?"flex-row-reverse":""},E())},q=({pageNumber:t,onClick:e})=>{const{currentPage:o}=p(),s=`h-10 border-accentBase dark:border-whiteBase font-medium transition-colors duration-500 ${t===o?"bg-accentBase text-contrastWhite hocus:bg-accentAlt":"text-darkBase dark:text-whiteBase"}`;return i.createElement("li",{key:t,onClick:()=>e(t)},i.createElement(B,{"aria-current":"page","aria-label":`Page ${t.toString()} button`,classNameButton:`${s}`,variant:g.Small},t))},J=({pageNumbers:t})=>{const{isNotMobile:e}=P(),{currentPage:o,setCurrentPage:s}=p(),{handlePageNumberClick:c,handleNextClick:a,handlePrevClick:u}=M(s,o,t),l=j(o,t,e,h=>i.createElement(q,{pageNumber:h,onClick:c}),h=>i.createElement("li",{key:h,className:"text-darkBase dark:text-whiteBase"},"...")).map((h,O)=>i.createElement(i.Fragment,{key:O},h));return i.createElement("div",{className:"flex items-center justify-center gap-2"},i.createElement(I,{direction:"Prev",handlePrevClick:u}),i.createElement("ul",{id:"page-numbers",className:"flex items-center gap-2"},l),i.createElement(I,{direction:"Next",pageNumbers:t,handleNextClick:a}))},X=1,nt=()=>{const{fetchPopular:t}=v(),{getSavedNews:e}=L(),{isAuthenticated:o}=y(),{currentPage:s}=p(),c=F(),{rebuiltNews:a}=G(c),{currentItems:u,pageNumbers:T}=z(a??[]);return x.useEffect(()=>{t({period:X}),o&&e()},[t,e,o]),i.createElement(D,null,i.createElement(H,{currentItems:u,currentPage:s}),i.createElement(J,{pageNumbers:T}))};export{nt as default};
